var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,o,a){return e===o?n:n+(t-e)*(a-n)/(o-e)}function o(t,e){const n=.85*t,o=.65*e;return{x:.75*(t-n),y:(e-o)/2,width:n,height:o}}function a(t,e){const n=t[0],o=t[1],a=Math.abs(o-n),i=l(t,e);let s=Math.round(a/i);return n+s*i<o&&s++,s}function i(){let t=null,e=null;if(layout){const n=7,o=layout.xAxis;o&&o.range&&(t=s(o.range,n));const a=10,i=layout.yAxis;i&&i.range&&(e=s(i.range,a))}return data,{xRange:t,yRange:e}}function l(t,e){const n=t[0],o=t[1],a=Math.abs(o-n)/e,i=a%100,l=[1,2,5,10,20,50,100].filter((t=>t>=i))[0];return a-i+l}function s(t,e){let n=t[0],o=t[1];n>=10?n=10*Math.floor(n/10):n>=5?n=5*Math.floor(n/5):n>=2?n=2*Math.floor(n/2):n>=0?n=0:n>10?n=Math.floor(n):n<=-10&&(n=10*Math.floor(n/10));const i=l(t,e),s=a(t,e);return console.log("step: ",i,e),o=n+s*i,[n,o]}function r(t,e){const n=t.canvas,a=o(n.width,n.height),i=layout.xAxis,l=layout.yAxis;if(i&&l){const t=s(i.range,7),n=t[0],o=t[1],r=o-n,h=s(l.range,10),c=h[0],g=h[1],y=g-c;if(e.x>=n&&e.x<=o&&e.y>=c&&e.y<=g){const t=(e.x-n)/r,o=(e.y-c)/y;return{x:a.x+t*a.width,y:a.y+a.height-o*a.height}}console.log("xRange: ",n,o),console.log("yRange: ",c,g),console.log("Position: ",e.x,e.y)}return null}t.r(e),t.d(e,{default:()=>P});const h=t=>{const e=t.canvas,n=o(e.width,e.height);t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.stroke();const s=i();!function(t,e,n){const o=e.width,i=e.height,s=e.x;let r=s,h=e.y+i;if(n){const e=10,c=n[0],g=l(n,e);let y=a(n,e),f=i/y,u=c,x=13;for(let e=0;e<y;e++){t.font=x+"px Arial";const e=r-t.measureText(u).width-x,n=h+Math.floor(x/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(s+o,h),t.lineTo(s,h),t.stroke(),t.beginPath(),t.fillText(u,e,n),u+=g,h-=f}}}(t,n,s.yRange),function(t,e,n){const o=e.width,i=e.height,s=e.x,r=e.y;let h=s,c=r+i;if(n){const e=7,s=n[0],g=l(n,e);let y=a(n,e),f=o/y,u=s,x=13;for(let e=0;e<y;e++){t.font=x+"px Arial";const e=h-t.measureText(u).width/2,n=c+2*x;t.beginPath(),t.moveTo(h,r),t.lineTo(h,r+i),t.stroke(),t.beginPath(),t.fillText(u,e,n),u+=g,h+=f}}}(t,n,s.xRange),function(t,e){const n=e.width,o=e.height,a=e.x,i=e.y;let l=layout.title,s=layout.yAxis,r=layout.xAxis;if(t.textAlign="center",l){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(l,a+n/2,i/2+e/2)}if(s){let e=s.title;t.beginPath();let n=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(a-36,i+o/2),t.rotate(n),t.fillText(e,0,0),t.restore()}if(r){let e=r.title;t.beginPath(),t.font="18px Arial",t.fillText(e,a+n/2,i+o+54)}}(t,n)};let c=null,g=!1,y=!1,f=null;const u=(t,e,o,a)=>{const l=i().xRange,s=l[0],h=l[1],u=r(t,a);if(u){if(g){const e=r(t,{x:s,y:n(s,c.x,c.y,a.x,a.y)});e&&(t.beginPath(),t.moveTo(e.x,e.y),t.strokeStyle="blue",t.lineWidth=o,t.lineTo(u.x,u.y)),y=!0}f=a,g=!1}else if(c=a,g=!0,y){const e=r(t,{x:h,y:n(h,f.x,f.y,a.x,a.y)});e&&(t.strokeStyle="blue",t.lineWidth=o,t.lineTo(e.x,e.y)),y=!1}u&&("start"===e?(t.beginPath(),t.moveTo(u.x,u.y)):(console.log("wowo"),t.strokeStyle="blue",t.lineWidth=o,t.lineTo(u.x,u.y))),"end"===e&&(c=null,g=!0,y=!1,t.stroke(),t.closePath())},x=(t,e,n)=>{const o=r(t,n);o&&(t.beginPath(),t.fillStyle="blue",t.arc(o.x,o.y,e,0,2*Math.PI),t.fill(),t.closePath())},d=(t,e,n)=>{if(n){const a=n.x,i=n.y;for(var o=0;o<a.length;o++){const n=a[o],l=i[o],s=4,r=0===o?"start":o===a.length-1?"end":"";if(l){const o={x:n,y:l};"arcs"===e||"bars"===e||("lines"===e?u(t,r,s,o):"points"===e&&x(t,s,o))}else t.stroke(),t.closePath()}}},b=(t,e)=>{e&&d(t,"points",e)},v=(t,e)=>{e&&d(t,"lines",e)},T=t=>{for(let e=0;e<data.length;e++){const n=data[e],o=n.type;o&&("line"===o&&v(t,n,layout),"scatter"===o&&b(t,n,layout))}};function p(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}p.prototype.plot=function(t,e){const n=this.canvas;n.width=700,n.height=525;const o=n.getContext("2d");h(o),T(o),this.addCanvasToTarget()};DataVision=p})()})();