var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,o,a){return e===o?n:n+(t-e)*(a-n)/(o-e)}function o(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}function a(t,e,n={x:0,y:0}){const o=Math.PI/180*t;return{x:n.x+e*Math.cos(o),y:n.y+e*Math.sin(o)}}function i(t,e){if(!t)return null;const n=t[0],o=t[1],a=Math.abs(o-n),i=l(t,e);let s=Math.round(a/i);return n+s*i<o&&s++,s}function l(t,e){if(!t)return null;const n=t[0],o=t[1],a=Math.abs(o-n)/e,i=a%100,l=[1,2,5,10,20,50,100].filter((t=>t>=i))[0];return a-i+l}function s(t,e){if(!t)return null;let n=t[0],o=t[1];n>=10?n=10*Math.floor(n/10):n>=5?n=5*Math.floor(n/5):n>=2?n=2*Math.floor(n/2):n>=0?n=0:n>10?n=Math.floor(n):n<=-10&&(n=10*Math.floor(n/10));const a=l([n,o],e);return o=n+i([n,o],e)*a,[n,o]}function r(t,e){const n=t.getLayout(),o=n.graphPosition,a=n.ranges,i=s(a.xRange,7),l=i?i[0]:null,r=i?i[1]:null,h=r-l,c=s(a.yRange,10),g=c?c[0]:null,f=c?c[1]:null,u=f-g;if(e.x>=l&&e.x<=r&&e.y>=g&&e.y<=f){const t=(e.x-l)/h,n=(e.y-g)/u;return{x:o.x+t*o.width,y:o.y+o.height-n*o.height}}return null}function h(t,e){const n=t.getLayout(),o=n.graphPosition,a=s(n.ranges.yRange,10),i=a[0],l=a[1];if(e>=i&&e<=l){const t=(e-i)/(l-i);return o.y+o.height-t*o.height}return null}function c(t,e){const n=t.getLayout(),o=n.graphPosition,a=n.ranges,i=s(a.xRange,7);console.log("rnage: ",i,a.xRange);const l=i[0],r=i[1];if(e>=l&&e<=r){const t=(e-l)/(r-l);return o.x+o.width-t*o.width}return null}t.r(e),t.d(e,{default:()=>D});const g=t=>{const e=t.getCtx(),n=t.getLayout(),o=t.getStyle().title,a=t.getCanvas().width,i=n.graphPosition.y;let l=n.titleLines;if(e.textAlign="center",l){const t=o.fontSize;e.font="bold "+t+"px "+o.fontFamily;let n=a/2,s=i/2+t/2;l.length>1&&(s=t);for(let o=0;o<l.length;o++){const a=l[o];e.beginPath(),e.fillText(a,n,s),e.closePath(),s+=t}}},f=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}],u=t=>{const e=t.getLayout(),n=e.firstDataType;["line","scatter","bar"].includes(n)?("bar"===n?(e.isBarChart=!0,function(t){const e=t.getCtx(),n=t.getLayout(),a=[...t.getData()],i=t.getStyle().label,l=i.fontSize;e.font=l+"px "+i.fontFamily;let r=null,h=1,c=0,g=new Map,f=null;if(a){f=a.length>0?a[0].direction:null;const t="hr"===f;if(n){let e=10,o=n.yAxis;t&&(e=7,o=n.xAxis),o&&o.range&&(r=s(o.range,e))}let i=r;const l=[...a],y=l.length;for(let n=0;n<y;n++){const a={...l[n]},s=a.x,f=a.y;if("bar"===a.type){const n=a.barColors?a.barColors:[];for(var u=0;u<s.length;u++){const o=t?f[u]:s[u],a=t?s[u]:f[u],i=n[u];let l=null,r=null;const y=e.measureText(o).width;if(y>c&&(c=y),g.has(o)){const t=g.get(o);l=[...t.yValues,a],r=[...t.barColors,i]}else l=[a],r=[i];l&&l.length>h&&(h=l.length),g.set(o,{values:l,barColors:r})}a.type=null}if(!r){const e=t?s:f;console.log(e);const n=o(e);n&&(i=i?[Math.min(i[0],n.min),Math.max(i[1],n.max)]:[n.min,n.max])}}i&&(r=[Math.round(i[0]),Math.round(i[1])])}console.log("myRange: ",r),n.ranges={yRange:r,xRange:r};const y={type:"bar",range:r,barCategories:g,categoryBarMax:h,maxTextWidth:c,direction:f};n.barData=y,a.splice(0,1,y),t.setData(a)}(t)):function(t){const e=t.getLayout();let n=null,a=null;if(e){const t=7,o=e.xAxis;o&&o.range&&(n=s(o.range,t));const i=10,l=e.yAxis;l&&l.range&&(a=s(l.range,i))}if(data&&(!n||!a)){let t=n,e=a;for(let i=0;i<data.length;i++){const l=data[i],s=l.x,r=l.y;if(!n){const e=o(s);e&&(t=t?[Math.min(t[0],e.min),Math.max(t[1],e.max)]:[e.min,e.max])}if(!a){const t=o(r);t&&(e=e?[Math.min(e[0],t.min),Math.max(e[1],t.max)]:[t.min,t.max])}}t&&(n=[Math.round(t[0]),Math.round(t[1])]),e&&(a=[Math.round(e[0]),Math.round(e[1])])}e.ranges={xRange:n,yRange:a}}(t),(t=>{const e=t.getCtx(),n=e.canvas.width,o=t.getLayout(),a=t.getStyle().label,r=o.graphPosition;let h=r.width,c=r.height,f=r.x,u=r.y;const y=o.firstDataType,x=o.barData,d=!!x&&"hr"===x.direction;if("bar"===y){const t=x.maxTextWidth,e=x.barCategories,n=Array.from(e.keys());d||t>h/n.length&&(c-=t/2)}const m=o.ranges;if(m)if("bar"===y&&d){const t=x.maxTextWidth;t>f&&(f+=t,h=n-f)}else{let t=m.yRange;if(t){const o=t[1],i=a.fontSize;e.font=i+"px "+a.fontFamily;const l=e.measureText(o).width;o&&(f+=l,h=n-f)}}const p={x:f,y:u,width:h,height:c};o.graphPosition={...p},e.beginPath(),e.rect(p.x,p.y,p.width-1,p.height),e.stroke(),function(t,e){const n=t.getCtx(),o=t.getLayout(),a=t.getStyle().label,r=e.width,h=e.height,c=e.x,g=e.y,f=o.firstDataType,u=o.ranges,y=a.fontSize;n.font=y+"px "+a.fontFamily,n.textBaseline="hanging";let x=0,d=g+h;const m=o.barData,p=!!m&&"hr"===m.direction;if("bar"!==f||p){let t=u.xRange;if(t){const e=7;if(t=s(t,e),t){const o=t[0],a=t[1],s=l(t,e);let f=i(t,e),u=r/f;u<1&&(u=1);let m=0;const p=n.measureText(a).width;let b=1;p>u&&(b+=Math.round(p/u));for(let t=0;t<f;t+=b){m=o+s*t,x=c+u*t;const e=x-n.measureText(m).width/2,a=d+y;n.beginPath(),n.moveTo(x,g),n.lineTo(x,g+h),n.stroke(),console.log("lime: ",e,a),n.beginPath(),n.fillText(m,e,a)}}}}else{const t=m.maxTextWidth,e=m.barCategories,o=Array.from(e.keys());let a=r/o.length;a<1&&(a=1);let i=1;t/2>a&&(i+=Math.round(t/2/a));for(var b=0;b<o.length;b+=i){x=c+(a/2+a*b);const e=o[b];let i=x-n.measureText(e).width/2;const l=d+y;n.beginPath();let s=0;t>a&&(s=-40,i=x,n.textAlign="end",n.textBaseline="middle");let r=s*(Math.PI/180);n.save(),n.translate(i,l),n.rotate(r),n.fillText(e,0,0),n.restore(),n.textAlign="start"}}n.textBaseline="alphabetic"}(t,p),function(t,e){const n=t.getCtx(),o=t.getLayout(),a=t.getStyle().label,r=e.width,h=e.height,c=e.x,g=e.y,f=o.firstDataType;let u=o.ranges.yRange;const y=a.fontSize;n.font=y+"px "+a.fontFamily;let x=c,d=g+h;const m=o.barData,p=!!m&&"hr"===m.direction;if("bar"===f&&p){const t=m.barCategories,e=Array.from(t.keys());let o=h/e.length;o<1&&(o=1);let a=1;y>o&&(a+=Math.round(y/o));for(var b=0;b<e.length;b+=a){d=g+(o/2+o*b);const t=e[b],a=x-y,i=d;n.beginPath(),n.textAlign="end",n.textBaseline="middle",n.fillText(t,a,i),n.textAlign="start",n.textBaseline="alphabetic"}}else if(u){const t=10;if(u=s(u,t),u){const e=u[0],o=l(u,t);let a=i(u,t),s=h/a;s<1&&(s=1);let f=0,m=1;y>s&&(m+=Math.round(y/s)),console.log("iterate: ",m,y,s);for(let t=0;t<a;t+=m){f=e+o*t,d=g+h-s*t;const a=x-n.measureText(f).width-y,i=d+Math.floor(y/2);n.beginPath(),n.strokeStyle="gray",n.moveTo(c+r,d),n.lineTo(c,d),n.stroke(),n.beginPath(),n.fillText(f,a,i)}}}}(t,p),g(t),function(t,e){const n=t.getCtx(),o=t.getLayout(),a=t.getStyle().label,i=n.canvas.height,l=e.width,s=e.height,r=e.x,h=e.y;let c=o.yAxis,g=o.xAxis;n.textAlign="center";const f=a.fontSize;if(n.font=f+"px "+a.fontFamily,c){let t=c.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(f,h+s/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g){let t=g.title;t&&(n.beginPath(),n.fillText(t,r+l/2,i-f/2))}}(t,p)})(t)):"pie"===n&&(e.isPieChart=!0,function(t){const e=[...t.getData()],n=t.getLayout();let o=new Map,a=0;if(e){const t=[...e],n=t.length;for(let e=0;e<n;e++){const n={...t[e]},l=n.labels,s=n.values;if(l&&s){if("pie"===n.type){const t=n.pieColors?n.pieColors:[];for(var i=0;i<l.length;i++){const e=l[i],n=s[i],r=t[i];if(o.has(e)){const t=o.get(e).value;!isNaN(t)&&(a-=t)}!isNaN(n)&&(a+=n),o.set(e,{value:n,pieColor:r})}n.type=null}}else console.error("Pie chart not defined properly!")}}const l={type:"pie",pieCategories:o,valuesLength:a};n.pieData=l;const s=n.graphPosition,r=s.width,h=s.height;let c=Math.round(.5*Math.min(r,h));c<0&&(c=0),n.arcRadius=c,e.splice(0,1,l),t.setData(e)}(t),(t=>{const e=t.getCtx(),n=t.getLayout(),o=n.graphPosition,a=o.x,i=o.y,l=o.width,s=(o.height,n.arcRadius),r=a+l/2,h=i+s;console.log(a,l/2,e.canvas.width),e.beginPath(),e.strokeStyle="white",e.arc(r,h,s,0,2*Math.PI),e.stroke(),g(t),function(t,e){const n=t.getCtx(),o=t.getData(),a=t.getLayout(),i=t.getStyle().label,l=n.canvas,s=(l.width,l.height),r=i.fontSize;if(n.font=r+"px "+i.fontFamily,a.isPieChart){const t=o[0],a=e.x,i=e.y,l=e.width,h=e.height,c=s-i,g=a+l+r;let u=i;if(t){const e=t.pieCategories;if(e){const t=Array.from(e.keys());let o=2*r;t.length*(2*r)>=h&&(o=Math.round(c/t.length));for(let a=0;a<t.length;a++){const i=f[a].code,l=t[a],s=e.get(l),h=s.pieColor||i;h&&(n.fillStyle=h);const c=s.value;if(!isNaN(c)){n.measureText(l).width;const t=g+r,e=u;n.beginPath(),n.arc(g,u,r/2,0,2*Math.PI),n.fill(),n.beginPath(),n.fillStyle="black",n.textAlign="start",n.textBaseline="middle",n.fillText(l,t,e),u+=o}}}}}}(t,o)})(t))},y=(t,e,n,o)=>{const a=t.getCtx(),i=t.getLayout();if(e&&o){console.log("Loving the Blues!");const r="hr"===o.direction,g=e.values,u=e.barColors,y=i.graphPosition,x=y.x,d=y.y,m=y.width,p=y.height,b=r?7:10,C=s(o.range,b),P=o.categoryBarMax,v=o.barCategories,M=Array.from(v.keys()),T=M.indexOf(n),S=r?p/M.length:m/M.length,w=S/(P+1),A=(r?c(t,0):h(t,0))||(r?c(t,C[0]):h(t,C[0]));if(r){const e=w;let n=d+(S*T+e/2);for(var l=0;l<g.length;l++){const o=g[l],s=i.customColorsIndex,r=f[s+l].code,h=u[l]?u[l]:r,y=c(t,o),d=A-y;A&&y&&(h&&(a.fillStyle=h),a.beginPath(),a.rect(x,n,d,e),a.fill()),n+=d}}else{const e=w;let n=x+(S*T+e/2);for(l=0;l<g.length;l++){const o=g[l],s=i.customColorsIndex,r=f[s+l].code,c=u[l]?u[l]:r,y=h(t,o),x=A-y;A&&y&&(c&&(a.fillStyle=c),a.beginPath(),a.rect(n,y,e,x),a.fill()),n+=e}}}};let x=null,d=!1,m=!1,p=null;const b=(t,e,o,a)=>{const i=t.getCtx();let l=null;if(layout.isBarChart){const e=h(t,a.y);l={x:a.x,y:e}}else l=r(t,a);i.lineWidth=o,((t,e,o,a)=>{const i=t.getCtx(),l=t.getLayout();if(!l.isBarChart){const o=l.ranges.xRange,s=o?o[0]:null,h=o?o[1]:null;if(e){if(d){const o=r(t,{x:s,y:n(s,x.x,x.y,a.x,a.y)});o&&(i.beginPath(),i.moveTo(o.x,o.y),i.lineTo(e.x,e.y)),m=!0}p=a,d=!1}else if(x=a,d=!0,m||p){const e=r(t,{x:h,y:n(h,p.x,p.y,a.x,a.y)});e&&i.lineTo(e.x,e.y),m=!1}}})(t,l,0,a),l&&("start"===e?(i.beginPath(),i.arc(l.x,l.y,o,0,2*Math.PI),i.fill(),i.closePath(),i.beginPath(),i.moveTo(l.x,l.y)):(i.lineTo(l.x,l.y),i.stroke(),i.closePath(),i.beginPath(),i.arc(l.x,l.y,o,0,2*Math.PI),i.fill(),i.closePath(),i.beginPath(),i.moveTo(l.x,l.y))),"end"===e&&(x=null,d=!1,m=!1,p=null,i.stroke(),i.closePath())},C=(t,e,n)=>{const o=t.getCtx(),a=r(t,n);a&&(o.beginPath(),o.arc(a.x,a.y,e,0,2*Math.PI),o.fill(),o.closePath())},P=(t,e,n)=>{const o=t.getCtx(),i=t.getLayout(),l=i.graphPosition,s=l.x,r=l.y,h=l.width,c=(l.height,i.arcRadius),g=s+h/2,f=r+c,u=a(e,c,{x:g,y:f}),y={x:g,y:f},x=a(n,c,{x:g,y:f}),d=Math.PI/180,m=e*d,p=n*d;console.log("deg: ",e,n),o.beginPath(),o.strokeStyle="white",o.lineWidth=4,o.arc(y.x,y.y,c,m,p),o.moveTo(u.x,u.y),o.lineTo(y.x,y.y),o.lineTo(x.x,x.y),o.stroke(),o.fill(),o.closePath()},v=(t,e,n)=>{const o=t.getCtx(),a=t.getLayout(),i=a.customColorsIndex,l=a.graphPosition,s=l.x,r=l.y,h=l.width,c=l.height;if("bars"===e){if(a.isBarChart){const e="hr"===n.direction,o=n.barCategories,l=n.categoryBarMax,f=Array.from(o.keys()),u=[],x=e?c/f.length:h/f.length;let d=e?r+x/2:s+x/2;for(var g=0;g<f.length;g++){const e=f[g],a=o.get(e);y(t,a,e,n),u.push(d),d+=x}l&&(a.customColorsIndex=i+l),a.barData.categoryMidPoints=u}}else if("pie"===e){if(a.isPieChart){const e=n.pieCategories,a=n.valuesLength;if(e){const n=Array.from(e.keys());let i=-90,l=i;for(g=0;g<n.length;g++){const s=f[g].code,r=n[g],h=e.get(r),c=h.pieColor||s;c&&(o.fillStyle=c);const u=h.value;if(!isNaN(u)){i+=u/a*360;const e=i;P(t,l,e),l=e}}}}}else if(n){const l=f[i].code;let s=n.fillColor,r=n.strokeColor;r||(r=l),s||(s=l),a.customColorsIndex=i+1,o.fillStyle=s,o.strokeStyle=r;const h=a.isBarChart?a.barData.categoryMidPoints:n.x,c=n.y;if(h)for(g=0;g<h.length;g++){const n=h[g],a=c[g],i=3,l=0===g?"start":g===h.length-1?"end":"";if(a||0===a){const o={x:n,y:a};"arcs"===e||("lines"===e?b(t,l,i,o):"points"===e&&C(t,i,o))}else o.stroke(),o.closePath()}}},M=(t,e)=>{e&&v(t,"points",e)},T=(t,e)=>{e&&v(t,"bars",e)},S=(t,e)=>{e&&v(t,"lines",e)},w=(t,e)=>{e&&v(t,"pie",e)};function A(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.canvas=document.createElement("canvas"),this.setData=function(t){this.data=[...t]},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=this.getData(),n=e[0]?e[0].type:null,o=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),o=t.getCtx(),a=t.getStyle().title,i=n.width,l=e.split(" ");let s=[],r=l[0];const h=a.fontSize;o.font=a.fontWeight+" "+h+"px "+a.fontFamily;for(let t=1;t<l.length;t++){const e=r+" "+l[t];o.measureText(e).width+h<i?r=e:(o.measureText(r).width,s.push(r),r=l[t])}return s.push(r),s}(this,o),t.isBarChart="bar"===n,t.isPieChart="pie"===n,t.customColorsIndex=0,t.firstDataType=n,this.layout={...t},function(t){const e=t.getCanvas(),n=e.width,o=e.height;t.getStyle().label;let a=n,i=o;const l=t.getStyle(),s=t.getLayout().titleLines,r=l.title.fontSize,h=l.label.fontSize,c=t.getLayout(),g=c.xAxis?c.xAxis.title:null,f=c.yAxis?c.yAxis.title:null,u=c.firstDataType,y=4*h;let x=0,d=2*r;s.length>1&&(d=r*s.length+r/2),"pie"===u?(d+=h,a*=.7,i-=d):(x=h,f&&(x+=y/2),i-=d+y/2,console.log(i),g&&g.length>0&&(i-=y/2),a-=x);const m={x,y:d,width:a,height:i};t.layout={...c,graphPosition:m}}(this)}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},o={fontFamily:"Arial"};return e<600?(n.fontSize=16,o.fontSize=12):e<1200?(n.fontSize=20,o.fontSize=14):(n.fontSize=24,o.fontSize=18),{title:n,label:o}})(this)},this.getStyle=function(){return this.style},this.updateCanvas=function(t,e){const n=this.canvas;n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTarget=function(){return this.target},this.addCanvasToTarget=function(){const t=document.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}A.prototype.plot=function(t,e){let n=700;const o=this.getTarget();o&&(n=Math.max(o.offsetWidth,o.offsetHeight));const a=n,i=.75*a;this.updateCanvas(a,i),this.setStyle(),this.setData(t),this.setLayout(e),u(this),(t=>{const e=t.getCtx(),n=t.getData();for(let o=0;o<n.length;o++){const a=n[o],i=a.type;e.lineJoin="round",i&&("line"===i?S(t,a):"scatter"===i?M(t,a):"bar"===i?T(t,a):"pie"===i&&w(t,a))}})(this),this.addCanvasToTarget()};DataVision=A})()})();