var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,a,o){return e===a?n:n+(t-e)*(o-n)/(a-e)}function a(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0!==e.length)return{min:Math.min(...e),max:Math.max(...e)}}function o(t,e){const n=.85*t,a=.65*e;return{x:.75*(t-n),y:(e-a)/2,width:n,height:a}}function i(t,e){const n=t[0],a=t[1],o=Math.abs(a-n),i=s(t,e);let l=Math.round(o/i);return n+l*i<a&&l++,l}function l(){let t=null,e=null;if(layout){const n=7,a=layout.xAxis;a&&a.range&&(t=r(a.range,n));const o=10,i=layout.yAxis;i&&i.range&&(e=r(i.range,o))}if(data&&(!t||!e)){let n=t,o=e;for(let i=0;i<data.length;i++){const l=data[i],s=l.x,r=l.y;if(!t){const t=a(s);t&&(n=n?[Math.min(n[0],t.min),Math.max(n[1],t.max)]:[t.min,t.max])}if(!e){const t=a(r);t&&(o=o?[Math.min(o[0],t.min),Math.max(o[1],t.max)]:[t.min,t.max])}}n&&(t=[Math.round(n[0]),Math.round(n[1])]),o&&(e=[Math.round(o[0]),Math.round(o[1])])}return{xRange:t,yRange:e}}function s(t,e){const n=t[0],a=t[1],o=Math.abs(a-n)/e,i=o%100,l=[1,2,5,10,20,50,100].filter((t=>t>=i))[0];return o-i+l}function r(t,e){let n=t[0],a=t[1];n>=10?n=10*Math.floor(n/10):n>=5?n=5*Math.floor(n/5):n>=2?n=2*Math.floor(n/2):n>=0?n=0:n>10?n=Math.floor(n):n<=-10&&(n=10*Math.floor(n/10));const o=s(t,e);return a=n+i(t,e)*o,[n,a]}function h(t,e){const n=t.canvas,a=o(n.width,n.height),i=layout.xAxis,s=layout.yAxis;if(i&&s){const t=l(),n=r(t.xRange,7),o=n[0],i=n[1],s=i-o,h=r(t.yRange,10),c=h[0],f=h[1],u=f-c;if(e.x>=o&&e.x<=i&&e.y>=c&&e.y<=f){const t=(e.x-o)/s,n=(e.y-c)/u;return{x:a.x+t*a.width,y:a.y+a.height-n*a.height}}}return null}t.r(e),t.d(e,{default:()=>p});const c=t=>{const e=t.canvas,n=o(e.width,e.height);t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.stroke();const a=l();!function(t,e,n){const a=e.width,o=e.height,l=e.x;let r=l,h=e.y+o;if(n){const e=10,c=n[0],f=s(n,e);let u=i(n,e),x=o/u,y=c,g=13;for(let e=0;e<u;e++){t.font=g+"px Arial";const e=r-t.measureText(y).width-g,n=h+Math.floor(g/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(l+a,h),t.lineTo(l,h),t.stroke(),console.log("label: ",y),t.beginPath(),t.fillText(y,e,n),y+=f,h-=x}}}(t,n,a.yRange),function(t,e,n){const a=e.width,o=e.height,l=e.x,r=e.y;let h=l,c=r+o;if(n){const e=7,l=n[0],f=s(n,e);let u=i(n,e),x=a/u,y=l,g=13;for(let e=0;e<u;e++){t.font=g+"px Arial";const e=h-t.measureText(y).width/2,n=c+2*g;t.beginPath(),t.moveTo(h,r),t.lineTo(h,r+o),t.stroke(),t.beginPath(),t.fillText(y,e,n),y+=f,h+=x}}}(t,n,a.xRange),function(t,e){const n=e.width,a=e.height,o=e.x,i=e.y;let l=layout.title,s=layout.yAxis,r=layout.xAxis;if(t.textAlign="center",l){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(l,o+n/2,i/2+e/2)}if(s){let e=s.title;t.beginPath();let n=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(o-36,i+a/2),t.rotate(n),t.fillText(e,0,0),t.restore()}if(r){let e=r.title;t.beginPath(),t.font="18px Arial",t.fillText(e,o+n/2,i+a+54)}}(t,n)};let f=null,u=!1,x=!1,y=null;const g=(t,e,a,o)=>{const i=l().xRange,s=i[0],r=i[1],c=h(t,o);if(c){if(u){const e=h(t,{x:s,y:n(s,f.x,f.y,o.x,o.y)});e&&(t.beginPath(),t.moveTo(e.x,e.y),t.strokeStyle="blue",t.lineWidth=a,t.lineTo(c.x,c.y)),x=!0}y=o,u=!1}else if(f=o,u=!0,x){const e=h(t,{x:r,y:n(r,y.x,y.y,o.x,o.y)});e&&(t.strokeStyle="blue",t.lineWidth=a,t.lineTo(e.x,e.y)),x=!1}c&&("start"===e?(t.beginPath(),t.moveTo(c.x,c.y)):(t.strokeStyle="blue",t.lineWidth=a,t.lineTo(c.x,c.y))),"end"===e&&(f=null,u=!0,x=!1,t.stroke(),t.closePath())},d=(t,e,n)=>{const a=h(t,n);a&&(t.beginPath(),t.fillStyle="blue",t.arc(a.x,a.y,e,0,2*Math.PI),t.fill(),t.closePath())},m=(t,e,n)=>{if(n){const o=n.x,i=n.y;for(var a=0;a<o.length;a++){const n=o[a],l=i[a],s=4,r=0===a?"start":a===o.length-1?"end":"";if(l){const a={x:n,y:l};"arcs"===e||"bars"===e||("lines"===e?g(t,r,s,a):"points"===e&&d(t,s,a))}else t.stroke(),t.closePath()}}},b=(t,e)=>{e&&m(t,"points",e)},v=(t,e)=>{e&&m(t,"lines",e)},M=t=>{for(let e=0;e<data.length;e++){const n=data[e],a=n.type;a&&("line"===a&&v(t,n,layout),"scatter"===a&&b(t,n,layout))}};function T(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}T.prototype.plot=function(t,e){const n=this.canvas;n.width=700,n.height=525;const a=n.getContext("2d");c(a),M(a),this.addCanvasToTarget()};DataVision=T})()})();