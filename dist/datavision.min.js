var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,o,i){return e===o?n:n+(t-e)*(i-n)/(o-e)}function o(t,e){const n=.85*t,o=.65*e;return{x:.75*(t-n),y:(e-o)/2,width:n,height:o}}function i(t,e){const n=t[0],o=t[1],i=Math.abs(o-n),a=l(t,e);let s=Math.round(i/a);return n+s*a<o&&s++,s}function a(){let t=null,e=null;if(layout){const n=7,o=layout.xAxis;o&&o.range&&(t=s(o.range,n));const i=10,a=layout.yAxis;a&&a.range&&(e=s(a.range,i))}return{xRange:t,yRange:e}}function l(t,e){const n=t[0],o=t[1],i=Math.abs(o-n)/e,a=i%100,l=[1,2,5,10,20,50,100].filter((t=>t>=a))[0];return i-a+l}function s(t,e){let n=t[0],o=t[1];n=n>=10?10*Math.floor(n/10):n>=5?5*Math.floor(n/5):n>=2?2*Math.floor(n/2):0;const a=l(t,e);return o=n+i(t,e)*a,[n,o]}function r(t,e){const n=t.canvas,i=o(n.width,n.height),a=layout.xAxis,l=layout.yAxis;if(a&&l){const t=s(a.range,7),n=t[0],o=t[1],r=o-n,h=s(l.range,10),c=h[0],y=h[1],u=y-c;if(e.x>=n&&e.x<=o&&e.y>=c&&e.y<=y){const t=(e.x-n)/r,o=(e.y-c)/u;return{x:i.x+t*i.width,y:i.y+i.height-o*i.height}}}return null}t.r(e),t.d(e,{default:()=>P});const h=t=>{const e=t.canvas,n=o(e.width,e.height);t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.stroke();const s=a();!function(t,e,n){const o=e.width,a=e.height,s=e.x;let r=s,h=e.y+a;if(n){const e=10,c=n[0],y=l(n,e);let u=i(n,e),f=a/u,g=c,x=13;for(let e=0;e<u;e++){t.font=x+"px Arial";const e=r-t.measureText(g).width-x,n=h+Math.floor(x/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(s+o,h),t.lineTo(s,h),t.stroke(),t.beginPath(),t.fillText(g,e,n),g+=y,h-=f}}}(t,n,s.yRange),function(t,e,n){const o=e.width,a=e.height,s=e.x,r=e.y;let h=s,c=r+a;if(n){const e=7,s=n[0],y=l(n,e);let u=i(n,e),f=o/u,g=s,x=13;for(let e=0;e<u;e++){t.font=x+"px Arial";const e=h-t.measureText(g).width/2,n=c+2*x;t.beginPath(),t.moveTo(h,r),t.lineTo(h,r+a),t.stroke(),t.beginPath(),t.fillText(g,e,n),g+=y,h+=f}}}(t,n,s.xRange),function(t,e){const n=e.width,o=e.height,i=e.x,a=e.y;let l=layout.title,s=layout.yAxis,r=layout.xAxis;if(t.textAlign="center",l){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(l,i+n/2,a/2+e/2)}if(s){let e=s.title;t.beginPath();let n=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(i-36,a+o/2),t.rotate(n),t.fillText(e,0,0),t.restore()}if(r){let e=r.title;t.beginPath(),t.font="18px Arial",t.fillText(e,i+n/2,a+o+54)}}(t,n)};let c=null,y=!1,u=!1,f=null;const g=(t,e,o,i)=>{const l=a().xRange,s=l[0],h=l[1],g=r(t,i);if(g){if(y){const e=r(t,{x:s,y:n(s,c.x,c.y,i.x,i.y)});t.beginPath(),t.moveTo(e.x,e.y),t.strokeStyle="blue",t.lineWidth=o,t.lineTo(g.x,g.y),u=!0}f=i,y=!1}else if(c=i,y=!0,u){const e=r(t,{x:h,y:n(h,f.x,f.y,i.x,i.y)});t.strokeStyle="blue",t.lineWidth=o,t.lineTo(e.x,e.y),u=!1}g&&("start"===e?(t.beginPath(),t.moveTo(g.x,g.y)):(console.log("wowo"),t.strokeStyle="blue",t.lineWidth=o,t.lineTo(g.x,g.y))),"end"===e&&(c=null,y=!0,u=!1,t.stroke(),t.closePath())},x=(t,e,n)=>{const o=r(t,n);o&&(t.beginPath(),t.fillStyle="blue",t.arc(o.x,o.y,e,0,2*Math.PI),t.fill(),t.closePath())},d=(t,e,n)=>{if(n){const i=n.x,a=n.y;for(var o=0;o<i.length;o++){const n=i[o],l=a[o],s=4,r=0===o?"start":o===i.length-1?"end":"";if(l){const o={x:n,y:l};"arcs"===e||"bars"===e||("lines"===e?g(t,r,s,o):"points"===e&&x(t,s,o))}else t.stroke(),t.closePath()}}},b=(t,e)=>{e&&d(t,"points",e)},v=(t,e)=>{e&&d(t,"lines",e)},T=t=>{for(let e=0;e<data.length;e++){const n=data[e],o=n.type;o&&("line"===o&&v(t,n,layout),"scatter"===o&&b(t,n,layout))}};function p(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}p.prototype.plot=function(t,e){const n=this.canvas;n.width=700,n.height=525;const o=n.getContext("2d");h(o),T(o),this.addCanvasToTarget()};DataVision=p})()})();