/*! For license information please see datavision.min.js.LICENSE.txt */
var DataVision;(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};(()=>{function n(t,e,n,s,a){return e===s?n:n+(t-e)*(a-n)/(s-e)}function s(t,e){return"avg"===t?function(t){return t.reduce(((t,e)=>t+e),0)/t.length}(e):function(t){return t.reduce(((t,e)=>t+e),0)}(e)}function a(t){return t?t.every((t=>"number"==typeof t)):null}function i(t,e){return t>=0&&e<0||t<0&&e>=0}function o(t){return parseInt(t)?Number.isInteger(t)?t:t.toFixed(1):t}function l(t,e,n={x:0,y:0}){const s=Math.PI/180*t;return{x:n.x+e*Math.cos(s),y:n.y+e*Math.sin(s)}}function r(t,e){const n=[1,2,4,5,10],s=Math.pow(10,Math.floor(Math.log10(t)));return e?(n.reverse(),n.find((e=>e*s<=t))*s):n.find((e=>e*s>=t))*s}function h(t){if(a(t)){const e=function(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}(t);if(e)return[e.min,e.max]}return[null,null]}function c(t,e,n,s,a){return{x:u(t,e,a),y:g(t,n,s)}}function u(t,e,n){const s=t.getLayout(),a=s.graphPosition,i=a.x,o=a.width;!n&&(n="x1");const l=s.axisData.labels[n];if(l){const n=l.isAllNumbers,s=l.values;if(n)e=function(t,e,n){const s=t.getLayout(),a=s.graphPosition,i=a.x,o=a.width;!n&&(n="x1");const l=s.axisData.labels[n];if(l){const t=l.range;if(t){const n=t[0];return i+(e-n)/(t[1]-n)*o}}return e}(t,e);else{const t=o/s.length,n=t/2,a=s.indexOf(e);a>=0&&(e=i+(t*a+n))}}return e}function g(t,e,n){const s=t.getLayout(),a=s.graphPosition,i=a.y,o=a.height;!n&&(n="y1");const l=s.axisData.values[n];if(l){const s=l.isAllNumbers,a=l.values;if(s)e=function(t,e,n,s){const a=t.getLayout(),i=a.graphPosition,o=i.y,l=i.height;!n&&(n="y1");const r=a.axisData.values[n];if(r){const t=r.range;if(t){const n=t[0];return o+l-(e-n)/(t[1]-n)*l}}return e}(t,e,n);else{const t=o/a.length,n=t/2,s=a.indexOf(e);s>=0&&(e=i+o-(t*s+n))}}return e}function f(t,e){let n=Math.round(.5*Math.min(t,e));return n<0&&(n=0),n}t(e);const x=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}];function d(t){if(!t)return{count:0,range:t};let e=10;const n=t[0],s=t[1];let a=n,i=s,o=e,l=0;if(!isNaN(n)&&!isNaN(s))if(n<=0&&s>=0){e=Math.round(e/2);const t=s-0;l=r(t/Math.max(e-1,1));const h=Math.ceil(t/l),c=Math.ceil(Math.abs(n)/l);o=h+c,a=-c*l,i=l*h}else if(n<=0)l=r((s-n)/Math.max(e-1,1)),i=-r(Math.abs(i),!0),o=Math.ceil(Math.abs(i-n)/l),a=-(Math.abs(i)+l*o);else if(n>0){a=r(a,!0),l=r((i-a)/Math.max(e-1,1));const t=Math.floor((n-a)/l);a+=a+l<n?t*l:0;const s=i-a;o=Math.ceil(s/l),i=a+l*o}return{count:o,range:[a,i],interval:l}}function y(t,e,n){if(n.length>0)for(let t=0;t<n.length;t++){const s=n[t];e.push(s)}else for(var s=0;s<t.length;s++)e.push(s)}function m(t,e,n){const s=e||{},a=x[n].code;return!s.color&&(s.color=a),"line"===t&&Array.isArray(s.color)&&(s.color=a),!s.size&&(s.size=3),s}function v(t,e,n){return t._eventHandlers&&t._eventHandlers[e]&&t._eventHandlers[e].includes(n)}const p=t=>{!function(t){const e=t.getCtx(),n=t.getLayout(),i=[...t.getData()],l=t.getStyle().label,r=l.fontSize;e.font=r+"px "+l.fontFamily;let c=1,u=0;const g=[],f=[];let v=0;class p{constructor(){this.values=[],this.range=null,this.maxWidth=0,this.tickData=null,this.isAllNumbers=!1}}const b={x1:new p},C={y1:new p,y2:new p},A=["line","scatter","bar"];let P=!1,w=!1,T=null,M=0,S=0;if(i){const t=[...i],n=t.length,l={labels:[],values:[]},r={type:"bar"},h=new Map,d=[],p=[];let D=!1;for(let i=0;i<n;i++){const n={...t[i]},N=n.yAxis?n.yAxis:"y1",L=n.xAxis?n.xAxis:"x1",F="y2"===N?C.y2:C.y1,I=b[L],k=n.name,z=n.labels?n.labels:[],W=n.values?n.values:[],B=n.type,E=n.design,O=n.operation;0===z.length&&y(W,z,l.labels),0===W.length&&y(z,W,l.values),l.labels=[...z],l.values=[...W];let R=0,G=0;const H=[],_=[],Y=[],j={...n},V=[],q=[],J=a(z),X=a(W);if(A.includes(B)){let t="";const a=[],i=z.length>0?z.length:W.length;let l="",u="";for(let g=0;g<i;g++){const i=z[g],f=X?Math.round(W[g]):W[g]?W[g]:"";let d=i.length>u.length?e.measureText(o(i)).width:null;const y=X&&f<0&&f>10?-10:f;let m=f.length>l.length?e.measureText(o(y)).width:0;if("bar"===B){const e="hr"===n.direction,s=x[v].code,o=e?i:f,l=e?f:i,u=e?X:J;r.labelIsAllNumbers=u;let d=[[o]],y=[[o>=0?o:0,o<0?o:0]],m=[[E?Array.isArray(E.color)?g<E.color.length?E.color[g]:s:E.color:s]];if(h.has(l)){const t=h.get(l),n=t.values,s=n[n.length-1],i=t.valuesCount,r=i[i.length-1],c=t.colors,u=c[c.length-1];if(a.includes(l)){if(s.push(...d[0]),u.push(...m[0]),X||e&&J){const t=(o>=0?r[0]:r[1])+o;o>=0&&(i[i.length-1][0]=t),o<0&&(i[i.length-1][1]=t),e?I.values.push(t):F.values.push(t)}d=[...n],m=[...c],y=i}else d=[...n,...d],y=[...i,...y],m=[...c,...m]}(u||l.length>0)&&(t=m.length>0?m[0]:"",d.length>c&&(c=d.length),h.set(l,{values:d,valuesCount:y,colors:m,xAxis:L,yAxis:N,operation:O}),"hr"===n.direction&&(T="hr"),D=!0,a.push(l))}else if(H.includes(i)&&X){const t=H.indexOf(i),n=Y[t];if(n&&f){n.push(f);const a=s(O,n);m=e.measureText(o(a)).width,_[t]=a,F.values.push(a)}}else if(_.includes(f)&&!X&&J){const t=_.indexOf(f),n=Y[t];if(n&&i){n.push(i);const a=s(O,n);d=e.measureText(o(a)).width,H[t]=a,I.values.push(a)}}else H.push(i),_.push(f),X?Y.push([f]):J&&Y.push([i]);d>R&&(R=d,u=i),m>G&&(G=m,l=f),(J||i.length>0)&&I.values.push(i),(X||f.length>0)&&F.values.push(f)}I.maxWidth=R>I.maxWidth?R:I.maxWidth,F.maxWidth=G>F.maxWidth?G:F.maxWidth,F.isAllNumbers=X,I.isAllNumbers=J,P=!0;const f=k||"Dataset "+v,y=e.measureText(f).width;"bar"===B?(d.push(f),p.push(t)):(n.name=f,n.values=_,n.labels=H,n.design=m(B,E,v),g.push(n)),y>M&&(M=y),S+=1,v++}else if("pie"===B){for(let t=0;t<W.length;t++){const n=J?Math.round(z[t]):z[t],s=X?Math.round(W[t]):W[t];if(s>=0&&n){const t=e.measureText(n).width;V.includes(n)?q[V.indexOf(n)].push(s):(V.push(n),q.push([s])),t>u&&(u=t)}}w=!0,j.labels=V,j.values=q,j.type="pie",f.push(j),u>M&&(M=u),S+=V.length}I&&(I.values=[...new Set(I.values)]),F&&(F.values=[...new Set(F.values)])}D&&(r.names=d,r.colors=p,r.categories=h,r.maxBarPerCategory=c,r.direction=T,g.unshift(r))}const D=(t,s)=>{for(let i in t){const l=t[i],r=l.values,c=l.maxWidth,u=a(r);let g=h(r);if("values"===s){if("y2"===i){if(n.y2Axis){const t=n.y2Axis.range;!t||(g=t)}}else if(n.yAxis){const t=n.yAxis.range;!t||(g=t)}}else if(n.xAxis){const t=n.xAxis.range;!t||(g=t)}const f=d(g),x=f.range,y=o(x[0]),m=o(x[1]),v=y&&!isNaN(y)?e.measureText(y).width:0,p=m&&!isNaN(y)?e.measureText(m).width:0,b=Math.max(c,Math.max(v,p));l.maxWidth=b,l.range=f.range,l.tickData=f,l.isAllNumbers=u}},N=[...g,...f];D(C,"values"),D(b),n.datasetNameData={isDatasetName:S>1,maxNameWidth:M,total:S},n.axisData={labels:b,values:C,direction:T},n.hasAxisData=P,n.hasPieData=w,t.setData(N)}(t),function(t){t.getCtx();const e=t.getCanvas(),n=e.width,s=e.height,a=t.getLayout(),i=t.getStyle(),o=i.title.fontSize,l=i.label.fontSize,r=t.getLayout().titleLines;let h=0;r.length>0&&(h=(r.length+1)*o);const c=a.axisData,u=c.labels,g=c.values,f=2*l;let x=.15*n,d=.15*n;const y=g.y1.maxWidth;y<x&&(x=y+f),a.yAxis&&a.yAxis.title&&(x+=f);const m=g.y2.maxWidth;m<d&&(d=0===m?0:m+f),a.y2Axis&&a.y2Axis.title&&m>0&&(d+=2*l);let v=.15*n;const p=a.datasetNameData,b=p.isDatasetName,C=p.maxNameWidth;v=b?C<v?C+f:.2*n:0;let A=f+l,P=0;const w=n-(x+d+v),T=u.x1,M=T.maxWidth,S=w/T.values.length;P=T.isAllNumbers?M:0,M>S&&M>f&&(A+=.7*M),a.xAxis&&a.xAxis.title&&(A+=f);const D={x,y:h,width:n-(x+d+v+P),height:s-(h+A),yAxisRight:d};t.layout={...a,graphPosition:D}}(t);const e=t.getLayout();(t=>{const e=t.getCtx(),n=t.getLayout(),s=t.getStyle().title,a=t.getCanvas().width,i=n.graphPosition.y;let o=n.titleLines;if(e.textAlign="center",o){const t=s.fontSize;e.font="bold "+t+"px "+s.fontFamily;let n=a/2,l=i/2+t/2;o.length>1&&(l=t);for(let s=0;s<o.length;s++){const a=o[s];e.beginPath(),e.fillText(a,n,l),e.closePath(),l+=t}}})(t),(t=>{const e=t.getCtx(),n=t.getLayout(),s=t.getStyle().label,a=e.canvas,i=a.width,o=a.height,l=s.fontSize;e.font=l+"px "+s.fontFamily;const r=n.graphPosition,h=r.x,c=r.y,u=r.width,g=r.height,f=.2*i,d=o-c,y=h+u+r.yAxisRight+l,m=n.datasetNameData.total,v=t.getData();let p=!1;if(1===v.length){const t=v[0];"bar"===t.type&&t.names.length>1&&(p=!0)}if(v.length>1||!n.hasAxisData||p){let t=c+l/2;for(let n=0;n<v.length;n++){const s=v[n];if(s){let n=s.labels;const a=s.type;let i=s.colors;if(["line","scatter","bar"].includes(a))if("bar"===a)n=s.names,i=s.colors;else{n=[s.name];const t=s.design.color;i=Array.isArray(t)?t:[t]}if(n){let s=2*l;m*(2*l)>=g+l/2&&(s=Math.round(d/m));for(let o=0;o<n.length;o++){const r=x[o].code;let h=n[o];const c=e.measureText(h).width;if(c+s>f&&h.length>3){const t=c/h.length;b=h,C=Math.floor((f-2*l)/t),h=b.length>C?b.substr(0,C)+"...":b}const u=(i?"bar"===a?i[o]?i[o][0]:null:i[o]:null)||r;u&&(e.fillStyle=u);const g=y+l,d=t;e.beginPath(),e.arc(y,t,l/2,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="black",e.textAlign="start",e.textBaseline="middle",e.fillText(h,g,d),t+=s}}}}}var b,C})(t),e.hasAxisData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition;e.beginPath(),e.rect(n.x+1,n.y,n.width-2,n.height),e.stroke(),function(t,e){const n=t.getCtx(),s=t.getLayout(),a=t.getStyle().label,i=e.width,l=e.height,r=e.x,h=e.y,c=a.fontSize;n.font=c+"px "+a.fontFamily,n.textBaseline="hanging";let u=0,g=h+l;const f=s.axisData.labels;for(let t in f){const e=f[t],s=e.values;if(e.isAllNumbers){const t=e.tickData;s.sort(((t,e)=>t-e));let a=e.range;if(a){const e=a[0],s=a[1],f=t.interval;let x=t.count,d=i/x;d<1&&(d=1);let y=0;const m=n.measureText(s).width;let v=1;m>d&&(v+=Math.round(m/d)),n.textAlign="center";for(let t=0;t<=x;t+=v){y=o(e+f*t),u=r+d*t,n.measureText(y).width;const s=u,a=g+c;n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5",n.moveTo(u,h),n.lineTo(u,h+l+c/2),n.stroke(),n.beginPath(),n.fillText(y,s,a)}}}else{const t=e.maxWidth;let a=i/s.length;a<1&&(a=1);let o=1;t/2>a&&(o+=Math.round(t/2/a));for(var x=0;x<s.length;x+=o){u=r+(a/2+a*x);const e=s[x];let i=u;const o=g+c;n.beginPath(),n.textAlign="center";let l=0;t>a&&(l=-40,i=u,n.textAlign="end",n.textBaseline="middle");let h=l*(Math.PI/180);n.save(),n.translate(i,o),n.rotate(h),n.fillText(e,0,0),n.restore()}}}n.textAlign="start",n.textBaseline="alphabetic"}(t,n),function(t,e){const n=t.getCtx(),s=t.getLayout(),a=t.getStyle().label,i=e.width,l=e.height,r=e.x,h=e.y,c=a.fontSize;n.font=c+"px "+a.fontFamily;let u=r,g=h+l;const f=s.axisData,x=(f.direction,f.values);for(let t in x){const e=x[t],s=e.values;if(e.isAllNumbers){const a=e.tickData;s.sort(((t,e)=>t-e));let f=e.range;if(f){const e=f[0],s=a.interval;let x=a.count,d=l/x;d<1&&(d=1);let y=0,m=1;c>d&&(m+=Math.round(c/d));for(let a=0;a<=x;a+=m){y=o(e+s*a),g=h+l-d*a;const f=n.measureText(y).width,x="y2"===t?u+i+c:u-f-c,m=g+Math.floor(c/2);n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5","y2"===t?(n.moveTo(r+i,g),n.lineTo(r+i+c/2,g)):(n.moveTo(r+i,g),n.lineTo(r-c/2,g)),n.stroke(),n.beginPath(),n.fillText(y,x,m)}}}else{let e=l/s.length;e<1&&(e=1);let a=1;c>e&&(a+=Math.round(c/e));for(var d=0;d<s.length;d+=a){g=h+l-(e/2+e*d);const a=s[d],o="y2"===t?u+i+c:u-c,r=g;n.beginPath(),n.textAlign="y2"===t?"start":"end",n.textBaseline="middle",n.fillText(a,o,r),n.textAlign="start",n.textBaseline="alphabetic"}}}}(t,n),function(t,e){const n=t.getCtx(),s=t.getLayout(),a=t.getStyle().label,i=n.canvas.height,o=e.width,l=e.height,r=e.x,h=e.y,c=e.yAxisRight;let u=s.yAxis,g=s.y2Axis,f=s.xAxis;n.textAlign="center";const x=a.fontSize;if(n.font=x+"px "+a.fontFamily,u){let t=u.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g){let t=g.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(r+o+c-x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(f){let t=f.title;t&&(n.beginPath(),n.fillText(t,r+o/2,i-x/2))}}(t,n)})(t),e.hasPieData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition,s=n.x,a=n.y,i=n.width,o=f(i,n.height),l=s+i/2,r=a+o;e.beginPath(),e.arc(l,r,o,0,2*Math.PI),e.stroke()})(t)};function b(t,e,n,a){if(!n)return{values:t,colors:e};const i=[],o=[],l=[],r=[];for(let n=0;n<t.length;n++){const s=t[n],a=e[n];s>=0?(i.push(s),o.push(a)):(l.push(s),r.push(a))}return{values:[s(a,i),s(a,l)],colors:[...o,...r]}}const C=(t,e,n,s,a)=>{const o=t.getCtx(),l=t.getLayout(),r=e.operation;if(e&&s){const c="hr"===s.direction,f=e.values,d=e.colors,y=l.axisData,m=y.values[e.yAxis],v=y.labels[e.xAxis],p=m.isAllNumbers,C=v.isAllNumbers,A=l.graphPosition,P=A.x,w=A.y,T=A.height;let M=c?v.range:m.range;const S=M[0]<0?0:M[0],D=M[1],N=(M?c?u(t,S):g(t,S):null)||(c?P:w+T);if(c){const e=a;let s=g(t,n)+e/2;for(var h=0;h<f.length;h++){const n=b(f[h],d[h],C,r),a=n.values,c=n.colors;let g=N,y=0;for(let n=0;n<a.length;n++){const r=a[n],f=C?r+y:r,d=f>D?D:f,m=l.customColorsIndex,v=x[m+h].code,p=c&&c[n]?c[n]:v,b=u(t,d);if(b>=P){const t=b-g;g&&b&&(p&&(o.fillStyle=p),o.beginPath(),o.rect(g,s-e,t,e),o.fill())}if(g=g<b?N:b,C){const t=a[n+1],e=!!t&&i(d,t);g=e?N:b,e?y=0:y+=r}}s-=e}}else{const e=a;let s=u(t,n)-e/2;for(h=0;h<f.length;h++){const n=b(f[h],d[h],p,r),a=n.values,c=n.colors;let u=N,y=0;for(let n=0;n<a.length;n++){const r=a[n],f=p?r+y:r;let d=f>D?D:f;const m=l.customColorsIndex,v=x[m+h].code,b=c&&c[n]?c[n]:v,C=g(t,d),A=u-C;if(w+T>=C&&u&&C&&(b&&(o.fillStyle=b),o.beginPath(),o.rect(s,C,e,A),o.fill()),p){const t=a[n+1],e=!!t&&i(d,t);u=e?N:C,e?y=0:y+=r}}s+=e}}}};let A=null,P=!1,w=!1,T=null;const M=(t,e,s,a,i)=>{const o=e.xAxis?e.xAxis:"x1",l=t.getCtx();l.lineWidth=a,l.lineCap="round",((t,e,s)=>{const a=t.getCtx(),i=t.getLayout();if(!i.isBarChart){const t=i.axisData.labels[s].range,o=t?t[0]:null,l=t?t[1]:null;if(e){if(P){const t={x:o,y:n(o,A.x,A.y,e.x,e.y)};newPos&&(a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(e.x,e.y)),w=!0}T=e,P=!1}else if(A=e,P=!0,w||T){const t={x:l,y:n(l,T.x,T.y,e.x,e.y)};newPos&&a.lineTo(t.x,t.y),w=!1}}})(t,i,o),i&&("start"===s?(l.beginPath(),l.moveTo(i.x,i.y)):(l.lineTo(i.x,i.y),l.stroke(),l.closePath(),l.beginPath(),l.moveTo(i.x,i.y))),"end"===s&&(A=null,P=!1,w=!1,T=null,l.stroke(),l.closePath())},S=(t,e,n)=>{const s=t.getCtx();n&&(s.beginPath(),s.arc(n.x,n.y,e,0,2*Math.PI),s.stroke(),s.fill(),s.closePath())},D=(t,e,n,s)=>{const a=t.getLayout().graphPosition,i=a.x,o=a.y,r=a.width,h=f(r,a.height),c=i+r/2,u=o+h,g=l(n,h,{x:c,y:u}),x={x:c,y:u},d=l(s,h,{x:c,y:u}),y=Math.PI/180,m=n*y,v=s*y;e.beginPath(),e.strokeStyle="white",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.arc(x.x,x.y,h,m,v),e.moveTo(g.x,g.y),e.lineTo(x.x,x.y),e.lineTo(d.x,d.y),e.stroke(),e.fill(),e.closePath()},N=(t,e,n)=>{const a=t.getCtx(),i=t.getLayout(),o=i.customColorsIndex;if("bars"===e){const e=n.categories,s=n.maxBarPerCategory,a=Array.from(e.keys()),r="hr"===n.direction,h=i.graphPosition,c=r?h.height:h.width;let u=c/n.categories.size/(s+1);if(n.labelIsAllNumbers){const t=i.axisData,e=(r?t.values.y1:t.labels.x1).range,n=e[0],s=e[1]-n,o=[];for(let t=0;t<a.length;t++){const e=parseInt(a[t]),n=parseInt(a[t+1]);n&&o.push(Math.abs(n-e))}const l=Math.min(...o);l&&(u=l/s*c)}for(var l=0;l<a.length;l++){const s=a[l],i=e.get(s);C(t,i,s,n,u)}s&&(i.customColorsIndex=o+s)}else if("pie"===e){const e=t.getTempCanvas();e.width=a.canvas.width,e.height=a.canvas.height;const o=e.getContext("2d"),r=i.graphPosition,h=r.x,c=r.y,u=r.width,g=r.height,f=Math.min(u,g)/2,d=n.values?n.values:[],y=n.colors,m=n.operation;let v=0;const p=[];if(d.forEach((t=>{console.log("Bucket: ",t);const e=s(m,t);p.push(e),v+=e})),p){let e=-90,n=e;for(l=0;l<p.length;l++){const s=x[l].code,a=(y?y[l]:null)||s;a&&(o.fillStyle=a);const i=p[l];if(!isNaN(i)){e+=i/v*360;const s=e;D(t,o,n,s),n=s}}}const b=u/2,C=g/2,A=(n.hole?n.hole:0)*f;o.globalCompositeOperation="destination-out",o.globalAlpha=1,o.beginPath(),o.arc(h+b,c+C,A,0,2*Math.PI),o.fill(),o.globalCompositeOperation="source-over",a.drawImage(e,0,0)}else if(n){const s=n.yAxis?n.yAxis:"y1",i=n.xAxis?n.xAxis:"x1",o="hr"===n.direction,r=n.design.color,h=n.design.size;a.fillStyle=r,a.strokeStyle=r;const u=o?n.values:n.labels,g=o?n.labels:n.values?n.values:[];if(u)for(l=0;l<u.length;l++){let o=u[l],f=g[l];const x=Array.isArray(r)?r[l]:r,d=Array.isArray(h)?h[l]:h,y=0===l?"start":l===u.length-1?"end":"";if(f||0===f){const l=c(t,o,f,s,i);if("arcs"===e);else if("lines"===e)M(t,n,y,d,l);else if("points"===e){const e=n.design.line,s=e&&e.color?e.color:x,i=e&&e.size?e.size:0;a.fillStyle=x,a.strokeStyle=s,a.lineWidth=i,S(t,d,l)}}else a.stroke(),a.closePath()}}},L=(t,e)=>{e&&N(t,"points",e)},F=(t,e)=>{e&&N(t,"bars",e)},I=(t,e)=>{e&&N(t,"lines",e)},k=(t,e)=>{e&&N(t,"pie",e)};function z(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.targetCanvas=document.createElement("canvas"),this.canvas=document.createElement("canvas"),this.canvasCopy=document.createElement("canvas"),this.tempCanvas=document.createElement("canvas"),this.setData=function(t){this.data=t},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),s=t.getCtx(),a=t.getStyle().title,i=n.width,o=e.split(" ");let l=[],r=o[0];const h=a.fontSize;s.font=a.fontWeight+" "+h+"px "+a.fontFamily;for(let t=1;t<o.length;t++){const e=r+" "+o[t];s.measureText(e).width+h<i?r=e:(s.measureText(r).width,l.push(r),r=o[t])}return l.push(r),l}(this,e),t.customColorsIndex=0,this.layout={...t}}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},s={fontFamily:"Arial"};return e<600?(n.fontSize=16,s.fontSize=12):e<1200?(n.fontSize=20,s.fontSize=14):(n.fontSize=24,s.fontSize=18),{title:n,label:s}})(this)},this.getStyle=function(){return this.style},this.setCanvas=function(t,e){const n=this.getCanvas();n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.updateCanvasCopy=function(){const t=this.getCanvas(),e=this.getCanvasCopy();e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),this.canvasCopy=e},this.getCanvasCopy=function(){return this.canvasCopy},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTempCanvas=function(){return this.tempCanvas},this.getTarget=function(){return this.target},this.getTargetCanvas=function(){return this.targetCanvas},this.updateTargetCanvas=function(){const t=this.getCanvasCopy(),e=this.getTargetCanvas(),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0)},this.addCanvasToTarget=function(){const t=this.getTargetCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0);const e=this;var n,s,a,i;s="mousemove",a=function(t){const n=function(t){if(t){const e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}return null}(t);((t,e)=>{if(t&&e){t.getCtx();const e=t.getLayout();t.updateTargetCanvas(),e.firstDataType}})(e,n)},i="touchend",(n=t)&&"object"==typeof n&&(n.addEventListener?(v(n,s,a)||n.addEventListener(s,a,!1),i&&!v(n,i,a)&&n.addEventListener(i,a,!1)):n.attachEvent&&(v(n,s,a)||n.attachEvent("on"+s,a),i&&!v(n,i,a)&&n.attachEvent("on"+i,a))),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}z.prototype.plot=function(t,e){const n=function(t,e){const n=t.getTarget(),s=e.width,a=e.height;let i=0,o=0;return n&&(i=Math.max(n.offsetWidth,n.offsetHeight),o=.6*i),(s||a)&&(i=s,o=a),{width:i,height:o}}(this,e);this.setCanvas(n.width,n.height),this.setStyle(),this.setData(t),this.setLayout(e),p(this),(t=>{const e=t.getCtx(),n=t.getData();for(let s=0;s<n.length;s++){const a=n[s],i=a.type;e.lineJoin="round",i&&("line"===i?I(t,a):"scatter"===i?L(t,a):"bar"===i?F(t,a):"pie"===i&&k(t,a))}})(this),this.updateCanvasCopy(),this.addCanvasToTarget()},DataVision=z})()})();