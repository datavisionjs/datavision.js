var DataVision;(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};(()=>{function n(t,e,n,a,s){return e===a?n:n+(t-e)*(s-n)/(a-e)}function a(t){return t.every((t=>"number"==typeof t))}function s(t,e){return t>=0&&e<0||t<0&&e>=0}function i(t,e,n={x:0,y:0}){const a=Math.PI/180*t;return{x:n.x+e*Math.cos(a),y:n.y+e*Math.sin(a)}}function o(t,e){const n=[1,2,5,10],a=Math.pow(10,Math.floor(Math.log10(t)));return e?(n.reverse(),n.find((e=>e*a<=t))*a):n.find((e=>e*a>=t))*a}function l(t){if(a(t)){const e=function(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}(t);if(e)return[e.min,e.max]}return[null,null]}function r(t,e,n){return{x:h(t,e),y:c(t,n)}}function h(t,e){const n=t.getLayout(),a=n.graphPosition,s=a.x,i=a.width,o=n.axisData,l=o.labelIsAllNumbers,r=o.labels;if(l)e=function(t,e){const n=t.getLayout(),a="hr"===n.axisData.direction,s=n.graphPosition,i=s.x,o=s.width,l=n.ranges,r=a?l.valueRange:l.labelRange;if(r){const t=r[0];return i+(e-t)/(r[1]-t)*o}return e}(t,e);else{const t=i/r.length,n=t/2,a=r.indexOf(e);a>=0&&(e=s+(t*a+n))}return e}function c(t,e){const n=t.getLayout(),a=n.graphPosition,s=a.y,i=a.height,o=n.axisData,l=o.valueIsAllNumbers,r=o.values;if(l)e=function(t,e){const n=t.getLayout(),a="hr"===n.axisData.direction,s=n.graphPosition,i=s.y,o=s.height,l=n.ranges,r=a?l.labelRange:l.valueRange;if(r){const t=r[0];return i+o-(e-t)/(r[1]-t)*o}return e}(t,e);else{const t=i/r.length,n=t/2,a=r.indexOf(e);a>=0&&(e=s+i-(t*a+n))}return e}function g(t,e){let n=Math.round(.5*Math.min(t,e));return n<0&&(n=0),n}t(e);const u=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}];function f(t){if(!t)return{count:0,range:t};let e=10;const n=t[0],a=t[1];let s=n,i=a,l=e,r=0;if(!isNaN(n)&&!isNaN(a))if(n<=0&&a>=0){e=Math.round(e/2);const t=a-0;r=o(t/Math.max(e-1,1));const h=Math.ceil(t/r),c=Math.ceil(Math.abs(n)/r);l=h+c,s=-c*r,i=r*h}else if(n<=0)r=o((a-n)/Math.max(e-1,1)),i=-o(Math.abs(i),!0),l=Math.ceil(Math.abs(i-n)/r),s=-(Math.abs(i)+r*l);else if(n>0){s=o(s,!0);const t=i-s,n=t<1e3?e:Math.round(e/2);r=o(t/Math.max(n-1,1)),l=Math.ceil(t/r),i=s+r*l}return{count:l,range:[s,i],interval:r}}function d(t,e){const n=t||{};return!n.color&&(n.color=u[e].code),!n.size&&(n.size=3),n}function x(t,e,n){return t._eventHandlers&&t._eventHandlers[e]&&t._eventHandlers[e].includes(n)}const y=t=>{!function(t){const e=t.getCtx(),n=t.getLayout(),s=[...t.getData()],i=t.getStyle().label,o=i.fontSize;e.font=o+"px "+i.fontFamily;let r=1,h=0,c=0,g=0;const x=[],y=[];let m=0;const v=[],b=[],p=[],C=[],P=["line","scatter","bar"];let w=!1,T=!1,A=null,M=0,D=0;if(s){const t=[...s],n=t.length,i={type:"bar"},o=new Map,l=[];let f=!1;for(let s=0;s<n;s++){const n={...t[s]},i=n.name,S=n.labels,L=n.values,F=n.type,I=n.design,N={...n},k=[],z=[];let B=0;const E=a(S),R=a(L);if(P.includes(F)){const t=[];for(let a=0;a<S.length;a++){const s=E?Math.round(S[a]):S[a],i=R?Math.round(L[a]):L[a],l=e.measureText(s).width,g=R&&i<0&&i>10?-10:i,d=e.measureText(g).width;if("bar"===F){const e=u[m].code;let l=[[i]],h=[[i>=0?i:0,i<0?i:0]],c=[[I?Array.isArray(I.color)?a<I.color.length?I.color[a]:e:I.color:e]];if(o.has(s)){const e=o.get(s),n=e.values,a=n[n.length-1],r=e.valuesCount,g=r[r.length-1],u=e.colors,f=u[u.length-1];if(t.includes(s)){if(a.push(...l[0]),f.push(...c[0]),R){const t=(i>=0?g[0]:g[1])+i;console.log("lastie: ",g,i),i>=0&&(r[r.length-1][0]=t),i<0&&(r[r.length-1][1]=t),-1===b.indexOf(t)&&b.push(t)}l=[...n],c=[...u],h=r}else l=[...n,...l],h=[...r,...h],c=[...u,...c]}l.length>r&&(r=l.length),o.set(s,{values:l,valuesCount:h,colors:c}),"hr"===n.direction&&(A="hr"),f=!0,t.push(s)}l>h&&(h=l),d>c&&(c=d),-1===v.indexOf(s)&&v.push(s),-1===b.indexOf(i)&&b.push(i)}w=!0;const a=i||"Dataset "+m,s=e.measureText(a).width;"bar"===F?l.push(a):(n.name=a,n.design=d(I,m),x.push(n)),s>M&&(M=s),D+=1,m++}else if("pie"===F){for(let t=0;t<L.length;t++){const n=E?Math.round(S[t]):S[t],a=R?Math.round(L[t]):L[t];if(a>=0){const t=e.measureText(n).width;if(p.includes(n)){const t=p.indexOf(n),e=C[t];C[t]=e+a}else p.push(n),C.push(a);if(k.includes(n)){const t=k.indexOf(n),e=z[t];z[t]=e+a}else k.push(n),z.push(a);B+=a,t>g&&(g=t)}}T=!0,N.labels=k,N.values=z,N.totalValues=B,N.type="pie",y.push(N),g>M&&(M=g),D+=S.length}}f&&(i.names=l,i.categories=o,i.maxBarPerCategory=r,i.direction=A,x.unshift(i))}const S=[...x,...y],L=a(v),F=a(b),I="hr"===A;let N=l(v),k=l(b);if(n.xAxis){const t=n.xAxis.range;!t||(N=t)}if(n.yAxis){const t=n.yAxis.range;!t||(k=t)}const z=f(N),B=f(k),E=B.range,R=z.range,O=E[0],W=E[1],V=R[0],G=R[1],H=O?e.measureText(O).width:0,_=W?e.measureText(W).width:0,Y=V?e.measureText(V).width:0,j=G?e.measureText(G).width:0;c=Math.max(c,Math.max(H,_)),h=Math.max(h,Math.max(Y,j)),n.tickData={label:I?B:z,value:I?z:B},n.ranges={labelRange:z.range,valueRange:B.range},n.datasetNameData={isDatasetName:D>1,maxNameWidth:M,total:D},n.axisData={labels:I?b:v,values:I?v:b,maxLabelWidth:I?c:h,maxValueWidth:I?h:c,labelIsAllNumbers:I?F:L,valueIsAllNumbers:I?L:F,direction:A},n.pieData={labels:p,values:C,maxLabelWidth:g},n.hasAxisData=w,n.hasPieData=T,t.setData(S)}(t),function(t){const e=t.getCanvas(),n=e.width;let a=n,s=e.height;const i=t.getStyle(),o=t.getLayout().titleLines,l=i.title.fontSize,r=i.label.fontSize,h=t.getLayout(),c=h.xAxis?h.xAxis.title:null,g=h.yAxis?h.yAxis.title:null,u=4*r,f=h.axisData,d=f.labels,x=f.labelIsAllNumbers,y=f.maxLabelWidth,m=f.maxValueWidth;let v=0,b=2*l;o.length>1&&(b=l*o.length+l/2),g&&g.length>0&&(v+=u/2),c&&c.length>0&&(s-=b+u/2);const p=2*n;m>0&&(v+=m>p?p:m+r);const C=h.datasetNameData,P=C.isDatasetName,w=C.maxNameWidth;a-=P?w>p?v+p:v+w+2*r:x?v+y/2:v,s-=y>a/d.length&&y>2*r?b+.7*y+r:b+2*r;const T={x:v,y:b,width:a,height:s};t.layout={...h,graphPosition:T}}(t);const e=t.getLayout();(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().title,s=t.getCanvas().width,i=n.graphPosition.y;let o=n.titleLines;if(e.textAlign="center",o){const t=a.fontSize;e.font="bold "+t+"px "+a.fontFamily;let n=s/2,l=i/2+t/2;o.length>1&&(l=t);for(let a=0;a<o.length;a++){const s=o[a];e.beginPath(),e.fillText(s,n,l),e.closePath(),l+=t}}})(t),(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().label,s=e.canvas,i=s.width,o=s.height,l=a.fontSize;e.font=l+"px "+a.fontFamily;const r=n.graphPosition,h=r.x,c=r.y,g=r.width,f=r.height,d=i-(h+g),x=o-c,y=h+g+l,m=n.datasetNameData.total,v=t.getData();let b=!1;if(1===v.length){const t=v[0];"bar"===t.type&&t.names.length>1&&(b=!0)}if(v.length>1||!n.hasAxisData||b){let t=c+l/2;for(let n=0;n<v.length;n++){const a=v[n];if(a){let n=a.labels;const s=a.type;let i=a.colors;if(["line","scatter","bar"].includes(s))if("bar"===s){n=a.names;const t=a.categories;i=Array.from(t.values())[0].colors}else{n=[a.name];const t=a.design.color;i=Array.isArray(t)?t:[t]}if(n){let a=2*l;m*(2*l)>=f+l/2&&(a=Math.round(x/m));for(let o=0;o<n.length;o++){const r=u[o].code;let h=n[o];const c=e.measureText(h).width;if(c+l>d&&h.length>3){const t=c/h.length;p=h,C=Math.floor((d-2*l)/t),h=p.length>C?p.substr(0,C)+"...":p}const g=(i?"bar"===s?i[o][0]:i[o]:null)||r;g&&(e.fillStyle=g);const f=y+l,x=t;e.beginPath(),e.arc(y,t,l/2,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="black",e.textAlign="start",e.textBaseline="middle",e.fillText(h,f,x),t+=a}}}}}var p,C})(t),e.hasAxisData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition;e.beginPath(),e.rect(n.x+1,n.y,n.width-2,n.height),e.stroke(),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=e.width,o=e.height,l=e.x,r=e.y,h=s.fontSize;n.font=h+"px "+s.fontFamily,n.textBaseline="hanging";let c=0,g=r+o;const u=a.axisData,f="hr"===u.direction,d=u.labels;if(u.labelIsAllNumbers){const t=a.tickData.label,e=a.ranges;d.sort(((t,e)=>t-e));const s=[d[0],d[d.length-1]];let u=e?f?e.valueRange:e.labelRange:s;if(u=t.range,u){const e=u[0],a=u[1],s=t.interval;let f=t.count,d=i/f;d<1&&(d=1);let x=0;const y=n.measureText(a).width;let m=1;y>d&&(m+=Math.round(y/d)),n.textAlign="center";for(let t=0;t<=f;t+=m){x=e+s*t,c=l+d*t,n.measureText(x).width;const a=c,i=g+h;n.beginPath(),n.moveTo(c,r),n.lineTo(c,r+o+h/2),n.stroke(),n.beginPath(),n.fillText(x,a,i)}}}else{const t=u.maxLabelWidth;let e=i/d.length;e<1&&(e=1);let a=1;t/2>e&&(a+=Math.round(t/2/e));for(var x=0;x<d.length;x+=a){c=l+(e/2+e*x);const a=d[x];n.measureText(a).width;let s=c;const i=g+h;n.beginPath(),n.textAlign="center";let o=0;t>e&&(o=-40,s=c,n.textAlign="end",n.textBaseline="middle");let r=o*(Math.PI/180);n.save(),n.translate(s,i),n.rotate(r),n.fillText(a,0,0),n.restore()}}n.textAlign="start",n.textBaseline="alphabetic"}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=e.width,o=e.height,l=e.x,r=e.y,h=s.fontSize;n.font=h+"px "+s.fontFamily;let c=l,g=r+o;const u=a.axisData,f=(u.direction,u.values);if(u.valueIsAllNumbers){const t=a.tickData.value;f.sort(((t,e)=>t-e));let e=t.range;if(e){const a=e[0],s=t.interval;let u=t.count,f=o/u;f<1&&(f=1);let d=0,x=1;h>f&&(x+=Math.round(h/f));for(let t=0;t<=u;t+=x){d=a+s*t,g=r+o-f*t;const e=c-n.measureText(d).width-h,u=g+Math.floor(h/2);n.beginPath(),n.strokeStyle="black",n.moveTo(l+i,g),n.lineTo(l-h/2,g),n.stroke(),n.beginPath(),n.fillText(d,e,u)}}}else{let t=o/f.length;t<1&&(t=1);let e=1;h>t&&(e+=Math.round(h/t));for(var d=0;d<f.length;d+=e){g=r+o-(t/2+t*d);const e=f[d],a=c-h,s=g;n.beginPath(),n.textAlign="end",n.textBaseline="middle",n.fillText(e,a,s),n.textAlign="start",n.textBaseline="alphabetic"}}}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=n.canvas.height,o=e.width,l=e.height,r=e.x,h=e.y;let c=a.yAxis,g=a.xAxis;n.textAlign="center";const u=s.fontSize;if(n.font=u+"px "+s.fontFamily,c){let t=c.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(u,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g){let t=g.title;t&&(n.beginPath(),n.fillText(t,r+o/2,i-u/2))}}(t,n)})(t),e.hasPieData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition,a=n.x,s=n.y,i=n.width,o=g(i,n.height),l=a+i/2,r=s+o;e.beginPath(),e.arc(l,r,o,0,2*Math.PI),e.stroke()})(t)};function m(t,e,n){if(!n)return{values:t,colors:e};const a=[],s=[],i=[],o=[];for(let n=0;n<t.length;n++){const l=t[n],r=e[n];l>=0?(a.push(l),s.push(r)):(i.push(l),o.push(r))}return{values:[...a,...i],colors:[...s,...o]}}const v=(t,e,n,a)=>{const i=t.getCtx(),o=t.getLayout();if(e&&a){const r="hr"===a.direction,g=e.values,f=e.colors,d=o.axisData,x=r?d.labelIsAllNumbers:d.valueIsAllNumbers,y=o.graphPosition,v=y.x,b=y.y,p=y.width,C=y.height;let P=o.ranges.valueRange;const w=P[0]<0?0:P[0],T=P[1],A=a.maxBarPerCategory,M=a.categories,D=Array.from(M.keys()),S=D.indexOf(n),L=r?C/D.length:p/D.length,F=L/(A+1),I=P?r?h(t,w):c(t,w):null,N=I||(r?v:b+C);if(r){const e=F;let n=b+C-(L*S+e/2);for(var l=0;l<g.length;l++){const a=g[l],r=f[l];let c=N,d=0;for(let g=0;g<a.length;g++){const f=a[g],y=x?f+d:f,m=y>T?T:y,v=o.customColorsIndex,p=u[v+l].code,C=r&&r[g]?r[g]:p,P=h(t,m);if(P>=b){const t=P-c;c&&P&&(C&&(i.fillStyle=C),i.beginPath(),i.rect(I,n-e,t,e),i.fill())}if(c=c<P?N:P,x){const t=a[g+1];t&&s(m,t)&&(c=N),d+=y}}n-=e}}else{const e=F;let a=v+(L*S+e/2);for(l=0;l<g.length;l++){const r=m(g[l],f[l],x),h=r.values,d=r.colors;let y=N,v=0;for(let r=0;r<h.length;r++){const g=h[r],f=x?g+v:g;let m=f>T?T:f;const p=o.customColorsIndex,P=u[p+l].code,w=d&&d[r]?d[r]:P,A=c(t,m),M=y-A;if(b+C>=A&&y&&A&&(w&&(i.fillStyle=w),i.beginPath(),i.rect(a,A,e,M),i.fill()),x){const t=h[r+1],e=!!t&&s(m,t);y=e?N:A,e?v=0:v+=f,console.log(n,m,v,t,y,N)}}a+=e}}}};let b=null,p=!1,C=!1,P=null;const w=(t,e,a,s)=>{const i=t.getCtx();i.lineWidth=a,i.lineCap="round",((t,e)=>{const a=t.getCtx(),s=t.getLayout();if(!s.isBarChart){const t=s.ranges.labelRange,i=t?t[0]:null,o=t?t[1]:null;if(e){if(p){const t={x:i,y:n(i,b.x,b.y,e.x,e.y)};newPos&&(a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(e.x,e.y)),C=!0}P=e,p=!1}else if(b=e,p=!0,C||P){const t={x:o,y:n(o,P.x,P.y,e.x,e.y)};newPos&&a.lineTo(t.x,t.y),C=!1}}})(t,s),s&&("start"===e?(i.beginPath(),i.moveTo(s.x,s.y)):(i.lineTo(s.x,s.y),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(s.x,s.y))),"end"===e&&(b=null,p=!1,C=!1,P=null,i.stroke(),i.closePath())},T=(t,e,n)=>{const a=t.getCtx();n&&(a.beginPath(),a.arc(n.x,n.y,e,0,2*Math.PI),a.stroke(),a.fill(),a.closePath())},A=(t,e,n,a)=>{const s=t.getLayout().graphPosition,o=s.x,l=s.y,r=s.width,h=g(r,s.height),c=o+r/2,u=l+h,f=i(n,h,{x:c,y:u}),d={x:c,y:u},x=i(a,h,{x:c,y:u}),y=Math.PI/180,m=n*y,v=a*y;e.beginPath(),e.strokeStyle="white",e.lineWidth=4,e.arc(d.x,d.y,h,m,v),e.moveTo(f.x,f.y),e.lineTo(d.x,d.y),e.lineTo(x.x,x.y),e.stroke(),e.fill(),e.closePath()},M=(t,e,n)=>{const a=t.getCtx(),s=t.getLayout(),i=s.customColorsIndex;if("bars"===e){const e=n.categories,a=n.maxBarPerCategory,l=Array.from(e.keys());for(var o=0;o<l.length;o++){const a=l[o],s=e.get(a);v(t,s,a,n)}a&&(s.customColorsIndex=i+a)}else if("pie"===e){const e=t.getTempCanvas();e.width=a.canvas.width,e.height=a.canvas.height;const i=e.getContext("2d"),l=s.graphPosition,r=l.x,h=l.y,c=l.width,g=l.height,f=Math.min(c,g)/2,d=n.values,x=n.colors,y=n.totalValues;if(d){let e=-90,n=e;for(o=0;o<d.length;o++){const a=u[o].code,s=(x?x[o]:null)||a;s&&(i.fillStyle=s);const l=d[o];if(!isNaN(l)){e+=l/y*360;const a=e;A(t,i,n,a),n=a}}}const m=c/2,v=g/2,b=(n.hole?n.hole:0)*f;i.globalCompositeOperation="destination-out",i.globalAlpha=1,i.beginPath(),i.arc(r+m,h+v,b,0,2*Math.PI),i.fill(),i.globalCompositeOperation="source-over",a.drawImage(e,0,0)}else if(n){const i="hr"===s.axisData.direction,l=n.design.color,h=n.design.size;a.fillStyle=l,a.strokeStyle=l;const c=i?n.values:n.labels,g=i?n.labels:n.values;if(c)for(o=0;o<c.length;o++){let s=c[o],i=g[o];const u=Array.isArray(h)?h[o]:h,f=0===o?"start":o===c.length-1?"end":"";if(i||0===i){const o=r(t,s,i);if("arcs"===e);else if("lines"===e)w(t,f,u,o);else if("points"===e){const e=n.design.line,s=e&&e.color?e.color:l,i=e&&e.size?e.size:0;a.strokeStyle=s,a.lineWidth=i,T(t,u,o)}}else a.stroke(),a.closePath()}}},D=(t,e)=>{e&&M(t,"points",e)},S=(t,e)=>{e&&M(t,"bars",e)},L=(t,e)=>{e&&M(t,"lines",e)},F=(t,e)=>{e&&M(t,"pie",e)};function I(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.targetCanvas=document.createElement("canvas"),this.canvas=document.createElement("canvas"),this.canvasCopy=document.createElement("canvas"),this.tempCanvas=document.createElement("canvas"),this.setData=function(t){this.data=[...t]},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),a=t.getCtx(),s=t.getStyle().title,i=n.width,o=e.split(" ");let l=[],r=o[0];const h=s.fontSize;a.font=s.fontWeight+" "+h+"px "+s.fontFamily;for(let t=1;t<o.length;t++){const e=r+" "+o[t];a.measureText(e).width+h<i?r=e:(a.measureText(r).width,l.push(r),r=o[t])}return l.push(r),l}(this,e),t.customColorsIndex=0,this.layout={...t}}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},a={fontFamily:"Arial"};return e<600?(n.fontSize=16,a.fontSize=12):e<1200?(n.fontSize=20,a.fontSize=14):(n.fontSize=24,a.fontSize=18),{title:n,label:a}})(this)},this.getStyle=function(){return this.style},this.setCanvas=function(t,e){const n=this.getCanvas();n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.updateCanvasCopy=function(){const t=this.getCanvas(),e=this.getCanvasCopy();e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),this.canvasCopy=e},this.getCanvasCopy=function(){return this.canvasCopy},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTempCanvas=function(){return this.tempCanvas},this.getTarget=function(){return this.target},this.getTargetCanvas=function(){return this.targetCanvas},this.updateTargetCanvas=function(){const t=this.getCanvasCopy(),e=this.getTargetCanvas(),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0)},this.addCanvasToTarget=function(){const t=this.getTargetCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0);const e=this;var n,a,s,i;a="mousemove",s=function(t){const n=function(t){if(t){const e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}return null}(t);((t,e)=>{if(t&&e){t.getCtx();const e=t.getLayout();t.updateTargetCanvas(),e.firstDataType}})(e,n)},i="touchend",(n=t)&&"object"==typeof n&&(n.addEventListener?(x(n,a,s)||n.addEventListener(a,s,!1),i&&!x(n,i,s)&&n.addEventListener(i,s,!1)):n.attachEvent&&(x(n,a,s)||n.attachEvent("on"+a,s),i&&!x(n,i,s)&&n.attachEvent("on"+i,s))),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}I.prototype.plot=function(t,e){const n=function(t,e){const n=t.getTarget(),a=e.width,s=e.height;let i=0,o=0;return n&&(i=Math.max(n.offsetWidth,n.offsetHeight),o=.6*i),(a||s)&&(i=a,o=s),{width:i,height:o}}(this,e);this.setCanvas(n.width,n.height),this.setStyle(),this.setData(t),this.setLayout(e),y(this),(t=>{const e=t.getCtx(),n=t.getData();for(let a=0;a<n.length;a++){const s=n[a],i=s.type;e.lineJoin="round",i&&("line"===i?L(t,s):"scatter"===i?D(t,s):"bar"===i?S(t,s):"pie"===i&&F(t,s))}})(this),this.updateCanvasCopy(),this.addCanvasToTarget()},DataVision=I})()})();