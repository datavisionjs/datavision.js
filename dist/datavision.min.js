/*! For license information please see datavision.min.js.LICENSE.txt */
var DataVision;(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};(()=>{function n(t,e,n,a,s){return e===a?n:n+(t-e)*(s-n)/(a-e)}function a(t){return t.every((t=>"number"==typeof t))}function s(t,e){return t>=0&&e<0||t<0&&e>=0}function i(t){return Number.isInteger(t)?t:t.toFixed(1)}function o(t,e,n={x:0,y:0}){const a=Math.PI/180*t;return{x:n.x+e*Math.cos(a),y:n.y+e*Math.sin(a)}}function l(t,e){const n=[1,2,4,5,10],a=Math.pow(10,Math.floor(Math.log10(t)));return e?(n.reverse(),n.find((e=>e*a<=t))*a):n.find((e=>e*a>=t))*a}function r(t){if(a(t)){const e=function(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}(t);if(e)return[e.min,e.max]}return[null,null]}function h(t,e,n,a,s){return{x:c(t,e,s),y:u(t,n,a)}}function c(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.x,o=s.width;!n&&(n="x1");const l=a.axisData.labels[n];if(l){const n=l.isAllNumbers,a=l.values;if(n)e=function(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.x,o=s.width;!n&&(n="x1");const l=a.axisData.labels[n];if(l){const t=l.range;if(t){const n=t[0];return i+(e-n)/(t[1]-n)*o}}return e}(t,e);else{const t=o/a.length,n=t/2,s=a.indexOf(e);s>=0&&(e=i+(t*s+n))}}return e}function u(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.y,o=s.height;!n&&(n="y1");const l=a.axisData.values[n];if(l){const a=l.isAllNumbers,s=l.values;if(a)e=function(t,e,n,a){const s=t.getLayout(),i=s.graphPosition,o=i.y,l=i.height;!n&&(n="y1");const r=s.axisData.values[n];if(r){const t=r.range;if(t){const n=t[0];return o+l-(e-n)/(t[1]-n)*l}}return e}(t,e,n);else{const t=o/s.length,l=t/2,r=s.indexOf(e);console.log(e+": ",typeof e,a,n,s,r),r>=0&&(e=i+o-(t*r+l))}}return e}function g(t,e){let n=Math.round(.5*Math.min(t,e));return n<0&&(n=0),n}t(e);const f=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}];function x(t){if(!t)return{count:0,range:t};let e=10;const n=t[0],a=t[1];let s=n,i=a,o=e,r=0;if(!isNaN(n)&&!isNaN(a))if(n<=0&&a>=0){e=Math.round(e/2);const t=a-0;r=l(t/Math.max(e-1,1));const h=Math.ceil(t/r),c=Math.ceil(Math.abs(n)/r);o=h+c,s=-c*r,i=r*h}else if(n<=0)r=l((a-n)/Math.max(e-1,1)),i=-l(Math.abs(i),!0),o=Math.ceil(Math.abs(i-n)/r),s=-(Math.abs(i)+r*o);else if(n>0){s=l(s,!0),r=l((i-s)/Math.max(e-1,1));const t=Math.floor((n-s)/r);s+=s+r<n?t*r:0;const a=i-s;o=Math.ceil(a/r),i=s+r*o}return{count:o,range:[s,i],interval:r}}function d(t,e,n){const a=e||{},s=f[n].code;return!a.color&&(a.color=s),"line"===t&&Array.isArray(a.color)&&(a.color=s),!a.size&&(a.size=3),a}function y(t,e,n){return t._eventHandlers&&t._eventHandlers[e]&&t._eventHandlers[e].includes(n)}const m=t=>{!function(t){const e=t.getCtx(),n=t.getLayout(),s=[...t.getData()],o=t.getStyle().label,l=o.fontSize;e.font=l+"px "+o.fontFamily;let h=1,c=0;const u=[],g=[];let y=0;const m={x1:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1}},v={y1:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1},y2:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1}},p=[],b=[],C=["line","scatter","bar"];let A=!1,P=!1,T=null,w=0,M=0;if(s){const t=[...s],n=t.length,i={type:"bar"},o=new Map,l=[];let r=!1;for(let s=0;s<n;s++){const n={...t[s]},i=n.name,x=n.labels,D=n.values,S=n.type,L=n.design,N=n.yAxis?n.yAxis:"y1",F=n.xAxis?n.xAxis:"x1",k="y2"===N?v.y2:v.y1,W=m[F];let z=0,B=0;const I={...n},E=[],O=[];let R=0;const G=a(x),H=a(D);if(C.includes(S)){const t=[];for(let a=0;a<x.length;a++){const s=G?Math.round(x[a]):x[a],i=H?Math.round(D[a]):D[a],l=e.measureText(s).width,c=H&&i<0&&i>10?-10:i,u=e.measureText(c).width;if("bar"===S){const e="hr"===n.direction,l=f[y].code,c=e?s:i,u=e?i:s;let g=[[c]],x=[[c>=0?c:0,c<0?c:0]],d=[[L?Array.isArray(L.color)?a<L.color.length?L.color[a]:l:L.color:l]];if(o.has(u)){const n=o.get(u),a=n.values,s=a[a.length-1],i=n.valuesCount,l=i[i.length-1],r=n.colors,h=r[r.length-1];if(t.includes(u)){if(s.push(...g[0]),h.push(...d[0]),H||e&&G){const t=(c>=0?l[0]:l[1])+c;c>=0&&(i[i.length-1][0]=t),c<0&&(i[i.length-1][1]=t),e?-1===W.values.indexOf(t)&&W.values.push(t):-1===k.values.indexOf(t)&&k.values.push(t)}g=[...a],d=[...r],x=i}else g=[...a,...g],x=[...i,...x],d=[...r,...d]}g.length>h&&(h=g.length),o.set(u,{values:g,valuesCount:x,colors:d,xAxis:F,yAxis:N}),"hr"===n.direction&&(T="hr"),r=!0,t.push(u)}l>z&&(z=l),u>B&&(B=u),-1===W.values.indexOf(s)&&W.values.push(s),-1===k.values.indexOf(i)&&k.values.push(i)}W.maxWidth=z>W.maxWidth?z:W.maxWidth,k.maxWidth=B>k.maxWidth?B:k.maxWidth,k.isAllNumbers=H,W.isAllNumbers=G,A=!0;const a=i||"Dataset "+y,s=e.measureText(a).width;"bar"===S?l.push(a):(n.name=a,n.design=d(S,L,y),u.push(n)),s>w&&(w=s),M+=1,y++}else if("pie"===S){for(let t=0;t<D.length;t++){const n=G?Math.round(x[t]):x[t],a=H?Math.round(D[t]):D[t];if(a>=0){const t=e.measureText(n).width;if(p.includes(n)){const t=p.indexOf(n),e=b[t];b[t]=e+a}else p.push(n),b.push(a);if(E.includes(n)){const t=E.indexOf(n),e=O[t];O[t]=e+a}else E.push(n),O.push(a);R+=a,t>c&&(c=t)}}P=!0,I.labels=E,I.values=O,I.totalValues=R,I.type="pie",g.push(I),c>w&&(w=c),M+=x.length}}r&&(i.names=l,i.categories=o,i.maxBarPerCategory=h,i.direction=T,u.unshift(i))}const D=(t,s)=>{for(let o in t){const l=t[o],h=l.values,c=l.maxWidth;"y2"===o&&console.log(o,c);const u=a(h);let g=r(h);if("values"===s){if("y2"===o){if(n.y2Axis){const t=n.y2Axis.range;!t||(g=t)}}else if(n.yAxis){const t=n.yAxis.range;!t||(g=t)}}else if(n.xAxis){const t=n.xAxis.range;!t||(g=t)}const f=x(g),d=f.range,y=i(d[0]),m=i(d[1]),v=y&&!isNaN(y)?e.measureText(y).width:0,p=m&&!isNaN(y)?e.measureText(m).width:0,b=Math.max(c,Math.max(v,p));"y2"===o&&console.log(o,b,g,d),l.maxWidth=b,l.range=f.range,l.tickData=f,l.isAllNumbers=u}},S=[...u,...g];D(v,"values"),D(m),n.datasetNameData={isDatasetName:M>1,maxNameWidth:w,total:M},n.axisData={labels:m,values:v,direction:T},n.pieData={labels:p,values:b,maxLabelWidth:c},n.hasAxisData=A,n.hasPieData=P,t.setData(S)}(t),function(t){t.getCtx();const e=t.getCanvas(),n=e.width,a=e.height,s=t.getLayout(),i=t.getStyle(),o=i.title.fontSize,l=i.label.fontSize,r=t.getLayout().titleLines;let h=0;r.length>0&&(h=(r.length+1)*o);const c=s.axisData,u=c.labels,g=c.values,f=2*l;let x=.15*n,d=.15*n;const y=g.y1.maxWidth;y<x&&(x=y+f),s.yAxis&&s.yAxis.title&&(x+=f);const m=g.y2.maxWidth;m<d&&(d=0===m?0:m+f),s.y2Axis&&s.y2Axis.title&&m>0&&(d+=2*l);let v=.15*n;const p=s.datasetNameData,b=p.isDatasetName,C=p.maxNameWidth;v=b?C<v?C+f:.2*n:0;let A=f+l,P=0;const T=n-(x+d+v),w=u.x1,M=w.maxWidth,D=T/w.values.length;P=w.isAllNumbers?M:0,M>D&&M>f&&(A+=.7*M),s.xAxis&&s.xAxis.title&&(A+=f);const S={x,y:h,width:n-(x+d+v+P),height:a-(h+A),yAxisRight:d};t.layout={...s,graphPosition:S}}(t);const e=t.getLayout();(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().title,s=t.getCanvas().width,i=n.graphPosition.y;let o=n.titleLines;if(e.textAlign="center",o){const t=a.fontSize;e.font="bold "+t+"px "+a.fontFamily;let n=s/2,l=i/2+t/2;o.length>1&&(l=t);for(let a=0;a<o.length;a++){const s=o[a];e.beginPath(),e.fillText(s,n,l),e.closePath(),l+=t}}})(t),(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().label,s=e.canvas,i=s.width,o=s.height,l=a.fontSize;e.font=l+"px "+a.fontFamily;const r=n.graphPosition,h=r.x,c=r.y,u=r.width,g=r.height,x=.2*i,d=o-c,y=h+u+r.yAxisRight+l,m=n.datasetNameData.total,v=t.getData();let p=!1;if(1===v.length){const t=v[0];"bar"===t.type&&t.names.length>1&&(p=!0)}if(v.length>1||!n.hasAxisData||p){let t=c+l/2;for(let n=0;n<v.length;n++){const a=v[n];if(a){let n=a.labels;const s=a.type;let i=a.colors;if(["line","scatter","bar"].includes(s))if("bar"===s){n=a.names;const t=a.categories;i=Array.from(t.values())[0].colors}else{n=[a.name];const t=a.design.color;i=Array.isArray(t)?t:[t]}if(n){let a=2*l;m*(2*l)>=g+l/2&&(a=Math.round(d/m));for(let o=0;o<n.length;o++){const r=f[o].code;let h=n[o];const c=e.measureText(h).width;if(c+a>x&&h.length>3){const t=c/h.length;b=h,C=Math.floor((x-2*l)/t),h=b.length>C?b.substr(0,C)+"...":b}const u=(i?"bar"===s?i[o][0]:i[o]:null)||r;u&&(e.fillStyle=u);const g=y+l,d=t;e.beginPath(),e.arc(y,t,l/2,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="black",e.textAlign="start",e.textBaseline="middle",e.fillText(h,g,d),t+=a}}}}}var b,C})(t),e.hasAxisData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition;e.beginPath(),e.rect(n.x+1,n.y,n.width-2,n.height),e.stroke(),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,o=e.width,l=e.height,r=e.x,h=e.y,c=s.fontSize;n.font=c+"px "+s.fontFamily,n.textBaseline="hanging";let u=0,g=h+l;const f=a.axisData.labels;for(let t in f){const e=f[t],a=e.values;if(e.isAllNumbers){const t=e.tickData;a.sort(((t,e)=>t-e));let s=e.range;if(s){const e=s[0],a=s[1],f=t.interval;let x=t.count,d=o/x;d<1&&(d=1);let y=0;const m=n.measureText(a).width;let v=1;m>d&&(v+=Math.round(m/d)),n.textAlign="center";for(let t=0;t<=x;t+=v){y=i(e+f*t),u=r+d*t,n.measureText(y).width;const a=u,s=g+c;n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5",n.moveTo(u,h),n.lineTo(u,h+l+c/2),n.stroke(),n.beginPath(),n.fillText(y,a,s)}}}else{const t=e.maxWidth;let s=o/a.length;s<1&&(s=1);let i=1;t/2>s&&(i+=Math.round(t/2/s));for(var x=0;x<a.length;x+=i){u=r+(s/2+s*x);const e=a[x];let i=u;const o=g+c;n.beginPath(),n.textAlign="center";let l=0;t>s&&(l=-40,i=u,n.textAlign="end",n.textBaseline="middle");let h=l*(Math.PI/180);n.save(),n.translate(i,o),n.rotate(h),n.fillText(e,0,0),n.restore()}}}n.textAlign="start",n.textBaseline="alphabetic"}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,o=e.width,l=e.height,r=e.x,h=e.y,c=s.fontSize;n.font=c+"px "+s.fontFamily;let u=r,g=h+l;const f=a.axisData,x=(f.direction,f.values);for(let t in x){const e=x[t],a=e.values;if(e.isAllNumbers){const s=e.tickData;a.sort(((t,e)=>t-e));let f=e.range;if(f){const e=f[0],a=s.interval;let x=s.count,d=l/x;d<1&&(d=1);let y=0,m=1;c>d&&(m+=Math.round(c/d));for(let s=0;s<=x;s+=m){y=i(e+a*s),g=h+l-d*s;const f=n.measureText(y).width,x="y2"===t?u+o+c:u-f-c,m=g+Math.floor(c/2);n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5","y2"===t?(n.moveTo(r+o,g),n.lineTo(r+o+c/2,g)):(n.moveTo(r+o,g),n.lineTo(r-c/2,g)),n.stroke(),n.beginPath(),n.fillText(y,x,m)}}}else{let e=l/a.length;e<1&&(e=1);let s=1;c>e&&(s+=Math.round(c/e));for(var d=0;d<a.length;d+=s){g=h+l-(e/2+e*d);const s=a[d],i="y2"===t?u+o+c:u-c,r=g;n.beginPath(),n.textAlign="y2"===t?"start":"end",n.textBaseline="middle",n.fillText(s,i,r),n.textAlign="start",n.textBaseline="alphabetic"}}}}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=n.canvas.height,o=e.width,l=e.height,r=e.x,h=e.y,c=e.yAxisRight;let u=a.yAxis,g=a.y2Axis,f=a.xAxis;n.textAlign="center";const x=s.fontSize;if(n.font=x+"px "+s.fontFamily,u){let t=u.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g){let t=g.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(r+o+c-x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(f){let t=f.title;t&&(n.beginPath(),n.fillText(t,r+o/2,i-x/2))}}(t,n)})(t),e.hasPieData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition,a=n.x,s=n.y,i=n.width,o=g(i,n.height),l=a+i/2,r=s+o;e.beginPath(),e.arc(l,r,o,0,2*Math.PI),e.stroke()})(t)};function v(t,e,n){if(!n)return{values:t,colors:e};const a=[],s=[],i=[],o=[];for(let n=0;n<t.length;n++){const l=t[n],r=e[n];l>=0?(a.push(l),s.push(r)):(i.push(l),o.push(r))}return{values:[...a,...i],colors:[...s,...o]}}const p=(t,e,n,a)=>{const i=t.getCtx(),o=t.getLayout();if(e&&a){const r="hr"===a.direction,h=e.values,g=e.colors,x=o.axisData,d=x.values[e.yAxis],y=x.labels[e.xAxis],m=d.isAllNumbers,p=y.isAllNumbers,b=o.graphPosition,C=b.x,A=b.y,P=b.width,T=b.height;let w=r?y.range:d.range;const M=w[0]<0?0:w[0],D=w[1],S=a.maxBarPerCategory,L=a.categories,N=Array.from(L.keys()),F=(N.indexOf(n),(r?T/N.length:P/N.length)/(S+1)),k=(w?r?c(t,M):u(t,M):null)||(r?C:A+T);if(r){const e=F;let a=u(t,n)+e/2;for(var l=0;l<h.length;l++){const n=v(h[l],g[l],p),r=n.values,u=n.colors;let x=k,d=0;for(let n=0;n<r.length;n++){const h=r[n],g=p?h+d:h,y=g>D?D:g,m=o.customColorsIndex,v=f[m+l].code,b=u&&u[n]?u[n]:v,A=c(t,y);if(A>=C){const t=A-x;x&&A&&(b&&(i.fillStyle=b),i.beginPath(),i.rect(x,a-e,t,e),i.fill())}if(x=x<A?k:A,p){const t=r[n+1],e=!!t&&s(y,t);x=e?k:A,e?d=0:d+=g}}a-=e}}else{const e=F;let a=c(t,n)-e/2;for(l=0;l<h.length;l++){const r=v(h[l],g[l],m),c=r.values,x=r.colors;let d=k,y=0;for(let r=0;r<c.length;r++){const h=c[r],g=m?h+y:h;let v=g>D?D:g;const p=o.customColorsIndex,b=f[p+l].code,C=x&&x[r]?x[r]:b,P=u(t,v);console.log("parts: ",v,n);const w=d-P;if(A+T>=P&&d&&P&&(C&&(i.fillStyle=C),i.beginPath(),i.rect(a,P,e,w),i.fill()),m){const t=c[r+1],e=!!t&&s(v,t);d=e?k:P,e?y=0:y+=g}}a+=e}}}};let b=null,C=!1,A=!1,P=null;const T=(t,e,a,s,i)=>{const o=e.xAxis?e.xAxis:"x1",l=t.getCtx();l.lineWidth=s,l.lineCap="round",((t,e,a)=>{const s=t.getCtx(),i=t.getLayout();if(!i.isBarChart){const t=i.axisData.labels[a].range,o=t?t[0]:null,l=t?t[1]:null;if(e){if(C){const t={x:o,y:n(o,b.x,b.y,e.x,e.y)};newPos&&(s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(e.x,e.y)),A=!0}P=e,C=!1}else if(b=e,C=!0,A||P){const t={x:l,y:n(l,P.x,P.y,e.x,e.y)};newPos&&s.lineTo(t.x,t.y),A=!1}}})(t,i,o),i&&("start"===a?(l.beginPath(),l.moveTo(i.x,i.y)):(l.lineTo(i.x,i.y),l.stroke(),l.closePath(),l.beginPath(),l.moveTo(i.x,i.y))),"end"===a&&(b=null,C=!1,A=!1,P=null,l.stroke(),l.closePath())},w=(t,e,n)=>{const a=t.getCtx();n&&(a.beginPath(),a.arc(n.x,n.y,e,0,2*Math.PI),a.stroke(),a.fill(),a.closePath())},M=(t,e,n,a)=>{const s=t.getLayout().graphPosition,i=s.x,l=s.y,r=s.width,h=g(r,s.height),c=i+r/2,u=l+h,f=o(n,h,{x:c,y:u}),x={x:c,y:u},d=o(a,h,{x:c,y:u}),y=Math.PI/180,m=n*y,v=a*y;e.beginPath(),e.strokeStyle="white",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.arc(x.x,x.y,h,m,v),e.moveTo(f.x,f.y),e.lineTo(x.x,x.y),e.lineTo(d.x,d.y),e.stroke(),e.fill(),e.closePath()},D=(t,e,n)=>{const a=t.getCtx(),s=t.getLayout(),i=s.customColorsIndex;if("bars"===e){const e=n.categories,a=n.maxBarPerCategory,l=Array.from(e.keys());for(var o=0;o<l.length;o++){const a=l[o],s=e.get(a);p(t,s,a,n)}a&&(s.customColorsIndex=i+a)}else if("pie"===e){const e=t.getTempCanvas();e.width=a.canvas.width,e.height=a.canvas.height;const i=e.getContext("2d"),l=s.graphPosition,r=l.x,h=l.y,c=l.width,u=l.height,g=Math.min(c,u)/2,x=n.values,d=n.colors,y=n.totalValues;if(x){let e=-90,n=e;for(o=0;o<x.length;o++){const a=f[o].code,s=(d?d[o]:null)||a;s&&(i.fillStyle=s);const l=x[o];if(!isNaN(l)){e+=l/y*360;const a=e;M(t,i,n,a),n=a}}}const m=c/2,v=u/2,p=(n.hole?n.hole:0)*g;i.globalCompositeOperation="destination-out",i.globalAlpha=1,i.beginPath(),i.arc(r+m,h+v,p,0,2*Math.PI),i.fill(),i.globalCompositeOperation="source-over",a.drawImage(e,0,0)}else if(n){const s=n.yAxis?n.yAxis:"y1",i=n.xAxis?n.xAxis:"x1",l="hr"===n.direction,r=n.design.color,c=n.design.size;a.fillStyle=r,a.strokeStyle=r;const u=l?n.values:n.labels,g=l?n.labels:n.values;if(u)for(o=0;o<u.length;o++){let l=u[o],f=g[o];const x=Array.isArray(r)?r[o]:r,d=Array.isArray(c)?c[o]:c,y=0===o?"start":o===u.length-1?"end":"";if(f||0===f){const o=h(t,l,f,s,i);if("arcs"===e);else if("lines"===e)T(t,n,y,d,o);else if("points"===e){const e=n.design.line,s=e&&e.color?e.color:x,i=e&&e.size?e.size:0;a.fillStyle=x,a.strokeStyle=s,a.lineWidth=i,w(t,d,o)}}else a.stroke(),a.closePath()}}},S=(t,e)=>{e&&D(t,"points",e)},L=(t,e)=>{e&&D(t,"bars",e)},N=(t,e)=>{e&&D(t,"lines",e)},F=(t,e)=>{e&&D(t,"pie",e)};function k(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.targetCanvas=document.createElement("canvas"),this.canvas=document.createElement("canvas"),this.canvasCopy=document.createElement("canvas"),this.tempCanvas=document.createElement("canvas"),this.setData=function(t){this.data=[...t]},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),a=t.getCtx(),s=t.getStyle().title,i=n.width,o=e.split(" ");let l=[],r=o[0];const h=s.fontSize;a.font=s.fontWeight+" "+h+"px "+s.fontFamily;for(let t=1;t<o.length;t++){const e=r+" "+o[t];a.measureText(e).width+h<i?r=e:(a.measureText(r).width,l.push(r),r=o[t])}return l.push(r),l}(this,e),t.customColorsIndex=0,this.layout={...t}}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},a={fontFamily:"Arial"};return e<600?(n.fontSize=16,a.fontSize=12):e<1200?(n.fontSize=20,a.fontSize=14):(n.fontSize=24,a.fontSize=18),{title:n,label:a}})(this)},this.getStyle=function(){return this.style},this.setCanvas=function(t,e){const n=this.getCanvas();n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.updateCanvasCopy=function(){const t=this.getCanvas(),e=this.getCanvasCopy();e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),this.canvasCopy=e},this.getCanvasCopy=function(){return this.canvasCopy},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTempCanvas=function(){return this.tempCanvas},this.getTarget=function(){return this.target},this.getTargetCanvas=function(){return this.targetCanvas},this.updateTargetCanvas=function(){const t=this.getCanvasCopy(),e=this.getTargetCanvas(),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0)},this.addCanvasToTarget=function(){const t=this.getTargetCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0);const e=this;var n,a,s,i;a="mousemove",s=function(t){const n=function(t){if(t){const e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}return null}(t);((t,e)=>{if(t&&e){t.getCtx();const e=t.getLayout();t.updateTargetCanvas(),e.firstDataType}})(e,n)},i="touchend",(n=t)&&"object"==typeof n&&(n.addEventListener?(y(n,a,s)||n.addEventListener(a,s,!1),i&&!y(n,i,s)&&n.addEventListener(i,s,!1)):n.attachEvent&&(y(n,a,s)||n.attachEvent("on"+a,s),i&&!y(n,i,s)&&n.attachEvent("on"+i,s))),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}k.prototype.plot=function(t,e){const n=function(t,e){const n=t.getTarget(),a=e.width,s=e.height;let i=0,o=0;return n&&(i=Math.max(n.offsetWidth,n.offsetHeight),o=.6*i),(a||s)&&(i=a,o=s),{width:i,height:o}}(this,e);this.setCanvas(n.width,n.height),this.setStyle(),this.setData(t),this.setLayout(e),m(this),(t=>{const e=t.getCtx(),n=t.getData();for(let a=0;a<n.length;a++){const s=n[a],i=s.type;e.lineJoin="round",i&&("line"===i?N(t,s):"scatter"===i?S(t,s):"bar"===i?L(t,s):"pie"===i&&F(t,s))}})(this),this.updateCanvasCopy(),this.addCanvasToTarget()},DataVision=k})()})();