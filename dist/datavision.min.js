var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,o,a){return e===o?n:n+(t-e)*(a-n)/(o-e)}function o(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0!==e.length)return{min:Math.min(...e),max:Math.max(...e)}}function a(t,e){const n=.85*t,o=.65*e;return{x:.75*(t-n),y:(e-o)/2,width:n,height:o}}function i(t,e){const n=t[0],o=t[1],a=Math.abs(o-n),i=r(t,e);let l=Math.round(a/i);return n+l*i<o&&l++,l}function l(){let t=null,e=null;if(layout){const n=7,o=layout.xAxis;o&&o.range&&(t=s(o.range,n));const a=10,i=layout.yAxis;i&&i.range&&(e=s(i.range,a))}if(data&&(!t||!e)){let n=t,a=e;for(let i=0;i<data.length;i++){const l=data[i],r=l.x,s=l.y;if(!t){const t=o(r);t&&(n=n?[Math.min(n[0],t.min),Math.max(n[1],t.max)]:[t.min,t.max])}if(!e){const t=o(s);t&&(a=a?[Math.min(a[0],t.min),Math.max(a[1],t.max)]:[t.min,t.max])}}n&&(t=[Math.round(n[0]),Math.round(n[1])]),a&&(e=[Math.round(a[0]),Math.round(a[1])])}return{xRange:t,yRange:e}}function r(t,e){const n=t[0],o=t[1],a=Math.abs(o-n)/e,i=a%100,l=[1,2,5,10,20,50,100].filter((t=>t>=i))[0];return a-i+l}function s(t,e){let n=t[0],o=t[1];n>=10?n=10*Math.floor(n/10):n>=5?n=5*Math.floor(n/5):n>=2?n=2*Math.floor(n/2):n>=0?n=0:n>10?n=Math.floor(n):n<=-10&&(n=10*Math.floor(n/10));const a=r([n,o],e),l=i([n,o],e);return 27===t[1]&&console.log("wow: ",a),o=n+l*a,[n,o]}function h(t,e){const n=t.canvas,o=a(n.width,n.height),i=l(),r=s(i.xRange,7),h=r[0],c=r[1],f=c-h,g=s(i.yRange,10),x=g[0],u=g[1],y=u-x;if(e.x>=h&&e.x<=c&&e.y>=x&&e.y<=u){const t=(e.x-h)/f,n=(e.y-x)/y;return{x:o.x+t*o.width,y:o.y+o.height-n*o.height}}return null}t.r(e),t.d(e,{default:()=>T});const c=t=>{const e=t.canvas,n=a(e.width,e.height);t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.stroke();const o=l();!function(t,e,n){const o=e.width,a=e.height,l=e.x,h=e.y;let c=l,f=h+a;if(n){const e=7,l=(n=s(n,e))[0],g=r(n,e);let x=i(n,e),u=o/x,y=l,d=13;for(let e=0;e<x;e++){t.font=d+"px Arial";const e=c-t.measureText(y).width/2,n=f+2*d;t.beginPath(),t.moveTo(c,h),t.lineTo(c,h+a),t.stroke(),t.beginPath(),t.fillText(y,e,n),y+=g,c+=u}}}(t,n,o.xRange),function(t,e,n){const o=e.width,a=e.height,l=e.x;let h=l,c=e.y+a;if(n){const e=10,f=(n=s(n,e))[0],g=r(n,e);let x=i(n,e),u=a/x,y=f,d=13;for(let e=0;e<x;e++){t.font=d+"px Arial";const e=h-t.measureText(y).width-d,n=c+Math.floor(d/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(l+o,c),t.lineTo(l,c),t.stroke(),t.beginPath(),t.fillText(y,e,n),y+=g,c-=u}}}(t,n,o.yRange),function(t,e){const n=t.canvas.height,o=e.width,a=e.height,i=e.x,l=e.y;let r=layout.title,s=layout.yAxis,h=layout.xAxis;if(t.textAlign="center",r){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(r,i+o/2,l/2+e/2)}if(s){let e=s.title;if(e){t.beginPath();let n=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(18,l+a/2),t.rotate(n),t.fillText(e,0,0),t.restore()}}if(h){let e=h.title;e&&(t.beginPath(),t.font="18px Arial",t.fillText(e,i+o/2,n-18))}}(t,n)};let f=null,g=!1,x=!1,u=null;const y=(t,e,o,a)=>{const i=l().xRange,r=i[0],s=i[1],c=h(t,a);if(t.lineWidth=o,c){if(g){const e=h(t,{x:r,y:n(r,f.x,f.y,a.x,a.y)});e&&(t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(c.x,c.y)),x=!0}u=a,g=!1}else if(f=a,g=!0,x||u){const e=h(t,{x:s,y:n(s,u.x,u.y,a.x,a.y)});e&&t.lineTo(e.x,e.y),x=!1}c&&("start"===e?(t.beginPath(),t.arc(c.x,c.y,o,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),console.log("begin Path"),t.moveTo(c.x,c.y)):(t.lineTo(c.x,c.y),t.stroke(),t.closePath(),t.beginPath(),t.arc(c.x,c.y,o,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(c.x,c.y))),"end"===e&&(f=null,g=!1,x=!1,u=null,t.stroke(),t.closePath())},d=(t,e,n)=>{const o=h(t,n);o&&(t.beginPath(),t.arc(o.x,o.y,e,0,2*Math.PI),t.fill(),t.closePath())},m=(t,e,n)=>{if(n){const a=n.x,i=n.y;for(var o=0;o<a.length;o++){const n=a[o],l=i[o],r=4,s=0===o?"start":o===a.length-1?"end":"";if(l||0===l){const o={x:n,y:l};"arcs"===e||"bars"===e||("lines"===e?y(t,s,r,o):"points"===e&&d(t,r,o))}else t.stroke(),t.closePath()}}},P=(t,e)=>{e&&m(t,"points",e)},b=(t,e)=>{e&&m(t,"lines",e)},v=t=>{for(let e=0;e<data.length;e++){const n=data[e],o=n.type,a="#5570a3",i=n.strokeColor?n.strokeColor:a,l=n.fillColor?n.fillColor:i;t.lineJoin="round",t.strokeStyle=i,t.fillStyle=l,o&&("line"===o&&b(t,n,layout),"scatter"===o&&P(t,n,layout))}};function M(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}M.prototype.plot=function(t,e){const n=this.canvas;n.width=700,n.height=525;const o=n.getContext("2d");c(o),v(o),this.addCanvasToTarget()};DataVision=M})()})();