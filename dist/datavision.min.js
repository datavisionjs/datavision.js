/*! For license information please see datavision.min.js.LICENSE.txt */
var DataVision;(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};(()=>{function n(t,e,n,a,s){return e===a?n:n+(t-e)*(s-n)/(a-e)}function a(t){return t.every((t=>"number"==typeof t))}function s(t,e){return t>=0&&e<0||t<0&&e>=0}function i(t,e,n={x:0,y:0}){const a=Math.PI/180*t;return{x:n.x+e*Math.cos(a),y:n.y+e*Math.sin(a)}}function o(t,e){const n=[1,2,5,10],a=Math.pow(10,Math.floor(Math.log10(t)));return e?(n.reverse(),n.find((e=>e*a<=t))*a):n.find((e=>e*a>=t))*a}function l(t){if(a(t)){const e=function(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}(t);if(e)return[e.min,e.max]}return[null,null]}function r(t,e,n,a,s){return{x:h(t,e,s),y:c(t,n,a)}}function h(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.x,o=s.width;!n&&(n="x1");const l=a.axisData.labels[n];if(l){const n=l.isAllNumbers,a=l.values;if(n)e=function(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.x,o=s.width;!n&&(n="x1");const l=a.axisData.labels[n];if(l){const t=l.range;if(t){const n=t[0];return i+(e-n)/(t[1]-n)*o}}return e}(t,e);else{const t=o/a.length,n=t/2,s=a.indexOf(e);s>=0&&(e=i+(t*s+n))}}return e}function c(t,e,n){const a=t.getLayout(),s=a.graphPosition,i=s.y,o=s.height;!n&&(n="y1");const l=a.axisData.values[n];if(l)if(l.isAllNumbers)e=function(t,e,n,a){const s=t.getLayout(),i=s.graphPosition,o=i.y,l=i.height;!n&&(n="y1");const r=s.axisData.values[n];if(r){const t=r.range;if(t){const n=t[0];return o+l-(e-n)/(t[1]-n)*l}}return e}(t,e,n);else{const t=l.values,a=o/t.length,s=a/2,r=t.indexOf(e);console.log(n,t),r>=0&&(e=i+o-(a*r+s))}return e}function u(t,e){let n=Math.round(.5*Math.min(t,e));return n<0&&(n=0),n}t(e);const g=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}];function f(t){if(!t)return{count:0,range:t};let e=10;const n=t[0],a=t[1];let s=n,i=a,l=e,r=0;if(!isNaN(n)&&!isNaN(a))if(n<=0&&a>=0){e=Math.round(e/2);const t=a-0;r=o(t/Math.max(e-1,1));const h=Math.ceil(t/r),c=Math.ceil(Math.abs(n)/r);l=h+c,s=-c*r,i=r*h}else if(n<=0)r=o((a-n)/Math.max(e-1,1)),i=-o(Math.abs(i),!0),l=Math.ceil(Math.abs(i-n)/r),s=-(Math.abs(i)+r*l);else if(n>0){s=o(s,!0);const t=i-s,n=t<1e3?e:Math.round(e/2);r=o(t/Math.max(n-1,1)),l=Math.ceil(t/r),i=s+r*l}return{count:l,range:[s,i],interval:r}}function x(t,e,n){const a=e||{},s=g[n].code;return!a.color&&(a.color=s),"line"===t&&Array.isArray(a.color)&&(a.color=s),!a.size&&(a.size=3),a}function d(t,e,n){return t._eventHandlers&&t._eventHandlers[e]&&t._eventHandlers[e].includes(n)}const y=t=>{!function(t){const e=t.getCtx(),n=t.getLayout(),s=[...t.getData()],i=t.getStyle().label,o=i.fontSize;e.font=o+"px "+i.fontFamily;let r=1,h=0;const c=[],u=[];let d=0;const y={x1:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1}},m={y1:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1},y2:{values:[],range:null,maxWidth:0,tickData:null,isAllNumbers:!1}},v=[],p=[],b=["line","scatter","bar"];let C=!1,A=!1,P=null,T=0,w=0;if(s){const t=[...s],n=t.length,i={type:"bar"},o=new Map,l=[];let f=!1;for(let s=0;s<n;s++){const n={...t[s]},i=n.name,M=n.labels,D=n.values,S=n.type,L=n.design,N=n.yAxis?n.yAxis:"y1",F=n.xAxis?n.xAxis:"x1",k="y2"===N?m.y2:m.y1,W=y[F];let z=0,B=0;const E={...n},I=[],O=[];let R=0;const G=a(M),H=a(D);if(b.includes(S)){const t=[];for(let a=0;a<M.length;a++){const s=G?Math.round(M[a]):M[a],i=H?Math.round(D[a]):D[a],l=e.measureText(s).width,h=H&&i<0&&i>10?-10:i,c=e.measureText(h).width;if("bar"===S){const e="hr"===n.direction,l=g[d].code,h=e?s:i,c=e?i:s;let u=[[h]],x=[[h>=0?h:0,h<0?h:0]],y=[[L?Array.isArray(L.color)?a<L.color.length?L.color[a]:l:L.color:l]];if(o.has(c)){const n=o.get(c),a=n.values,s=a[a.length-1],i=n.valuesCount,l=i[i.length-1],r=n.colors,g=r[r.length-1];if(t.includes(c)){if(s.push(...u[0]),g.push(...y[0]),H||e&&G){const t=(h>=0?l[0]:l[1])+h;h>=0&&(i[i.length-1][0]=t),h<0&&(i[i.length-1][1]=t),e?-1===W.values.indexOf(t)&&W.values.push(t):-1===k.values.indexOf(t)&&k.values.push(t)}u=[...a],y=[...r],x=i}else u=[...a,...u],x=[...i,...x],y=[...r,...y]}u.length>r&&(r=u.length),o.set(c,{values:u,valuesCount:x,colors:y,xAxis:F,yAxis:N}),"hr"===n.direction&&(P="hr"),f=!0,t.push(c)}l>z&&(z=l),c>B&&(B=c),-1===W.values.indexOf(s)&&W.values.push(s),-1===k.values.indexOf(i)&&k.values.push(i)}W.maxWidth=z>W.maxWidth?z:W.maxWidth,k.maxWidth=B>k.maxWidth?B:k.maxWidth,k.isAllNumbers=H,W.isAllNumbers=G,C=!0;const a=i||"Dataset "+d,s=e.measureText(a).width;"bar"===S?l.push(a):(n.name=a,n.design=x(S,L,d),c.push(n)),s>T&&(T=s),w+=1,d++}else if("pie"===S){for(let t=0;t<D.length;t++){const n=G?Math.round(M[t]):M[t],a=H?Math.round(D[t]):D[t];if(a>=0){const t=e.measureText(n).width;if(v.includes(n)){const t=v.indexOf(n),e=p[t];p[t]=e+a}else v.push(n),p.push(a);if(I.includes(n)){const t=I.indexOf(n),e=O[t];O[t]=e+a}else I.push(n),O.push(a);R+=a,t>h&&(h=t)}}A=!0,E.labels=I,E.values=O,E.totalValues=R,E.type="pie",u.push(E),h>T&&(T=h),w+=M.length}}f&&(i.names=l,i.categories=o,i.maxBarPerCategory=r,i.direction=P,c.unshift(i))}const M=(t,s)=>{for(let i in t){const o=t[i],r=o.values,h=o.maxWidth,c=a(r);let u=l(r);if("values"===s){if(n.yAxis){const t=n.yAxis.range;!t||(u=t)}}else if(n.xAxis){const t=n.xAxis.range;!t||(u=t)}const g=f(u),x=g.range,d=x[0],y=x[1],m=d?e.measureText(d).width:0,v=y?e.measureText(y).width:0,p=Math.max(h,Math.max(m,v));o.maxWidth=p,o.range=g.range,o.tickData=g,o.isAllNumbers=c}},D=[...c,...u];M(m,"values"),M(y),n.datasetNameData={isDatasetName:w>1,maxNameWidth:T,total:w},n.axisData={labels:y,values:m,direction:P},n.pieData={labels:v,values:p,maxLabelWidth:h},n.hasAxisData=C,n.hasPieData=A,t.setData(D)}(t),function(t){const e=t.getCanvas(),n=e.width,a=e.height,s=t.getLayout(),i=t.getStyle(),o=i.title.fontSize,l=i.label.fontSize,r=t.getLayout().titleLines;let h=0;r.length>0&&(h=(r.length+1)*o);const c=s.axisData,u=c.labels,g=c.values,f=2*l;let x=.15*n,d=.15*n;const y=g.y1.maxWidth;y<x&&(x=y+f),s.yAxis&&s.yAxis.title&&(x+=f);const m=g.y2.maxWidth;m<d&&(d=0===m?0:m+f),s.y2Axis&&s.y2Axis.title&&m>0&&(d+=2*l);let v=.15*n;const p=s.datasetNameData,b=p.isDatasetName,C=p.maxNameWidth;v=b?C<v?C+f:.2*n:0;let A=f+l;const P=n-(x+d+v),T=u.x1,w=T.maxWidth;w>P/T.values.length&&w>f&&(A+=.7*w),s.xAxis&&s.xAxis.title&&(A+=f);const M={x,y:h,width:n-(x+d+v),height:a-(h+A),yAxisRight:d};t.layout={...s,graphPosition:M}}(t);const e=t.getLayout();(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().title,s=t.getCanvas().width,i=n.graphPosition.y;let o=n.titleLines;if(e.textAlign="center",o){const t=a.fontSize;e.font="bold "+t+"px "+a.fontFamily;let n=s/2,l=i/2+t/2;o.length>1&&(l=t);for(let a=0;a<o.length;a++){const s=o[a];e.beginPath(),e.fillText(s,n,l),e.closePath(),l+=t}}})(t),(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().label,s=e.canvas,i=s.width,o=s.height,l=a.fontSize;e.font=l+"px "+a.fontFamily;const r=n.graphPosition,h=r.x,c=r.y,u=r.width,f=r.height,x=.2*i,d=o-c,y=h+u+r.yAxisRight+l,m=n.datasetNameData.total,v=t.getData();let p=!1;if(1===v.length){const t=v[0];"bar"===t.type&&t.names.length>1&&(p=!0)}if(v.length>1||!n.hasAxisData||p){let t=c+l/2;for(let n=0;n<v.length;n++){const a=v[n];if(a){let n=a.labels;const s=a.type;let i=a.colors;if(["line","scatter","bar"].includes(s))if("bar"===s){n=a.names;const t=a.categories;i=Array.from(t.values())[0].colors}else{n=[a.name];const t=a.design.color;i=Array.isArray(t)?t:[t]}if(n){let a=2*l;m*(2*l)>=f+l/2&&(a=Math.round(d/m));for(let o=0;o<n.length;o++){const r=g[o].code;let h=n[o];const c=e.measureText(h).width;if(c+a>x&&h.length>3){const t=c/h.length;b=h,C=Math.floor((x-2*l)/t),h=b.length>C?b.substr(0,C)+"...":b}const u=(i?"bar"===s?i[o][0]:i[o]:null)||r;u&&(e.fillStyle=u);const f=y+l,d=t;e.beginPath(),e.arc(y,t,l/2,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="black",e.textAlign="start",e.textBaseline="middle",e.fillText(h,f,d),t+=a}}}}}var b,C})(t),e.hasAxisData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition;e.beginPath(),e.rect(n.x+1,n.y,n.width-2,n.height),e.stroke(),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=e.width,o=e.height,l=e.x,r=e.y,h=s.fontSize;n.font=h+"px "+s.fontFamily,n.textBaseline="hanging";let c=0,u=r+o;const g=a.axisData.labels;for(let t in g){const e=g[t],a=e.values;if(e.isAllNumbers){const t=e.tickData;a.sort(((t,e)=>t-e));let s=t.range;if(s){const e=s[0],a=s[1],g=t.interval;let f=t.count,x=i/f;x<1&&(x=1);let d=0;const y=n.measureText(a).width;let m=1;y>x&&(m+=Math.round(y/x)),n.textAlign="center";for(let t=0;t<=f;t+=m){d=e+g*t,c=l+x*t,n.measureText(d).width;const a=c,s=u+h;n.beginPath(),n.moveTo(c,r),n.lineTo(c,r+o+h/2),n.stroke(),n.beginPath(),n.fillText(d,a,s)}}}else{const t=e.maxWidth;let s=i/a.length;s<1&&(s=1);let o=1;t/2>s&&(o+=Math.round(t/2/s));for(var f=0;f<a.length;f+=o){c=l+(s/2+s*f);const e=a[f];let i=c;const o=u+h;n.beginPath(),n.textAlign="center";let r=0;t>s&&(r=-40,i=c,n.textAlign="end",n.textBaseline="middle");let g=r*(Math.PI/180);n.save(),n.translate(i,o),n.rotate(g),n.fillText(e,0,0),n.restore()}}}n.textAlign="start",n.textBaseline="alphabetic"}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=e.width,o=e.height,l=e.x,r=e.y,h=s.fontSize;n.font=h+"px "+s.fontFamily;let c=l,u=r+o;const g=a.axisData,f=(g.direction,g.values);for(let t in f){const e=f[t],a=e.values;if(console.log(t+": ",e.isAllNumbers,a,e.tickData,e.range),e.isAllNumbers){const s=e.tickData;a.sort(((t,e)=>t-e));let g=e.range;if(g){const e=g[0],a=s.interval;let f=s.count,x=o/f;x<1&&(x=1);let d=0,y=1;h>x&&(y+=Math.round(h/x));for(let s=0;s<=f;s+=y){d=e+a*s,u=r+o-x*s;const g=n.measureText(d).width,f="y2"===t?c+i+h:c-g-h,y=u+Math.floor(h/2);n.beginPath(),n.strokeStyle="black","y2"===t?(n.moveTo(l+i,u),n.lineTo(l+i+h/2,u)):(n.moveTo(l+i,u),n.lineTo(l-h/2,u)),n.stroke(),n.beginPath(),n.fillText(d,f,y)}}}else{let e=o/a.length;e<1&&(e=1);let s=1;h>e&&(s+=Math.round(h/e));for(var x=0;x<a.length;x+=s){u=r+o-(e/2+e*x);const s=a[x],l="y2"===t?c+i+h:c-h,g=u;n.beginPath(),n.textAlign="y2"===t?"start":"end",n.textBaseline="middle",n.fillText(s,l,g),n.textAlign="start",n.textBaseline="alphabetic"}}}}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=n.canvas.height,o=e.width,l=e.height,r=e.x,h=e.y,c=e.yAxisRight;let u=a.yAxis,g=a.y2Axis,f=a.xAxis;n.textAlign="center";const x=s.fontSize;if(n.font=x+"px "+s.fontFamily,u){let t=u.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g&&c>0){let t=g.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(r+o+c-x,h+l/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(f){let t=f.title;t&&(n.beginPath(),n.fillText(t,r+o/2,i-x/2))}}(t,n)})(t),e.hasPieData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition,a=n.x,s=n.y,i=n.width,o=u(i,n.height),l=a+i/2,r=s+o;e.beginPath(),e.arc(l,r,o,0,2*Math.PI),e.stroke()})(t)};function m(t,e,n){if(!n)return{values:t,colors:e};const a=[],s=[],i=[],o=[];for(let n=0;n<t.length;n++){const l=t[n],r=e[n];l>=0?(a.push(l),s.push(r)):(i.push(l),o.push(r))}return{values:[...a,...i],colors:[...s,...o]}}const v=(t,e,n,a)=>{const i=t.getCtx(),o=t.getLayout();if(e&&a){const r="hr"===a.direction,u=e.values,f=e.colors,x=o.axisData,d=x.values[e.yAxis],y=x.labels[e.xAxis],v=d.isAllNumbers,p=y.isAllNumbers,b=o.graphPosition,C=b.x,A=b.y,P=b.width,T=b.height;let w=r?y.range:d.range;const M=w[0]<0?0:w[0],D=w[1],S=a.maxBarPerCategory,L=a.categories,N=Array.from(L.keys()),F=N.indexOf(n),k=r?T/N.length:P/N.length,W=k/(S+1),z=(w?r?h(t,M):c(t,M):null)||(r?C:A+T);if(r){const e=W;let n=A+T-(k*F+e/2);for(var l=0;l<u.length;l++){const a=m(u[l],f[l],p),r=a.values,c=a.colors;let x=z,d=0;for(let a=0;a<r.length;a++){const u=r[a],f=p?u+d:u,y=f>D?D:f,m=o.customColorsIndex,v=g[m+l].code,b=c&&c[a]?c[a]:v,A=h(t,y);if(A>=C){const t=A-x;x&&A&&(b&&(i.fillStyle=b),i.beginPath(),i.rect(x,n-e,t,e),i.fill())}if(x=x<A?z:A,p){const t=r[a+1],e=!!t&&s(y,t);x=e?z:A,e?d=0:d+=f}}n-=e}}else{const e=W;let n=C+(k*F+e/2);for(l=0;l<u.length;l++){const a=m(u[l],f[l],v),r=a.values,h=a.colors;let x=z,d=0;for(let a=0;a<r.length;a++){const u=r[a],f=v?u+d:u;let y=f>D?D:f;const m=o.customColorsIndex,p=g[m+l].code,b=h&&h[a]?h[a]:p,C=c(t,y),P=x-C;if(A+T>=C&&x&&C&&(b&&(i.fillStyle=b),i.beginPath(),i.rect(n,C,e,P),i.fill()),v){const t=r[a+1],e=!!t&&s(y,t);x=e?z:C,e?d=0:d+=f}}n+=e}}}};let p=null,b=!1,C=!1,A=null;const P=(t,e,a,s,i)=>{const o=e.xAxis?e.xAxis:"x1",l=t.getCtx();l.lineWidth=s,l.lineCap="round",((t,e,a)=>{const s=t.getCtx(),i=t.getLayout();if(!i.isBarChart){const t=i.axisData.labels[a].range,o=t?t[0]:null,l=t?t[1]:null;if(e){if(b){const t={x:o,y:n(o,p.x,p.y,e.x,e.y)};newPos&&(s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(e.x,e.y)),C=!0}A=e,b=!1}else if(p=e,b=!0,C||A){const t={x:l,y:n(l,A.x,A.y,e.x,e.y)};newPos&&s.lineTo(t.x,t.y),C=!1}}})(t,i,o),i&&("start"===a?(l.beginPath(),l.moveTo(i.x,i.y)):(l.lineTo(i.x,i.y),l.stroke(),l.closePath(),l.beginPath(),l.moveTo(i.x,i.y))),"end"===a&&(p=null,b=!1,C=!1,A=null,l.stroke(),l.closePath())},T=(t,e,n)=>{const a=t.getCtx();n&&(a.beginPath(),a.arc(n.x,n.y,e,0,2*Math.PI),a.stroke(),a.fill(),a.closePath())},w=(t,e,n,a)=>{const s=t.getLayout().graphPosition,o=s.x,l=s.y,r=s.width,h=u(r,s.height),c=o+r/2,g=l+h,f=i(n,h,{x:c,y:g}),x={x:c,y:g},d=i(a,h,{x:c,y:g}),y=Math.PI/180,m=n*y,v=a*y;e.beginPath(),e.strokeStyle="white",e.lineWidth=4,e.arc(x.x,x.y,h,m,v),e.moveTo(f.x,f.y),e.lineTo(x.x,x.y),e.lineTo(d.x,d.y),e.stroke(),e.fill(),e.closePath()},M=(t,e,n)=>{const a=t.getCtx(),s=t.getLayout(),i=s.customColorsIndex;if("bars"===e){const e=n.categories,a=n.maxBarPerCategory,l=Array.from(e.keys());for(var o=0;o<l.length;o++){const a=l[o],s=e.get(a);v(t,s,a,n)}a&&(s.customColorsIndex=i+a)}else if("pie"===e){const e=t.getTempCanvas();e.width=a.canvas.width,e.height=a.canvas.height;const i=e.getContext("2d"),l=s.graphPosition,r=l.x,h=l.y,c=l.width,u=l.height,f=Math.min(c,u)/2,x=n.values,d=n.colors,y=n.totalValues;if(x){let e=-90,n=e;for(o=0;o<x.length;o++){const a=g[o].code,s=(d?d[o]:null)||a;s&&(i.fillStyle=s);const l=x[o];if(!isNaN(l)){e+=l/y*360;const a=e;w(t,i,n,a),n=a}}}const m=c/2,v=u/2,p=(n.hole?n.hole:0)*f;i.globalCompositeOperation="destination-out",i.globalAlpha=1,i.beginPath(),i.arc(r+m,h+v,p,0,2*Math.PI),i.fill(),i.globalCompositeOperation="source-over",a.drawImage(e,0,0)}else if(n){const s=n.yAxis?n.yAxis:"y1",i=n.xAxis?n.xAxis:"x1",l="hr"===n.direction,h=n.design.color,c=n.design.size;a.fillStyle=h,a.strokeStyle=h;const u=l?n.values:n.labels,g=l?n.labels:n.values;if(u)for(o=0;o<u.length;o++){let l=u[o],f=g[o];const x=Array.isArray(h)?h[o]:h,d=Array.isArray(c)?c[o]:c,y=0===o?"start":o===u.length-1?"end":"";if(f||0===f){const o=r(t,l,f,s,i);if("arcs"===e);else if("lines"===e)P(t,n,y,d,o);else if("points"===e){const e=n.design.line,s=e&&e.color?e.color:x,i=e&&e.size?e.size:0;a.fillStyle=x,a.strokeStyle=s,a.lineWidth=i,T(t,d,o)}}else a.stroke(),a.closePath()}}},D=(t,e)=>{e&&M(t,"points",e)},S=(t,e)=>{e&&M(t,"bars",e)},L=(t,e)=>{e&&M(t,"lines",e)},N=(t,e)=>{e&&M(t,"pie",e)};function F(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.targetCanvas=document.createElement("canvas"),this.canvas=document.createElement("canvas"),this.canvasCopy=document.createElement("canvas"),this.tempCanvas=document.createElement("canvas"),this.setData=function(t){this.data=[...t]},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),a=t.getCtx(),s=t.getStyle().title,i=n.width,o=e.split(" ");let l=[],r=o[0];const h=s.fontSize;a.font=s.fontWeight+" "+h+"px "+s.fontFamily;for(let t=1;t<o.length;t++){const e=r+" "+o[t];a.measureText(e).width+h<i?r=e:(a.measureText(r).width,l.push(r),r=o[t])}return l.push(r),l}(this,e),t.customColorsIndex=0,this.layout={...t}}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},a={fontFamily:"Arial"};return e<600?(n.fontSize=16,a.fontSize=12):e<1200?(n.fontSize=20,a.fontSize=14):(n.fontSize=24,a.fontSize=18),{title:n,label:a}})(this)},this.getStyle=function(){return this.style},this.setCanvas=function(t,e){const n=this.getCanvas();n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.updateCanvasCopy=function(){const t=this.getCanvas(),e=this.getCanvasCopy();e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),this.canvasCopy=e},this.getCanvasCopy=function(){return this.canvasCopy},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTempCanvas=function(){return this.tempCanvas},this.getTarget=function(){return this.target},this.getTargetCanvas=function(){return this.targetCanvas},this.updateTargetCanvas=function(){const t=this.getCanvasCopy(),e=this.getTargetCanvas(),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0)},this.addCanvasToTarget=function(){const t=this.getTargetCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0);const e=this;var n,a,s,i;a="mousemove",s=function(t){const n=function(t){if(t){const e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}return null}(t);((t,e)=>{if(t&&e){t.getCtx();const e=t.getLayout();t.updateTargetCanvas(),e.firstDataType}})(e,n)},i="touchend",(n=t)&&"object"==typeof n&&(n.addEventListener?(d(n,a,s)||n.addEventListener(a,s,!1),i&&!d(n,i,s)&&n.addEventListener(i,s,!1)):n.attachEvent&&(d(n,a,s)||n.attachEvent("on"+a,s),i&&!d(n,i,s)&&n.attachEvent("on"+i,s))),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}F.prototype.plot=function(t,e){const n=function(t,e){const n=t.getTarget(),a=e.width,s=e.height;let i=0,o=0;return n&&(i=Math.max(n.offsetWidth,n.offsetHeight),o=.6*i),(a||s)&&(i=a,o=s),{width:i,height:o}}(this,e);this.setCanvas(n.width,n.height),this.setStyle(),this.setData(t),this.setLayout(e),y(this),(t=>{const e=t.getCtx(),n=t.getData();for(let a=0;a<n.length;a++){const s=n[a],i=s.type;e.lineJoin="round",i&&("line"===i?L(t,s):"scatter"===i?D(t,s):"bar"===i?S(t,s):"pie"===i&&N(t,s))}})(this),this.updateCanvasCopy(),this.addCanvasToTarget()},DataVision=F})()})();