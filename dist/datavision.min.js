var DataVision;(()=>{"use strict";var t={d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function a(t,e,a,n,o){return e===n?a:a+(t-e)*(o-a)/(n-e)}function n(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0!==e.length)return{min:Math.min(...e),max:Math.max(...e)}}function o(t,e){const a=.85*t,n=.65*e;return{x:.75*(t-a),y:(e-n)/2,width:a,height:n}}function l(t,e){const a=t[0],n=t[1],o=Math.abs(n-a),l=s(t,e);let r=Math.round(o/l);return a+r*l<n&&r++,r}function r(){let t=null,e=null;if(layout){const a=7,n=layout.xAxis;n&&n.range&&(t=c(n.range,a));const o=10,l=layout.yAxis;l&&l.range&&(e=c(l.range,o))}if(data&&(!t||!e)){let a=t,o=e;for(let l=0;l<data.length;l++){const r=data[l],i=r.x,s=r.y;if(!t){const t=n(i);t&&(a=a?[Math.min(a[0],t.min),Math.max(a[1],t.max)]:[t.min,t.max])}if(!e){const t=n(s);t&&(o=o?[Math.min(o[0],t.min),Math.max(o[1],t.max)]:[t.min,t.max])}}a&&(t=[Math.round(a[0]),Math.round(a[1])]),o&&(e=[Math.round(o[0]),Math.round(o[1])])}layout.ranges={xRange:t,yRange:e}}function i(){let t=null,e=1,a=new Map;if(layout){const e=10,a=layout.yAxis;a&&a.range&&(t=c(a.range,e))}if(data){let l=t;const r=[...data],i=r.length;for(let s=0;s<i;s++){const i=r[s];if("bar"===i.type){const t=i.x,n=i.y,l=i.barColors?i.barColors:[];for(var o=0;o<t.length;o++){const r=t[o],i=n[o],s=l[o];let c=null,h=null;if(a.has(r)){const t=a.get(r);c=[...t.yValues,i],h=[...t.barColors,s]}else c=[i],h=[s];c&&c.length>e&&(e=c.length),a.set(r,{yValues:c,barColors:h})}i.type=null}if(!t){const t=n(y);t&&(l=l?[Math.min(l[0],t.min),Math.max(l[1],t.max)]:[t.min,t.max])}}l&&(t=[Math.round(l[0]),Math.round(l[1])])}layout.ranges={yRange:t};const l={type:"bar",yRange:t,barCategories:a,categoryBarMax:e};layout.barData=l,data.splice(0,1,l)}function s(t,e){const a=t[0],n=t[1],o=Math.abs(n-a)/e,l=o%100,r=[1,2,5,10,20,50,100].filter((t=>t>=l))[0];return o-l+r}function c(t,e){let a=t[0],n=t[1];a>=10?a=10*Math.floor(a/10):a>=5?a=5*Math.floor(a/5):a>=2?a=2*Math.floor(a/2):a>=0?a=0:a>10?a=Math.floor(a):a<=-10&&(a=10*Math.floor(a/10));const o=s([a,n],e);return n=a+l([a,n],e)*o,[a,n]}function h(t,e){const a=t.canvas,n=o(a.width,a.height),l=layout.ranges,r=c(l.xRange,7),i=r[0],s=r[1],h=s-i,u=c(l.yRange,10),y=u[0],g=u[1],d=g-y;if(e.x>=i&&e.x<=s&&e.y>=y&&e.y<=g){const t=(e.x-i)/h,a=(e.y-y)/d;return{x:n.x+t*n.width,y:n.y+n.height-a*n.height}}return null}function u(t,e){const a=t.canvas,n=o(a.width,a.height),l=c(layout.ranges.yRange,10),r=l[0],i=l[1];if(e>=r&&e<=i){const t=(e-r)/(i-r);return n.y+n.height-t*n.height}return null}t.r(e),t.d(e,{default:()=>F});const g=t=>{const e=t.canvas,a=o(e.width,e.height);t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.stroke(),function(t,e){const a=e.width,n=e.height,o=e.x,r=e.y,i=data[0]?data[0].type:null,h=layout.ranges,u=layout.fontSize;let y=o,g=r+n;if("bar"===i){const e=layout.barData.barCategories,n=Array.from(e.keys()),o=a/n.length;for(var d=0;d<n.length;d++){y+=0===d?o/2:o;const e=n[d],a=y-t.measureText(e).width/2,l=g+2*u;t.beginPath(),t.fillText(e,a,l)}}else{let e=h.xRange;if(e){const o=7;e=c(e,o);const i=e[0],h=s(e,o);let d=l(e,o),f=a/d,x=i;for(let e=0;e<d;e++){const e=y-t.measureText(x).width/2,a=g+2*u;t.beginPath(),t.moveTo(y,r),t.lineTo(y,r+n),t.stroke(),t.beginPath(),t.fillText(x,e,a),x+=h,y+=f}}}}(t,a),function(t,e){const a=e.width,n=e.height,o=e.x,r=e.y;let i=layout.ranges.yRange;const h=layout.fontSize;let u=o,y=r+n;if(i){const e=10;i=c(i,e);const r=i[0],g=s(i,e);let d=l(i,e),f=n/d,x=r;for(let e=0;e<d;e++){const e=u-t.measureText(x).width-h,n=y+Math.floor(h/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(o+a,y),t.lineTo(o,y),t.stroke(),t.beginPath(),t.fillText(x,e,n),x+=g,y-=f}}}(t,a),function(t,e){const a=t.canvas.height,n=e.width,o=e.height,l=e.x,r=e.y;let i=layout.title,s=layout.yAxis,c=layout.xAxis;if(t.textAlign="center",i){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(i,l+n/2,r/2+e/2)}if(s){let e=s.title;if(e){t.beginPath();let a=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(18,r+o/2),t.rotate(a),t.fillText(e,0,0),t.restore()}}if(c){let e=c.title;e&&(t.beginPath(),t.font="18px Arial",t.fillText(e,l+n/2,a-18))}}(t,a)},d=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}],f=(t,e,a,n)=>{if(e&&n){const l=e.yValues,r=e.barColors,i=layout.graphPosition,s=i.x,h=i.width,y=c(n.yRange,10),g=n.categoryBarMax,f=n.barCategories,x=Array.from(f.keys()),m=x.indexOf(a),b=h/x.length,P=b/(g+1);let p=s+(b*m+P/2);const C=u(t,0)||u(t,y[0]);for(var o=0;o<l.length;o++){const e=l[o],a=layout.customColorsIndex,n=d[a+o].code,i=r[o]?r[o]:n,s=u(t,e),c=C-s;C&&s&&(i&&(t.fillStyle=i),t.beginPath(),t.rect(p,s,P,c),t.fill()),p+=P}}};let x=null,m=!1,b=!1,P=null;const p=(t,e,n,o)=>{let l=null;if(layout.isBarChart){const e=u(t,o.y);l={x:o.x,y:e}}else l=h(t,o);t.lineWidth=n,((t,e,n,o)=>{if(!layout.isBarChart){const n=layout.ranges.xRange,l=n[0],r=n[1];if(e){if(m){const n=h(t,{x:l,y:a(l,x.x,x.y,o.x,o.y)});n&&(t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(e.x,e.y)),b=!0}P=o,m=!1}else if(x=o,m=!0,b||P){const e=h(t,{x:r,y:a(r,P.x,P.y,o.x,o.y)});e&&t.lineTo(e.x,e.y),b=!1}}})(t,l,0,o),l&&("start"===e?(t.beginPath(),t.arc(l.x,l.y,n,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(l.x,l.y)):(t.lineTo(l.x,l.y),t.stroke(),t.closePath(),t.beginPath(),t.arc(l.x,l.y,n,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(l.x,l.y))),"end"===e&&(x=null,m=!1,b=!1,P=null,t.stroke(),t.closePath())},C=(t,e,a)=>{const n=h(t,a);n&&(t.beginPath(),t.arc(n.x,n.y,e,0,2*Math.PI),t.fill(),t.closePath())},M=(t,e,a)=>{const n=layout.customColorsIndex;if(console.log("index: ",n),"bars"===e){if(layout.isBarChart){const e=a.barCategories,l=a.categoryBarMax,r=Array.from(e.keys()),i=layout.graphPosition,s=i.x,c=[],h=i.width/r.length;let u=s+h/2;for(var o=0;o<r.length;o++){const n=r[o],l=e.get(n);f(t,l,n,a),c.push(u),u+=h}l&&(layout.customColorsIndex=n+l),layout.barData.categoryMidPoints=c}}else if(a){const l=d[n].code;let r=a.fillColor,i=a.strokeColor;i||(i=l),r||(r=l),layout.customColorsIndex=n+1,t.fillStyle=r,t.strokeStyle=i;const s=layout.isBarChart?layout.barData.categoryMidPoints:a.x,c=a.y;for(o=0;o<s.length;o++){const a=s[o],n=c[o],l=4,r=0===o?"start":o===s.length-1?"end":"";if(n||0===n){const o={x:a,y:n};"arcs"===e||("lines"===e?p(t,r,l,o):"points"===e&&C(t,l,o))}else t.stroke(),t.closePath()}}},v=(t,e)=>{e&&M(t,"points",e)},T=(t,e)=>{e&&M(t,"bars",e)},w=(t,e)=>{e&&M(t,"lines",e)},A=t=>{for(let e=0;e<data.length;e++){const a=data[e],n=a.type;t.lineJoin="round",n&&("line"===n?w(t,a):"scatter"===n?v(t,a):"bar"===n&&T(t,a))}};function B(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}B.prototype.plot=function(t,e){const a=this.canvas;a.width=700,a.height=525;const n=a.getContext("2d");n.font="13px Arial",e.fontSize=13,e.customColorsIndex=0,e.graphPosition=o(700,525),e.isBarChart=!1,"bar"===(t[0]?t[0].type:null)?(e.isBarChart=!0,i()):r(),g(n),A(n),this.addCanvasToTarget()};DataVision=B})()})();