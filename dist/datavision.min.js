var DataVision;(()=>{"use strict";var t={d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function a(t,e,a,o,n){return e===o?a:a+(t-e)*(n-a)/(o-e)}function o(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}function n(t,e,a={x:0,y:0}){const o=Math.PI/180*t;return{x:a.x+e*Math.cos(o),y:a.y+e*Math.sin(o)}}function l(t,e){let a=t,o=e,n=0,l=0;return layout.isPieChart?(a=.65*t,o=.8*e,l=e-o):(a=.85*t,o=.65*e,n=.75*(t-a),l=(e-o)/2),{x:n,y:l,width:a,height:o}}function i(t,e){if(!t)return null;const a=t[0],o=t[1],n=Math.abs(o-a),l=r(t,e);let i=Math.round(n/l);return a+i*l<o&&i++,i}function r(t,e){if(!t)return null;const a=t[0],o=t[1],n=Math.abs(o-a)/e,l=n%100,i=[1,2,5,10,20,50,100].filter((t=>t>=l))[0];return n-l+i}function s(t,e){if(!t)return null;let a=t[0],o=t[1];a>=10?a=10*Math.floor(a/10):a>=5?a=5*Math.floor(a/5):a>=2?a=2*Math.floor(a/2):a>=0?a=0:a>10?a=Math.floor(a):a<=-10&&(a=10*Math.floor(a/10));const n=r([a,o],e);return o=a+i([a,o],e)*n,[a,o]}function h(t,e){const a=t.canvas,o=l(a.width,a.height),n=layout.ranges,i=s(n.xRange,7),r=i?i[0]:null,h=i?i[1]:null,c=h-r,u=s(n.yRange,10),y=u?u[0]:null,g=u?u[1]:null,f=g-y;if(e.x>=r&&e.x<=h&&e.y>=y&&e.y<=g){const t=(e.x-r)/c,a=(e.y-y)/f;return{x:o.x+t*o.width,y:o.y+o.height-a*o.height}}return null}function c(t,e){const a=t.canvas,o=l(a.width,a.height),n=s(layout.ranges.yRange,10),i=n[0],r=n[1];if(e>=i&&e<=r){const t=(e-i)/(r-i);return o.y+o.height-t*o.height}return null}t.r(e),t.d(e,{default:()=>B});const u=t=>{const e=t.canvas.width,a=layout.graphPosition.y;let o=layout.title;if(t.textAlign="center",o){t.beginPath();const n=20;t.font=n+"px Arial",t.fillText(o,e/2,a/2+n/2),t.closePath()}},y=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}],g=(t,e)=>{["line","scatter","bar"].includes(e)?("bar"===e?(layout.isBarChart=!0,function(){let t=null,e=1,a=new Map;if(layout){const e=10,a=layout.yAxis;a&&a.range&&(t=s(a.range,e))}if(data){let l=t;const i=[...data],r=i.length;for(let s=0;s<r;s++){const r=i[s],h=r.x,c=r.y;if("bar"===r.type){const t=r.barColors?r.barColors:[];for(var n=0;n<h.length;n++){const o=h[n],l=c[n],i=t[n];let r=null,s=null;if(a.has(o)){const t=a.get(o);r=[...t.yValues,l],s=[...t.barColors,i]}else r=[l],s=[i];r&&r.length>e&&(e=r.length),a.set(o,{yValues:r,barColors:s})}r.type=null}if(!t){const t=o(c);t&&(l=l?[Math.min(l[0],t.min),Math.max(l[1],t.max)]:[t.min,t.max])}}l&&(t=[Math.round(l[0]),Math.round(l[1])])}layout.ranges={yRange:t};const l={type:"bar",yRange:t,barCategories:a,categoryBarMax:e};layout.barData=l,data.splice(0,1,l)}()):function(){let t=null,e=null;if(layout){const a=7,o=layout.xAxis;o&&o.range&&(t=s(o.range,a));const n=10,l=layout.yAxis;l&&l.range&&(e=s(l.range,n))}if(data&&(!t||!e)){let a=t,n=e;for(let l=0;l<data.length;l++){const i=data[l],r=i.x,s=i.y;if(!t){const t=o(r);t&&(a=a?[Math.min(a[0],t.min),Math.max(a[1],t.max)]:[t.min,t.max])}if(!e){const t=o(s);t&&(n=n?[Math.min(n[0],t.min),Math.max(n[1],t.max)]:[t.min,t.max])}}a&&(t=[Math.round(a[0]),Math.round(a[1])]),n&&(e=[Math.round(n[0]),Math.round(n[1])])}layout.ranges={xRange:t,yRange:e}}(),(t=>{const e=layout.graphPosition;t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.stroke(),function(t,e){const a=e.width,o=e.height,n=e.x,l=e.y,h=data[0]?data[0].type:null,c=layout.ranges,u=layout.fontSize;t.font=u+"px Arial";let y=n,g=l+o;if("bar"===h){const e=layout.barData.barCategories,o=Array.from(e.keys()),n=a/o.length;for(var f=0;f<o.length;f++){y+=0===f?n/2:n;const e=o[f],a=y-t.measureText(e).width/2,l=g+2*u;t.beginPath(),t.fillText(e,a,l)}}else{let e=c.xRange;if(e){const n=7;if(e=s(e,n),e){const s=e[0],h=r(e,n);let c=i(e,n),f=a/c,d=s;for(let e=0;e<c;e++){const e=y-t.measureText(d).width/2,a=g+2*u;t.beginPath(),t.moveTo(y,l),t.lineTo(y,l+o),t.stroke(),t.beginPath(),t.fillText(d,e,a),d+=h,y+=f}}}}}(t,e),function(t,e){const a=e.width,o=e.height,n=e.x,l=e.y;let h=layout.ranges.yRange;const c=layout.fontSize;t.font=c+"px Arial";let u=n,y=l+o;if(h){const e=10;if(h=s(h,e),h){const l=h[0],s=r(h,e);let g=i(h,e),f=o/g,d=l;for(let e=0;e<g;e++){const e=u-t.measureText(d).width-c,o=y+Math.floor(c/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(n+a,y),t.lineTo(n,y),t.stroke(),t.beginPath(),t.fillText(d,e,o),d+=s,y-=f}}}}(t,e),u(t),function(t,e){const a=t.canvas.height,o=e.width,n=e.height,l=e.x,i=e.y;let r=layout.yAxis,s=layout.xAxis;if(t.textAlign="center",r){let e=r.title;if(e){t.beginPath();let a=Math.PI/180*-90;t.font="15px Arial",t.save(),t.translate(15,i+n/2),t.rotate(a),t.fillText(e,0,0),t.restore()}}if(s){let e=s.title;e&&(t.beginPath(),t.font="15px Arial",t.fillText(e,l+o/2,a-15))}}(t,e)})(t)):"pie"===e&&(layout.isPieChart=!0,function(){let t=new Map,e=0;if(data){const o=[...data],n=o.length;for(let l=0;l<n;l++){const n=o[l],i=n.labels,r=n.values;if(i&&r){if("pie"===n.type){const o=n.pieColors?n.pieColors:[];for(var a=0;a<i.length;a++){const n=i[a],l=r[a],s=o[a];if(t.has(n)){const a=t.get(n).value;!isNaN(a)&&(e-=a)}!isNaN(l)&&(e+=l),t.set(n,{value:l,pieColor:s})}n.type=null}}else console.error("Pie chart not defined properly!")}}const o={type:"pie",pieCategories:t,valuesLength:e};layout.pieData=o;const n=layout.graphPosition,l=n.width,i=n.height;layout.arcRadius=Math.round(.5*Math.min(l,i)),data.splice(0,1,o)}(),(t=>{const e=layout.graphPosition,a=e.x,o=e.y,n=e.width,l=(e.height,layout.arcRadius),i=a+n/2,r=o+l;console.log(a,n/2,t.canvas.width),t.beginPath(),t.strokeStyle="white",t.arc(i,r,l,0,2*Math.PI),t.stroke(),u(t),function(t,e){const a=t.canvas,o=(a.width,a.height),n=layout.fontSize;if(t.font=n+"px Arial",layout.isPieChart){const a=data[0],l=e.x,i=e.y,r=e.width,s=e.height,h=o-i,c=l+r+2*n;let u=i;if(a){const e=a.pieCategories;if(e){const a=Array.from(e.keys());let o=2*n;a*(2*n)>=s&&(o=Math.round(h/a.length));for(let l=0;l<a.length;l++){const i=y[l].code,r=a[l],s=e.get(r),h=s.pieColor||i;h&&(t.fillStyle=h);const g=s.value;if(!isNaN(g)){t.measureText(r).width;const e=c+n,a=u;t.beginPath(),t.arc(c,u,n/2,0,2*Math.PI),t.fill(),t.beginPath(),t.fillStyle="black",t.textAlign="start",t.textBaseline="middle",t.fillText(r,e,a),u+=o}}}}}}(t,e)})(t))},f=(t,e,a,o)=>{if(e&&o){const l=e.yValues,i=e.barColors,r=layout.graphPosition,h=r.x,u=r.width,g=s(o.yRange,10),f=o.categoryBarMax,d=o.barCategories,x=Array.from(d.keys()),m=x.indexOf(a),p=u/x.length,P=p/(f+1);let b=h+(p*m+P/2);const C=c(t,0)||c(t,g[0]);for(var n=0;n<l.length;n++){const e=l[n],a=layout.customColorsIndex,o=y[a+n].code,r=i[n]?i[n]:o,s=c(t,e),h=C-s;C&&s&&(r&&(t.fillStyle=r),t.beginPath(),t.rect(b,s,P,h),t.fill()),b+=P}}};let d=null,x=!1,m=!1,p=null;const P=(t,e,o,n)=>{let l=null;if(layout.isBarChart){const e=c(t,n.y);l={x:n.x,y:e}}else l=h(t,n);t.lineWidth=o,((t,e,o,n)=>{if(!layout.isBarChart){const o=layout.ranges.xRange,l=o?o[0]:null,i=o?o[1]:null;if(e){if(x){const o=h(t,{x:l,y:a(l,d.x,d.y,n.x,n.y)});o&&(t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(e.x,e.y)),m=!0}p=n,x=!1}else if(d=n,x=!0,m||p){const e=h(t,{x:i,y:a(i,p.x,p.y,n.x,n.y)});e&&t.lineTo(e.x,e.y),m=!1}}})(t,l,0,n),l&&("start"===e?(t.beginPath(),t.arc(l.x,l.y,o,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(l.x,l.y)):(t.lineTo(l.x,l.y),t.stroke(),t.closePath(),t.beginPath(),t.arc(l.x,l.y,o,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(l.x,l.y))),"end"===e&&(d=null,x=!1,m=!1,p=null,t.stroke(),t.closePath())},b=(t,e,a)=>{const o=h(t,a);o&&(t.beginPath(),t.arc(o.x,o.y,e,0,2*Math.PI),t.fill(),t.closePath())},C=(t,e,a)=>{const o=layout.graphPosition,l=o.x,i=o.y,r=o.width,s=(o.height,layout.arcRadius),h=l+r/2,c=i+s,u=n(e,s,{x:h,y:c}),y={x:h,y:c},g=n(a,s,{x:h,y:c}),f=Math.PI/180,d=e*f,x=a*f;console.log("deg: ",e,a),t.beginPath(),t.strokeStyle="white",t.lineWidth=2,t.arc(y.x,y.y,s,d,x),t.moveTo(u.x,u.y),t.lineTo(y.x,y.y),t.lineTo(g.x,g.y),t.stroke(),t.fill(),t.closePath()},M=(t,e,a)=>{const o=layout.customColorsIndex,n=layout.graphPosition,l=n.x,i=(n.y,n.width);if(n.height,"bars"===e){if(layout.isBarChart){const e=a.barCategories,n=a.categoryBarMax,s=Array.from(e.keys()),h=[],c=i/s.length;let u=l+c/2;for(var r=0;r<s.length;r++){const o=s[r],n=e.get(o);f(t,n,o,a),h.push(u),u+=c}n&&(layout.customColorsIndex=o+n),layout.barData.categoryMidPoints=h}}else if("pie"===e){if(layout.isPieChart){const e=a.pieCategories,o=a.valuesLength;if(e){const a=Array.from(e.keys());let n=-90,l=n;for(r=0;r<a.length;r++){const i=y[r].code,s=a[r],h=e.get(s),c=h.pieColor||i;c&&(t.fillStyle=c);const u=h.value;if(!isNaN(u)){n+=u/o*360;const e=n;C(t,l,e),l=e}}}}}else if(a){const n=y[o].code;let l=a.fillColor,i=a.strokeColor;i||(i=n),l||(l=n),layout.customColorsIndex=o+1,t.fillStyle=l,t.strokeStyle=i;const s=layout.isBarChart?layout.barData.categoryMidPoints:a.x,h=a.y;if(s)for(r=0;r<s.length;r++){const a=s[r],o=h[r],n=4,l=0===r?"start":r===s.length-1?"end":"";if(o||0===o){const i={x:a,y:o};"arcs"===e||("lines"===e?P(t,l,n,i):"points"===e&&b(t,n,i))}else t.stroke(),t.closePath()}}},v=(t,e)=>{e&&M(t,"points",e)},w=(t,e)=>{e&&M(t,"bars",e)},T=(t,e)=>{e&&M(t,"lines",e)},A=(t,e)=>{e&&M(t,"pie",e)},k=t=>{for(let e=0;e<data.length;e++){const a=data[e],o=a.type;t.lineJoin="round",o&&("line"===o?T(t,a):"scatter"===o?v(t,a):"bar"===o?w(t,a):"pie"===o&&A(t,a))}};function S(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}S.prototype.plot=function(t,e){const a=this.canvas;a.width=700,a.height=525;const o=a.getContext("2d"),n=t[0]?t[0].type:null;o.font="13px Arial",e.isBarChart="bar"===n,e.isPieChart="pie"===n,e.fontSize=13,e.customColorsIndex=0,e.graphPosition=l(700,525),g(o,n),k(o),this.addCanvasToTarget()};DataVision=S})()})();