var DataVision;(()=>{"use strict";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function n(t,e,n,a,o){return e===a?n:n+(t-e)*(o-n)/(a-e)}function a(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0!==e.length)return{min:Math.min(...e),max:Math.max(...e)}}function o(t,e){const n=.85*t,a=.65*e;return{x:.75*(t-n),y:(e-a)/2,width:n,height:a}}function i(t,e){const n=t[0],a=t[1],o=Math.abs(a-n),i=s(t,e);let l=Math.round(o/i);return n+l*i<a&&l++,l}function l(){let t=null,e=null;if(layout){const n=7,a=layout.xAxis;a&&a.range&&(t=h(a.range,n));const o=10,i=layout.yAxis;i&&i.range&&(e=h(i.range,o))}if(data&&(!t||!e)){let n=t,o=e;for(let i=0;i<data.length;i++){const l=data[i],r=l.x,s=l.y;if(!t){const t=a(r);t&&(n=n?[Math.min(n[0],t.min),Math.max(n[1],t.max)]:[t.min,t.max])}if(!e){const t=a(s);t&&(o=o?[Math.min(o[0],t.min),Math.max(o[1],t.max)]:[t.min,t.max])}}n&&(t=[Math.round(n[0]),Math.round(n[1])]),o&&(e=[Math.round(o[0]),Math.round(o[1])])}layout.ranges={xRange:t,yRange:e}}function r(){let t=null,e=1,n=new Map;if(layout){const e=10,n=layout.yAxis;n&&n.range&&(t=h(n.range,e))}if(data){let i=t;for(let l=0;l<data.length;l++){const r=data[l],s=r.x,h=r.y;for(var o=0;o<s.length;o++){const t=s[o],a=h[o];let i=null;i=n.has(t)?[...n.get(t),a]:[a],i&&i.length>e&&(e=i.length),n.set(t,i)}if(!t){const t=a(h);t&&(i=i?[Math.min(i[0],t.min),Math.max(i[1],t.max)]:[t.min,t.max])}}i&&(t=[Math.round(i[0]),Math.round(i[1])])}layout.ranges={yRange:t,barCategories:n,categoryBarMax:e}}function s(t,e){const n=t[0],a=t[1],o=Math.abs(a-n)/e,i=o%100,l=[1,2,5,10,20,50,100].filter((t=>t>=i))[0];return o-i+l}function h(t,e){let n=t[0],a=t[1];n>=10?n=10*Math.floor(n/10):n>=5?n=5*Math.floor(n/5):n>=2?n=2*Math.floor(n/2):n>=0?n=0:n>10?n=Math.floor(n):n<=-10&&(n=10*Math.floor(n/10));const o=s([n,a],e);return a=n+i([n,a],e)*o,[n,a]}function c(t,e){const n=t.canvas,a=o(n.width,n.height),i=layout.ranges,l=h(i.xRange,7),r=l[0],s=l[1],c=s-r,g=h(i.yRange,10),f=g[0],y=g[1],u=y-f;if(e.x>=r&&e.x<=s&&e.y>=f&&e.y<=y){const t=(e.x-r)/c,n=(e.y-f)/u;return{x:a.x+t*a.width,y:a.y+a.height-n*a.height}}return null}function g(t,e){const n=t.canvas,a=o(n.width,n.height),i=h(layout.ranges.yRange,10),l=i[0],r=i[1];if(e>=l&&e<=r){const t=(e-l)/(r-l);return a.y+a.height-t*a.height}return null}t.r(e),t.d(e,{default:()=>C});const f=t=>{const e=t.canvas,n=o(e.width,e.height);t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.stroke(),function(t,e){const n=e.width,a=e.height,o=e.x,l=e.y,r=data[0]?data[0].type:null,c=layout.ranges,g=layout.fontSize;let f=o,y=l+a;if("bar"===r){const e=c.barCategories,a=Array.from(e.keys()),o=n/a.length;for(var u=0;u<a.length;u++){f+=0===u?o/2:o;const e=a[u],n=f-t.measureText(e).width/2,i=y+2*g;t.beginPath(),t.fillText(e,n,i)}}else{let e=c.xRange;if(e){const o=7;e=h(e,o);const r=e[0],c=s(e,o);let u=i(e,o),x=n/u,d=r;for(let e=0;e<u;e++){const e=f-t.measureText(d).width/2,n=y+2*g;t.beginPath(),t.moveTo(f,l),t.lineTo(f,l+a),t.stroke(),t.beginPath(),t.fillText(d,e,n),d+=c,f+=x}}}}(t,n),function(t,e){const n=e.width,a=e.height,o=e.x,l=e.y;let r=layout.ranges.yRange;const c=layout.fontSize;let g=o,f=l+a;if(r){const e=10;r=h(r,e);const l=r[0],y=s(r,e);let u=i(r,e),x=a/u,d=l;for(let e=0;e<u;e++){const e=g-t.measureText(d).width-c,a=f+Math.floor(c/2);t.beginPath(),t.strokeStyle="gray",t.moveTo(o+n,f),t.lineTo(o,f),t.stroke(),t.beginPath(),t.fillText(d,e,a),d+=y,f-=x}}}(t,n),function(t,e){const n=t.canvas.height,a=e.width,o=e.height,i=e.x,l=e.y;let r=layout.title,s=layout.yAxis,h=layout.xAxis;if(t.textAlign="center",r){t.beginPath();const e=30;t.font=e+"px Arial",t.fillText(r,i+a/2,l/2+e/2)}if(s){let e=s.title;if(e){t.beginPath();let n=Math.PI/180*-90;t.font="18px Arial",t.save(),t.translate(18,l+o/2),t.rotate(n),t.fillText(e,0,0),t.restore()}}if(h){let e=h.title;e&&(t.beginPath(),t.font="18px Arial",t.fillText(e,i+a/2,n-18))}}(t,n)},y=(t,e,n)=>{if(e){const i=t.canvas,l=o(i.width,i.height),r=l.x,s=(l.y,l.width);l.height;let c=layout.ranges;const f=h(c.yRange,10),y=c.categoryBarMax,u=c.barCategories,x=Array.from(u.keys()),d=x.indexOf(n),m=s/x.length,b=m/(y+1);let M=r+(m*d+b/2);const v=g(t,0),P=v||g(t,f[0]);for(var a=0;a<e.length;a++){const n=g(t,e[a]),o=P-n;console.log(f[0],v,P),P&&n&&(t.beginPath(),t.rect(M,n,b,o),t.fill()),M+=b}}};let u=null,x=!1,d=!1,m=null;const b=(t,e,a,o)=>{const i=layout.ranges.xRange,l=i[0],r=i[1],s=c(t,o);if(t.lineWidth=a,s){if(x){const e=c(t,{x:l,y:n(l,u.x,u.y,o.x,o.y)});e&&(t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y)),d=!0}m=o,x=!1}else if(u=o,x=!0,d||m){const e=c(t,{x:r,y:n(r,m.x,m.y,o.x,o.y)});e&&t.lineTo(e.x,e.y),d=!1}s&&("start"===e?(t.beginPath(),t.arc(s.x,s.y,a,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(s.x,s.y)):(t.lineTo(s.x,s.y),t.stroke(),t.closePath(),t.beginPath(),t.arc(s.x,s.y,a,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.moveTo(s.x,s.y))),"end"===e&&(u=null,x=!1,d=!1,m=null,t.stroke(),t.closePath())},M=(t,e,n)=>{const a=c(t,n);a&&(t.beginPath(),t.arc(a.x,a.y,e,0,2*Math.PI),t.fill(),t.closePath())},v=(t,e,n)=>{if("bars"===e){const e=layout.ranges.barCategories,n=Array.from(e.keys());for(var a=0;a<n.length;a++){const o=n[a],i=e.get(o);y(t,i,o)}}else if(n){const o=n.x,i=n.y;for(a=0;a<o.length;a++){const n=o[a],l=i[a],r=4,s=0===a?"start":a===o.length-1?"end":"";if(l||0===l){const a={x:n,y:l};"arcs"===e||("lines"===e?b(t,s,r,a):"points"===e&&M(t,r,a))}else t.stroke(),t.closePath()}}},P=(t,e)=>{e&&v(t,"points",e)},T=(t,e)=>{e&&v(t,"lines",e)},p=t=>{const e="#5570a3";if("bar"===(data[0]?data[0].type:null))t.fillStyle=e,(t=>{v(t,"bars")})(t);else for(let n=0;n<data.length;n++){const a=data[n],o=a.type,i=a.strokeColor?a.strokeColor:e,l=a.fillColor?a.fillColor:i;t.lineJoin="round",t.strokeStyle=i,t.fillStyle=l,o&&("line"===o?T(t,a):"scatter"===o&&P(t,a))}};function w(t){this.createCanvas=function(){return document.createElement("canvas")},this.target=document.getElementById(t),this.canvas=this.createCanvas(),this.addCanvasToTarget=function(){const t=this.createCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.target&&this.target.appendChild(t)}}w.prototype.plot=function(t,e){const n=this.canvas;n.width=700,n.height=525;const a=n.getContext("2d");e.fontSize=13,a.font="13px Arial","bar"===(t[0]?t[0].type:null)?r():l(),f(a),p(a),this.addCanvasToTarget()};DataVision=w})()})();