/*! For license information please see datavision.min.js.LICENSE.txt */
var DataVision;(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};(()=>{function n(t,e,n,a,s){return e===a?n:n+(t-e)*(s-n)/(a-e)}function a(t,e){const n=Math.min(...e),a=Math.max(...e);return t<n?n:t>a?a:t}function s(t,e){return"avg"===t?function(t){return t.reduce(((t,e)=>t+e),0)/t.length}(e):"min"===t?Math.min(...e):"max"===t?Math.max(...e):"count"===t?e.length:function(t){return t.reduce(((t,e)=>t+e),0)}(e)}function i(t){return t?t.every((t=>"number"==typeof t)):null}function l(t){if(Number(t)){if(Number.isInteger(Number(t)))return t;{const e=t.toString().split(".")[1].search(/[^0]/)||1;return t.toFixed(e+1)}}return t}function o(t,e,n={x:0,y:0}){const a=Math.PI/180*t;return{x:n.x+e*Math.cos(a),y:n.y+e*Math.sin(a)}}function r(t){if(i(t)){const e=function(t){if(t){const e=t.filter((t=>"number"==typeof t&&!isNaN(t)));if(0===e.length)return;return{min:Math.min(...e),max:Math.max(...e)}}return null}(t);if(e)return[e.min,e.max]}return[null,null]}function h(t,e,n,a,s){return{x:c(t,e,s),y:u(t,n,a)}}function c(t,e,n){const s=t.getLayout(),i=s.graphPosition,l=i.x,o=i.width;!n&&(n="x1");const r=s.axisData.labels[n];if(r){const n=r.isAllNumbers,s=r.values;if(n)e=function(t,e,n){const s=t.getLayout(),i=s.graphPosition,l=i.x,o=i.width;!n&&(n="x1");const r=s.axisData.labels[n];if(r){const t=r.range;if(t){const n=t[0],s=t[1]-n;return l+(a(e,t)-n)/s*o}}return e}(t,e);else{const t=o/s.length,n=t/2,a=s.indexOf(e);a>=0&&(e=l+(t*a+n))}}return e}function u(t,e,n){const s=t.getLayout(),i=s.graphPosition,l=i.y,o=i.height;!n&&(n="y1");const r=s.axisData.values[n];if(r){const s=r.isAllNumbers,i=r.values;if(s)e=function(t,e,n,s){const i=t.getLayout(),l=i.graphPosition,o=l.y,r=l.height;!n&&(n="y1");const h=i.axisData.values[n];if(h){const t=h.range;if(t){const n=t[0],s=t[1]-n;return o+r-(a(e,t)-n)/s*r}}return e}(t,e,n);else{const t=o/i.length,n=t/2,a=i.indexOf(e);a>=0&&(e=l+o-(t*a+n))}}return e}function g(t,e){let n=Math.round(.5*Math.min(t,e));return n<0&&(n=0),n}t(e);const f=[{name:"Royal Blue",code:"#4169E1"},{name:"Emerald Green",code:"#008000"},{name:"Coral Orange",code:"#FF6B57"},{name:"Crimson Red",code:"#DC143C"},{name:"Lavender Purple",code:"#E6E6FA"},{name:"Tangerine Orange",code:"#FFA500"},{name:"Turquoise Blue",code:"#40E0D0"},{name:"Bubblegum Pink",code:"#FF69B4"},{name:"Lime Green",code:"#00FF00"},{name:"Amethyst Purple",code:"#9966CC"},{name:"Goldenrod Yellow",code:"#DAA520"},{name:"Aqua Blue",code:"#00FFFF"},{name:"Teal Green",code:"#008080"},{name:"Sapphire Blue",code:"#082567"},{name:"Ruby Red",code:"#E0115F"},{name:"Emerald Green",code:"#50C878"},{name:"Golden Yellow",code:"#FFD700"},{name:"Violet Purple",code:"#8A2BE2"},{name:"Sunshine Yellow",code:"#FFD700"},{name:"Plum Purple",code:"#DDA0DD"}];function d(t){if(!t)return{count:0,range:t};const e=t[0],n=t[1];let a=e,s=n,i=5,l=0;if(!isNaN(a)&&!isNaN(s)){let t=0;a<=0&&s>=0?t=Math.max(Math.abs(e)+Math.abs(n))/Math.max(4,1):a<=0?t=Math.abs(a/Math.max(4,1)):a>0&&(t=s/Math.max(4,1)),l=function(t,e){const n=[1,2,4,5,10],a=Math.pow(10,Math.floor(Math.log10(t)));return n.find((e=>e*a>=t))*a}(t);const o=function(t,e){let n=t[0],a=t[1];return n=e*Math.floor(n/e),a=e*Math.ceil(a/e),[n,a]}([a,s],l);a=o[0],s=o[1];const r=s-a;i=Math.round(r/l),i<=1&&(a=0,i=Math.round(s/l))}return{count:i,range:[a,s],interval:l}}function x(t,e,n){if(n.length>0)for(let t=0;t<n.length;t++){const a=n[t];e.push(a)}else for(var a=0;a<t.length;a++)e.push(a)}function y(t,e,n){const a=e||{},s=f[n].code;return!a.color&&(a.color=s),"line"===t&&Array.isArray(a.color)&&(a.color=s),!a.size&&(a.size=3),a}function m(t,e,n){return t._eventHandlers&&t._eventHandlers[e]&&t._eventHandlers[e].includes(n)}function v(t,e){return t.length>e?t.substr(0,e)+"..":t}const b=t=>{!function(t){const e=t.getCtx(),n=t.getLayout(),a=[...t.getData()],o=t.getStyle().label,h=o.fontSize;e.font=h+"px "+o.fontFamily;let c=1,u=0;const g=[],f=[];let m=0;class v{constructor(){this.values=[],this.range=null,this.maxWidth=0,this.tickData=null,this.isAllNumbers=!1}}const b={x1:new v},p={y1:new v,y2:new v},A=["line","scatter","bar"];let C=!1,w=!1,P=null,T=0,S=0;if(a){const t=[...a],n=t.length,o={labels:[],values:[]},r={type:"bar",dataset:[],attributeIsSet:!1},h=new Map,d=[],v=[];let M=!1;for(let a=0;a<n;a++){const n={...t[a]},D=n.yAxis||"y1",N=n.xAxis||"x1",L="y2"===D?p.y2:p.y1,k=b[N],F=n.name,z=n.labels?n.labels:[],W=n.values?n.values:[],E=n.type,I=n.design||{},B=n.operation;0===z.length&&x(W,z,o.labels),0===W.length&&x(z,W,o.values),o.labels=[...z],o.values=[...W];let O=0,R=0;const G={values:new Map,xAxis:N,yAxis:D},H=[],_=[],Y=[],j={...n},V=[],q=[],J=i(z),X=i(W);if(A.includes(E)){const a=z.length>0?z.length:W.length;let i="",o="";for(let u=0;u<a;u++){const g=z[u],f=X?Number(W[u]):W[u]?W[u]:"";let d=g.length>o.length?e.measureText(l(g)).width:null;const x=X&&f<0&&f>10?-10:f;let y=f.length>i.length?e.measureText(l(x)).width:0;if("bar"===E){if(!r.attributeIsSet){for(let e=0;e<t.length;e++){const n=t[e];"bar"===n.type&&("hr"===n.direction&&(r.direction="hr"),"stack"===n.mode&&(r.mode="stack"))}r.attributeIsSet=!0}const i="hr"===r.direction,o=i?g:f,d=i?f:g,x=i?X:J;r.labelIsAllNumbers=x;let m=[o];if(G.values.has(d)&&(m=G.values.get(d),m.push(o)),(x||d.toString().length>0)&&(m.length>c&&(c=m.length),G.values.set(d,m),"hr"===n.direction&&(P="hr"),M=!0),u===a-1){if(i?X:J){let t=Array.from(G.values.keys());t.sort(((t,e)=>t-e));for(let e=0;e<t.length;e++){const n=t[e],a=t[e!==t.length-1?e+1:null];let s=a?Math.abs(a-n):null;const i=r.barSize;s&&(i?i>s&&(r.barSize=s):r.barSize=s)}}(X||J)&&G.values.forEach(((t,n)=>{let a=s(B,t);if(isNaN(a)&&(a=t[0]),y=e.measureText(l(a)).width,G.values.set(n,a),"stack"===r.mode){const t=h.has(n)?h.get(n):[0,0];a=(a>=0?t[0]:t[1])+a;const e=a>=0?[a,t[1]]:[t[0],a];h.set(n,e)}i?k.values.push(a):L.values.push(a)}))}J&&!X&&!i&&k.values.push(g),X&&!J&&i&&L.values.push(f)}else{if(H.includes(g)&&X){const t=Y[H.indexOf(g)];t&&!isNaN(f)&&t.push(f)}else if(_.includes(f)&&!X&&J){const t=Y[_.indexOf(f)];t&&!isNaN(g)&&t.push(g)}else H.push(g),_.push(f),X?Y.push([f]):J&&Y.push([g]);if(u===a-1)for(let t=0;t<Y.length;t++){const n=Y[t],a=s(B,n);isNaN(a)||(X?(y=e.measureText(l(a)).width,_[t]=a,L.values.push(a)):(d=e.measureText(l(a)).width,H[t]=a,k.values.push(a)))}}d>O&&(O=d,o=g),y>R&&(R=y,i=f),(!J||X)&&k.values.push(g),(!X||J)&&L.values.push(f)}k.maxWidth=O>k.maxWidth?O:k.maxWidth,L.maxWidth=R>L.maxWidth?R:L.maxWidth,L.isAllNumbers=X,k.isAllNumbers=J,C=!0;const u=F||"Dataset "+m,f=e.measureText(u).width;"bar"===E?(d.push(u),I.color&&v.push(Array.isArray(I.color)?I.color[0]:I.color),G.design=y(E,I,m),r.dataset.push(G)):(n.name=u,n.values=_,n.labels=H,n.design=y(E,I,m),g.push(n)),f>T&&(T=f),S+=1,m++}else if("pie"===E){for(let t=0;t<W.length;t++){const n=J?Math.round(z[t]):z[t],a=X?Math.round(W[t]):W[t];if(a>=0&&n){const t=e.measureText(n).width;V.includes(n)?q[V.indexOf(n)].push(a):(V.push(n),q.push([a])),t>u&&(u=t)}}w=!0,j.labels=V,j.values=q,j.type="pie",f.push(j),u>T&&(T=u),S+=V.length}k&&(k.values=[...new Set(k.values)]),L&&(L.values=[...new Set(L.values)])}M&&(r.names=d,r.colors=v,r.direction=P,g.unshift(r))}const M=(t,a)=>{for(let s in t){const o=t[s],h=o.values,c=o.maxWidth,u=i(h);let g=r(h);if("values"===a){if("y2"===s){if(n.y2Axis){const t=n.y2Axis.range;!t||(g=t)}}else if(n.yAxis){const t=n.yAxis.range;!t||(g=t)}}else if(n.xAxis){const t=n.xAxis.range;!t||(g=t)}const f=d(g),x=f.range,y=l(x[0]),m=l(x[1]),v=y&&!isNaN(y)?e.measureText(y).width:0,b=m&&!isNaN(y)?e.measureText(m).width:0,p=Math.max(c,Math.max(v,b));o.maxWidth=p,o.range=f.range,o.tickData=f,o.isAllNumbers=u}},D=[...g,...f];M(p,"values"),M(b),n.datasetNameData={isDatasetName:S>1,maxNameWidth:T,total:S},n.axisData={labels:b,values:p,direction:P},n.hasAxisData=C,n.hasPieData=w,t.setData(D)}(t),function(t){t.getCtx();const e=t.getCanvas(),n=e.width,a=e.height,s=t.getLayout(),i=t.getStyle(),l=i.title.fontSize,o=i.label.fontSize,r=t.getLayout().titleLines;let h=0;r.length>0&&(h=(r.length+1)*l);const c=s.axisData,u=c.labels,g=c.values,f=2*o;let d=.15*n,x=.15*n;const y=g.y1.maxWidth;y<d&&(d=y+f),s.yAxis&&s.yAxis.title&&(d+=f);const m=g.y2.maxWidth;m<x&&(x=0===m?0:m+f),s.y2Axis&&s.y2Axis.title&&m>0&&(x+=2*o);let v=.15*n;const b=s.datasetNameData,p=b.isDatasetName,A=b.maxNameWidth;v=p?A<v?A+f:.2*n:0;let C=f+o,w=0;const P=n-(d+x+v),T=u.x1,S=T.maxWidth,M=P/T.values.length;if(w=T.isAllNumbers?S:0,M/o<4){const t=.3*a;C+=S>t?t:S}s.xAxis&&s.xAxis.title&&(C+=f);const D={x:d,y:h,width:n-(d+x+v+w),height:a-(h+C),yAxisRight:x};t.layout={...s,graphPosition:D}}(t);const e=t.getLayout();(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().title,s=t.getCanvas().width,i=n.graphPosition.y;let l=n.titleLines;if(e.textAlign="center",l){const t=a.fontSize;e.font=t+"px "+a.fontFamily;let n=s/2,o=i/2+t/2;l.length>1&&(o=t);for(let a=0;a<l.length;a++){const s=l[a];e.beginPath(),e.fillText(s,n,o),e.closePath(),o+=t}}})(t),(t=>{const e=t.getCtx(),n=t.getLayout(),a=t.getStyle().label,s=e.canvas,i=s.width,l=s.height,o=a.fontSize;e.font=o+"px "+a.fontFamily;const r=n.graphPosition,h=r.x,c=r.y,u=r.width,g=r.height,d=.2*i,x=l-c,y=h+u+r.yAxisRight+o,m=n.datasetNameData.total,b=t.getData();let p=!1;if(1===b.length){const t=b[0];"bar"===t.type&&t.names.length>1&&(p=!0)}if(b.length>1||!n.hasAxisData||p){let t=c+o/2;for(let n=0;n<b.length;n++){const a=b[n];if(a){let n=a.labels;const s=a.type;let i=a.colors;if(["line","scatter","bar"].includes(s))if("bar"===s)n=a.names,i=a.colors;else{n=[a.name];const t=a.design.color;i=Array.isArray(t)?t:[t]}if(n){let a=2*o;m*(2*o)>=g+o/2&&(a=Math.round(x/m));for(let s=0;s<n.length;s++){const l=f[s].code;let r=n[s];const h=e.measureText(r).width;if(h+a>d&&r.length>3){const t=h/r.length;r=v(r,Math.floor((d-2*o)/t))}const c=(i?i[s]:null)||l;c&&(e.fillStyle=c);const u=y+o,g=t;e.beginPath(),e.arc(y,t,o/2,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="black",e.textAlign="start",e.textBaseline="middle",e.fillText(r,u,g),t+=a}}}}}})(t),e.hasAxisData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition;e.beginPath(),e.strokeStyle="#b5b5b5",e.lineWidth="0.1",e.rect(n.x+1,n.y,n.width-2,n.height),e.stroke(),e.lineWidth="1",function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getCanvas(),i=(s.width,s.height),o=t.getStyle().label,r=e.width,h=e.height,c=e.x,u=e.y,g=o.fontSize;n.font=g+"px "+o.fontFamily,n.textBaseline="hanging";let f=0,d=u+h;const x=a.axisData.labels;for(let t in x){const e=x[t],a=e.values;if(e.isAllNumbers){const t=e.tickData;a.sort(((t,e)=>t-e));let s=e.range;if(s){const e=s[0],a=s[1],i=t.interval;let o=t.count,x=r/o;x<1&&(x=1);let y=0;const m=n.measureText(a).width;let v=1;m>x&&(v+=Math.round(m/x)),n.textAlign="center";for(let t=0;t<=o;t+=v){y=l(e+i*t),f=c+x*t,n.measureText(y).width;const a=f,s=d+g;n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5",n.moveTo(f,u),n.lineTo(f,u+h+g/2),n.stroke(),n.beginPath(),n.fillText(y,a,s)}}}else{const t=e.maxWidth;let s=r/a.length;s<1&&(s=1);let l=1;for(var y=0;y<a.length;y+=l){f=c+(s/2+s*y);let e=f;const l=d+g;n.beginPath(),n.textAlign="center";let o=a[y],r=0;const x=n.measureText(o).width/o.length;s/g<4?(o=v(o,(i-(u+h))/x),r=-90,e=f,n.textAlign="end",n.textBaseline="middle"):t>s&&(o=v(o,s/x));let m=r*(Math.PI/180);n.save(),n.translate(e,l),n.rotate(m),n.fillText(o,0,0),n.restore()}}}n.textAlign="start",n.textBaseline="alphabetic"}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=e.width,o=e.height,r=e.x,h=e.y,c=s.fontSize;n.font=c+"px "+s.fontFamily;let u=r,g=h+o;const f=a.axisData,d=(f.direction,f.values);for(let t in d){const e=d[t],a=e.values;if(e.isAllNumbers){const s=e.tickData;a.sort(((t,e)=>t-e));let f=e.range;if(f){const e=f[0],a=s.interval;let d=s.count,x=o/d;x<1&&(x=1);let y=0,m=1;c>x&&(m+=Math.round(c/x));for(let s=0;s<=d;s+=m){y=l(e+a*s),g=h+o-x*s;const f=n.measureText(y).width,d="y2"===t?u+i+c:u-f-c,m=g+Math.floor(c/2);n.beginPath(),n.strokeStyle=0===y?"black":"#b5b5b5","y2"===t?(n.moveTo(r+i,g),n.lineTo(r+i+c/2,g)):(n.moveTo(r+i,g),n.lineTo(r-c/2,g)),n.stroke(),n.beginPath(),n.fillText(y,d,m)}}}else{let e=o/a.length;e<1&&(e=1);let s=1;c>e&&(s+=Math.round(c/e));for(var x=0;x<a.length;x+=s){g=h+o-(e/2+e*x);const s=a[x],l="y2"===t?u+i+c:u-c,r=g;n.beginPath(),n.textAlign="y2"===t?"start":"end",n.textBaseline="middle",n.fillText(s,l,r),n.textAlign="start",n.textBaseline="alphabetic"}}}}(t,n),function(t,e){const n=t.getCtx(),a=t.getLayout(),s=t.getStyle().label,i=n.canvas.height,l=e.width,o=e.height,r=e.x,h=e.y,c=e.yAxisRight;let u=a.yAxis,g=a.y2Axis,f=a.xAxis;n.textAlign="center";const d=s.fontSize;if(n.font=d+"px "+s.fontFamily,u){let t=u.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(d,h+o/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(g){let t=g.title;if(t){n.beginPath();let e=Math.PI/180*-90;n.save(),n.translate(r+l+c-d,h+o/2),n.rotate(e),n.fillText(t,0,0),n.restore()}}if(f){let t=f.title;t&&(n.beginPath(),n.fillText(t,r+l/2,i-d/2))}}(t,n)})(t),e.hasPieData&&(t=>{const e=t.getCtx(),n=t.getLayout().graphPosition,a=n.x,s=n.y,i=n.width,l=g(i,n.height),o=a+i/2,r=s+l;e.beginPath(),e.arc(o,r,l,0,2*Math.PI),e.stroke()})(t)},p=(t,e,n,s,i,l,o)=>{const r=t.getCtx(),h=t.getLayout(),g="hr"===e.direction,f=h.axisData,d=f.values[e.yAxis],x=f.labels[e.xAxis],y=h.graphPosition,m=y.x,v=y.y,b=y.height;let p=g?x.range:d.range;const A=a(0,p),C=(p?g?c(t,A):u(t,A):null)||(g?m:v+b);if(g){const e=l;let a=u(t,s)+o*l/2-e*n;const h=c(t,i)-C;r.beginPath(),r.rect(C,a-e,h,e),r.fill()}else{const e=l;let a=c(t,s)-o*l/2+e*n;const h=u(t,i),g=C-h;r.beginPath(),r.rect(a,h,e,g),r.fill()}},A=(t,e,n,a,s,i)=>{const l=t.getCtx(),o=t.getLayout(),r="hr"===e.direction,h=o.axisData,g=h.values[e.yAxis],f=h.labels[e.xAxis],d=o.graphPosition,x=d.x,y=d.y,m=(d.width,d.height),v=((r?f.range:g.range)?r?c(t,s):u(t,s):null)||(r?x:y+m);if(r){const e=n;let s=u(t,a)+n/2;const o=c(t,i)-v;l.beginPath(),l.rect(v,s-e,o,e),l.fill()}else{const e=n;let s=c(t,a)-n/2;const o=u(t,i),r=v-o;l.beginPath(),l.rect(s,o,e,r),l.fill()}};let C=null,w=!1,P=!1,T=null;const S=(t,e,a,s,i)=>{const l=e.xAxis?e.xAxis:"x1",o=t.getCtx();o.lineWidth=s,o.lineCap="round",((t,e,a)=>{const s=t.getCtx(),i=t.getLayout();if(!i.isBarChart){const t=i.axisData.labels[a].range,l=t?t[0]:null,o=t?t[1]:null;if(e){if(w){const t={x:l,y:n(l,C.x,C.y,e.x,e.y)};newPos&&(s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(e.x,e.y)),P=!0}T=e,w=!1}else if(C=e,w=!0,P||T){const t={x:o,y:n(o,T.x,T.y,e.x,e.y)};newPos&&s.lineTo(t.x,t.y),P=!1}}})(t,i,l),i&&("start"===a?(o.beginPath(),o.moveTo(i.x,i.y)):(o.lineTo(i.x,i.y),o.stroke(),o.closePath(),o.beginPath(),o.moveTo(i.x,i.y))),"end"===a&&(C=null,w=!1,P=!1,T=null,o.stroke(),o.closePath())},M=(t,e,n)=>{const a=t.getCtx();n&&(a.beginPath(),a.arc(n.x,n.y,e,0,2*Math.PI),a.stroke(),a.fill(),a.closePath())},D=(t,e,n,a)=>{const s=t.getLayout().graphPosition,i=s.x,l=s.y,r=s.width,h=g(r,s.height),c=i+r/2,u=l+h,f=o(n,h,{x:c,y:u}),d={x:c,y:u},x=o(a,h,{x:c,y:u}),y=Math.PI/180,m=n*y,v=a*y;e.beginPath(),e.strokeStyle="white",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.arc(d.x,d.y,h,m,v),e.moveTo(f.x,f.y),e.lineTo(d.x,d.y),e.lineTo(x.x,x.y),e.stroke(),e.fill(),e.closePath()},N=(t,e,n)=>{const i=t.getCtx(),l=t.getLayout();if("bars"===e){const e=l.axisData,s=n.dataset,o="hr"===n.direction,r=n.mode,h=s.length,c=l.graphPosition,u=o?c.height:c.width,g=new Map;for(let l=0;l<s.length;l++){const c=s[l];c.direction=n.direction;const f=e.values[c.yAxis],d=e.labels[c.xAxis],x=u/d.values.length;let y=x/(h+1);const m=o?f:d;if(m.isAllNumbers){const t=m.range,e=t[0],a=t[1]-e,s=n.barSize;s&&(y=s/a*u)}const v=c.design.color;i.fillStyle=v;let b=0;const C=a(0,o?d.range:f.range);c.values.forEach(((e,n)=>{if(Array.isArray(e)&&(e=e[0]),Array.isArray(v)&&(i.fillStyle=v[b>=v.length?0:b]),"stack"===r){y=.9*x;const a=g.has(n)?g.get(n):[C,C],s=e>=0?a[0]:a[1],i=0===l?e:s+e,o=e>=0?[i,a[1]]:[a[0],i];g.set(n,o),A(t,c,y,n,s,i)}else p(t,c,l,n,e,y,h);b++}))}}else if("pie"===e){const e=t.getTempCanvas();e.width=i.canvas.width,e.height=i.canvas.height;const a=e.getContext("2d"),r=l.graphPosition,h=r.x,c=r.y,u=r.width,g=r.height,d=Math.min(u,g)/2,x=n.values?n.values:[],y=n.colors,m=n.operation;let v=0;const b=[];if(x.forEach((t=>{const e=s(m,t);b.push(e),v+=e})),b){let e=-90,n=e;for(var o=0;o<b.length;o++){const s=f[o].code,i=(y?y[o]:null)||s;i&&(a.fillStyle=i);const l=b[o];if(!isNaN(l)){e+=l/v*360;const s=e;D(t,a,n,s),n=s}}}const p=u/2,A=g/2,C=(n.hole?n.hole:0)*d;a.globalCompositeOperation="destination-out",a.globalAlpha=1,a.beginPath(),a.arc(h+p,c+A,C,0,2*Math.PI),a.fill(),a.globalCompositeOperation="source-over",i.drawImage(e,0,0)}else if(n){const a=n.yAxis?n.yAxis:"y1",s=n.xAxis?n.xAxis:"x1",l="hr"===n.direction,r=n.design.color,c=n.design.size;i.fillStyle=r,i.strokeStyle=r;const u=l?n.values:n.labels,g=l?n.labels:n.values?n.values:[];if(u)for(o=0;o<u.length;o++){let l=u[o],f=g[o];const d=Array.isArray(r)?r[o]:r,x=Array.isArray(c)?c[o]:c,y=0===o?"start":o===u.length-1?"end":"";if(f||0===f){const o=h(t,l,f,a,s);if("arcs"===e);else if("lines"===e)S(t,n,y,x,o);else if("points"===e){const e=n.design.line,a=e&&e.color?e.color:d,s=e&&e.size?e.size:0;i.fillStyle=d,i.strokeStyle=a,i.lineWidth=s,M(t,x,o)}}else i.stroke(),i.closePath()}}},L=(t,e)=>{e&&N(t,"points",e)},k=(t,e)=>{e&&N(t,"bars",e)},F=(t,e)=>{e&&N(t,"lines",e)},z=(t,e)=>{e&&N(t,"pie",e)};function W(t){this.data=[],this.layout={},this.style={},this.target=document.getElementById(t),this.targetCanvas=document.createElement("canvas"),this.canvas=document.createElement("canvas"),this.canvasCopy=document.createElement("canvas"),this.tempCanvas=document.createElement("canvas"),this.setData=function(t){this.data=t},this.getData=function(){return this.data},this.setLayout=function(t){if(t){const e=t.title?t.title:"";t.titleLines=function(t,e){const n=t.getCanvas(),a=t.getCtx(),s=t.getStyle().title,i=n.width,l=e.split(" ");let o=[],r=l[0];const h=s.fontSize;a.font=s.fontWeight+" "+h+"px "+s.fontFamily;for(let t=1;t<l.length;t++){const e=r+" "+l[t];a.measureText(e).width+h<i?r=e:(a.measureText(r).width,o.push(r),r=l[t])}return o.push(r),o}(this,e),t.customColorsIndex=0,this.layout={...t}}},this.getLayout=function(){return this.layout},this.setStyle=function(){this.style=(t=>{const e=t.getCanvas().width,n={fontFamily:"Arial",fontWeight:"bold"},a={fontFamily:"Arial"};return e<600?(n.fontSize=16,a.fontSize=12):e<1200?(n.fontSize=20,a.fontSize=14):(n.fontSize=24,a.fontSize=18),{title:n,label:a}})(this)},this.getStyle=function(){return this.style},this.setCanvas=function(t,e){const n=this.getCanvas();n.width=t,n.height=e,this.canvas=n},this.getCanvas=function(){return this.canvas},this.updateCanvasCopy=function(){const t=this.getCanvas(),e=this.getCanvasCopy();e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),this.canvasCopy=e},this.getCanvasCopy=function(){return this.canvasCopy},this.getCtx=function(){return this.getCanvas().getContext("2d")},this.getTempCanvas=function(){return this.tempCanvas},this.getTarget=function(){return this.target},this.getTargetCanvas=function(){return this.targetCanvas},this.updateTargetCanvas=function(){const t=this.getCanvasCopy(),e=this.getTargetCanvas(),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0)},this.addCanvasToTarget=function(){const t=this.getTargetCanvas();t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.getCanvas(),0,0);const e=this;var n,a,s,i;a="mousemove",s=function(t){const n=function(t){if(t){const e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}return null}(t);((t,e)=>{if(t&&e){t.getCtx();const e=t.getLayout();t.updateTargetCanvas(),e.firstDataType}})(e,n)},i="touchend",(n=t)&&"object"==typeof n&&(n.addEventListener?(m(n,a,s)||n.addEventListener(a,s,!1),i&&!m(n,i,s)&&n.addEventListener(i,s,!1)):n.attachEvent&&(m(n,a,s)||n.attachEvent("on"+a,s),i&&!m(n,i,s)&&n.attachEvent("on"+i,s))),this.target&&(this.target.innerHTML="",this.target.appendChild(t))}}W.prototype.plot=function(t,e){const n=function(t,e){const n=t.getTarget(),a=e.width,s=e.height;let i=0,l=0;return n&&(i=Math.max(n.offsetWidth,n.offsetHeight),l=.6*i),(a||s)&&(i=a,l=s),{width:i,height:l}}(this,e);this.setCanvas(n.width,n.height),this.setStyle(),this.setData(t),this.setLayout(e),b(this),(t=>{const e=t.getCtx(),n=t.getData();for(let a=0;a<n.length;a++){const s=n[a],i=s.type;e.lineJoin="round",i&&("line"===i?F(t,s):"scatter"===i?L(t,s):"bar"===i?k(t,s):"pie"===i&&z(t,s))}})(this),this.updateCanvasCopy(),this.addCanvasToTarget()},DataVision=W})()})();